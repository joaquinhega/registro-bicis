var Is=Object.defineProperty;var _s=(n,t,e)=>t in n?Is(n,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[t]=e;var Er=(n,t,e)=>_s(n,typeof t!="symbol"?t+"":t,e);import{ah as ks,au as ve,N as to,av as Rs,aw as Vr,ax as jr,ay as Ts,az as Os,c as Ee,W as Me,aA as Ui,S as Mr,aB as Ls,aC as Us,aD as Cs,aE as Ns,aF as zs,aG as Fs,d as Ke,aH as Ln,aI as Ds,aJ as je,aK as Yn,aL as Be,aM as Ks,aN as Yr,aO as qs,aP as Ps,aQ as eo,aR as rt,aS as $s,aT as Zs,aU as Vs,aV as Ci,p as js,J as Ys,q as Gs,ai as Sr,n as Hs,_ as Ce,C as Ws,a as Xs,b as Js,l as Qs}from"./index-WQCy-1cm.js";import{c as ta,a as ea,b as sn}from"./solanaRpcMiddlewares-BSNeYyv4.js";var Gr={exports:{}};Gr.exports;(function(n){(function(t,e){function r(h,o){if(!h)throw new Error(o||"Assertion failed")}function s(h,o){h.super_=o;var c=function(){};c.prototype=o.prototype,h.prototype=new c,h.prototype.constructor=h}function i(h,o,c){if(i.isBN(h))return h;this.negative=0,this.words=null,this.length=0,this.red=null,h!==null&&((o==="le"||o==="be")&&(c=o,o=10),this._init(h||0,o||10,c||"be"))}typeof t=="object"?t.exports=i:e.BN=i,i.BN=i,i.wordSize=26;var u;try{typeof window<"u"&&typeof window.Buffer<"u"?u=window.Buffer:u=ks.Buffer}catch{}i.isBN=function(o){return o instanceof i?!0:o!==null&&typeof o=="object"&&o.constructor.wordSize===i.wordSize&&Array.isArray(o.words)},i.max=function(o,c){return o.cmp(c)>0?o:c},i.min=function(o,c){return o.cmp(c)<0?o:c},i.prototype._init=function(o,c,f){if(typeof o=="number")return this._initNumber(o,c,f);if(typeof o=="object")return this._initArray(o,c,f);c==="hex"&&(c=16),r(c===(c|0)&&c>=2&&c<=36),o=o.toString().replace(/\s+/g,"");var l=0;o[0]==="-"&&(l++,this.negative=1),l<o.length&&(c===16?this._parseHex(o,l,f):(this._parseBase(o,c,l),f==="le"&&this._initArray(this.toArray(),c,f)))},i.prototype._initNumber=function(o,c,f){o<0&&(this.negative=1,o=-o),o<67108864?(this.words=[o&67108863],this.length=1):o<4503599627370496?(this.words=[o&67108863,o/67108864&67108863],this.length=2):(r(o<9007199254740992),this.words=[o&67108863,o/67108864&67108863,1],this.length=3),f==="le"&&this._initArray(this.toArray(),c,f)},i.prototype._initArray=function(o,c,f){if(r(typeof o.length=="number"),o.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(o.length/3),this.words=new Array(this.length);for(var l=0;l<this.length;l++)this.words[l]=0;var g,y,v=0;if(f==="be")for(l=o.length-1,g=0;l>=0;l-=3)y=o[l]|o[l-1]<<8|o[l-2]<<16,this.words[g]|=y<<v&67108863,this.words[g+1]=y>>>26-v&67108863,v+=24,v>=26&&(v-=26,g++);else if(f==="le")for(l=0,g=0;l<o.length;l+=3)y=o[l]|o[l+1]<<8|o[l+2]<<16,this.words[g]|=y<<v&67108863,this.words[g+1]=y>>>26-v&67108863,v+=24,v>=26&&(v-=26,g++);return this._strip()};function w(h,o){var c=h.charCodeAt(o);if(c>=48&&c<=57)return c-48;if(c>=65&&c<=70)return c-55;if(c>=97&&c<=102)return c-87;r(!1,"Invalid character in "+h)}function d(h,o,c){var f=w(h,c);return c-1>=o&&(f|=w(h,c-1)<<4),f}i.prototype._parseHex=function(o,c,f){this.length=Math.ceil((o.length-c)/6),this.words=new Array(this.length);for(var l=0;l<this.length;l++)this.words[l]=0;var g=0,y=0,v;if(f==="be")for(l=o.length-1;l>=c;l-=2)v=d(o,c,l)<<g,this.words[y]|=v&67108863,g>=18?(g-=18,y+=1,this.words[y]|=v>>>26):g+=8;else{var p=o.length-c;for(l=p%2===0?c+1:c;l<o.length;l+=2)v=d(o,c,l)<<g,this.words[y]|=v&67108863,g>=18?(g-=18,y+=1,this.words[y]|=v>>>26):g+=8}this._strip()};function b(h,o,c,f){for(var l=0,g=0,y=Math.min(h.length,c),v=o;v<y;v++){var p=h.charCodeAt(v)-48;l*=f,p>=49?g=p-49+10:p>=17?g=p-17+10:g=p,r(p>=0&&g<f,"Invalid character"),l+=g}return l}i.prototype._parseBase=function(o,c,f){this.words=[0],this.length=1;for(var l=0,g=1;g<=67108863;g*=c)l++;l--,g=g/c|0;for(var y=o.length-f,v=y%l,p=Math.min(y,y-v)+f,a=0,m=f;m<p;m+=l)a=b(o,m,m+l,c),this.imuln(g),this.words[0]+a<67108864?this.words[0]+=a:this._iaddn(a);if(v!==0){var z=1;for(a=b(o,m,o.length,c),m=0;m<v;m++)z*=c;this.imuln(z),this.words[0]+a<67108864?this.words[0]+=a:this._iaddn(a)}this._strip()},i.prototype.copy=function(o){o.words=new Array(this.length);for(var c=0;c<this.length;c++)o.words[c]=this.words[c];o.length=this.length,o.negative=this.negative,o.red=this.red};function B(h,o){h.words=o.words,h.length=o.length,h.negative=o.negative,h.red=o.red}if(i.prototype._move=function(o){B(o,this)},i.prototype.clone=function(){var o=new i(null);return this.copy(o),o},i.prototype._expand=function(o){for(;this.length<o;)this.words[this.length++]=0;return this},i.prototype._strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},i.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},typeof Symbol<"u"&&typeof Symbol.for=="function")try{i.prototype[Symbol.for("nodejs.util.inspect.custom")]=R}catch{i.prototype.inspect=R}else i.prototype.inspect=R;function R(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var M=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],S=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],A=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];i.prototype.toString=function(o,c){o=o||10,c=c|0||1;var f;if(o===16||o==="hex"){f="";for(var l=0,g=0,y=0;y<this.length;y++){var v=this.words[y],p=((v<<l|g)&16777215).toString(16);g=v>>>24-l&16777215,l+=2,l>=26&&(l-=26,y--),g!==0||y!==this.length-1?f=M[6-p.length]+p+f:f=p+f}for(g!==0&&(f=g.toString(16)+f);f.length%c!==0;)f="0"+f;return this.negative!==0&&(f="-"+f),f}if(o===(o|0)&&o>=2&&o<=36){var a=S[o],m=A[o];f="";var z=this.clone();for(z.negative=0;!z.isZero();){var L=z.modrn(m).toString(o);z=z.idivn(m),z.isZero()?f=L+f:f=M[a-L.length]+L+f}for(this.isZero()&&(f="0"+f);f.length%c!==0;)f="0"+f;return this.negative!==0&&(f="-"+f),f}r(!1,"Base should be between 2 and 36")},i.prototype.toNumber=function(){var o=this.words[0];return this.length===2?o+=this.words[1]*67108864:this.length===3&&this.words[2]===1?o+=4503599627370496+this.words[1]*67108864:this.length>2&&r(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-o:o},i.prototype.toJSON=function(){return this.toString(16,2)},u&&(i.prototype.toBuffer=function(o,c){return this.toArrayLike(u,o,c)}),i.prototype.toArray=function(o,c){return this.toArrayLike(Array,o,c)};var U=function(o,c){return o.allocUnsafe?o.allocUnsafe(c):new o(c)};i.prototype.toArrayLike=function(o,c,f){this._strip();var l=this.byteLength(),g=f||Math.max(1,l);r(l<=g,"byte array longer than desired length"),r(g>0,"Requested array length <= 0");var y=U(o,g),v=c==="le"?"LE":"BE";return this["_toArrayLike"+v](y,l),y},i.prototype._toArrayLikeLE=function(o,c){for(var f=0,l=0,g=0,y=0;g<this.length;g++){var v=this.words[g]<<y|l;o[f++]=v&255,f<o.length&&(o[f++]=v>>8&255),f<o.length&&(o[f++]=v>>16&255),y===6?(f<o.length&&(o[f++]=v>>24&255),l=0,y=0):(l=v>>>24,y+=2)}if(f<o.length)for(o[f++]=l;f<o.length;)o[f++]=0},i.prototype._toArrayLikeBE=function(o,c){for(var f=o.length-1,l=0,g=0,y=0;g<this.length;g++){var v=this.words[g]<<y|l;o[f--]=v&255,f>=0&&(o[f--]=v>>8&255),f>=0&&(o[f--]=v>>16&255),y===6?(f>=0&&(o[f--]=v>>24&255),l=0,y=0):(l=v>>>24,y+=2)}if(f>=0)for(o[f--]=l;f>=0;)o[f--]=0},Math.clz32?i.prototype._countBits=function(o){return 32-Math.clz32(o)}:i.prototype._countBits=function(o){var c=o,f=0;return c>=4096&&(f+=13,c>>>=13),c>=64&&(f+=7,c>>>=7),c>=8&&(f+=4,c>>>=4),c>=2&&(f+=2,c>>>=2),f+c},i.prototype._zeroBits=function(o){if(o===0)return 26;var c=o,f=0;return c&8191||(f+=13,c>>>=13),c&127||(f+=7,c>>>=7),c&15||(f+=4,c>>>=4),c&3||(f+=2,c>>>=2),c&1||f++,f},i.prototype.bitLength=function(){var o=this.words[this.length-1],c=this._countBits(o);return(this.length-1)*26+c};function C(h){for(var o=new Array(h.bitLength()),c=0;c<o.length;c++){var f=c/26|0,l=c%26;o[c]=h.words[f]>>>l&1}return o}i.prototype.zeroBits=function(){if(this.isZero())return 0;for(var o=0,c=0;c<this.length;c++){var f=this._zeroBits(this.words[c]);if(o+=f,f!==26)break}return o},i.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},i.prototype.toTwos=function(o){return this.negative!==0?this.abs().inotn(o).iaddn(1):this.clone()},i.prototype.fromTwos=function(o){return this.testn(o-1)?this.notn(o).iaddn(1).ineg():this.clone()},i.prototype.isNeg=function(){return this.negative!==0},i.prototype.neg=function(){return this.clone().ineg()},i.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},i.prototype.iuor=function(o){for(;this.length<o.length;)this.words[this.length++]=0;for(var c=0;c<o.length;c++)this.words[c]=this.words[c]|o.words[c];return this._strip()},i.prototype.ior=function(o){return r((this.negative|o.negative)===0),this.iuor(o)},i.prototype.or=function(o){return this.length>o.length?this.clone().ior(o):o.clone().ior(this)},i.prototype.uor=function(o){return this.length>o.length?this.clone().iuor(o):o.clone().iuor(this)},i.prototype.iuand=function(o){var c;this.length>o.length?c=o:c=this;for(var f=0;f<c.length;f++)this.words[f]=this.words[f]&o.words[f];return this.length=c.length,this._strip()},i.prototype.iand=function(o){return r((this.negative|o.negative)===0),this.iuand(o)},i.prototype.and=function(o){return this.length>o.length?this.clone().iand(o):o.clone().iand(this)},i.prototype.uand=function(o){return this.length>o.length?this.clone().iuand(o):o.clone().iuand(this)},i.prototype.iuxor=function(o){var c,f;this.length>o.length?(c=this,f=o):(c=o,f=this);for(var l=0;l<f.length;l++)this.words[l]=c.words[l]^f.words[l];if(this!==c)for(;l<c.length;l++)this.words[l]=c.words[l];return this.length=c.length,this._strip()},i.prototype.ixor=function(o){return r((this.negative|o.negative)===0),this.iuxor(o)},i.prototype.xor=function(o){return this.length>o.length?this.clone().ixor(o):o.clone().ixor(this)},i.prototype.uxor=function(o){return this.length>o.length?this.clone().iuxor(o):o.clone().iuxor(this)},i.prototype.inotn=function(o){r(typeof o=="number"&&o>=0);var c=Math.ceil(o/26)|0,f=o%26;this._expand(c),f>0&&c--;for(var l=0;l<c;l++)this.words[l]=~this.words[l]&67108863;return f>0&&(this.words[l]=~this.words[l]&67108863>>26-f),this._strip()},i.prototype.notn=function(o){return this.clone().inotn(o)},i.prototype.setn=function(o,c){r(typeof o=="number"&&o>=0);var f=o/26|0,l=o%26;return this._expand(f+1),c?this.words[f]=this.words[f]|1<<l:this.words[f]=this.words[f]&~(1<<l),this._strip()},i.prototype.iadd=function(o){var c;if(this.negative!==0&&o.negative===0)return this.negative=0,c=this.isub(o),this.negative^=1,this._normSign();if(this.negative===0&&o.negative!==0)return o.negative=0,c=this.isub(o),o.negative=1,c._normSign();var f,l;this.length>o.length?(f=this,l=o):(f=o,l=this);for(var g=0,y=0;y<l.length;y++)c=(f.words[y]|0)+(l.words[y]|0)+g,this.words[y]=c&67108863,g=c>>>26;for(;g!==0&&y<f.length;y++)c=(f.words[y]|0)+g,this.words[y]=c&67108863,g=c>>>26;if(this.length=f.length,g!==0)this.words[this.length]=g,this.length++;else if(f!==this)for(;y<f.length;y++)this.words[y]=f.words[y];return this},i.prototype.add=function(o){var c;return o.negative!==0&&this.negative===0?(o.negative=0,c=this.sub(o),o.negative^=1,c):o.negative===0&&this.negative!==0?(this.negative=0,c=o.sub(this),this.negative=1,c):this.length>o.length?this.clone().iadd(o):o.clone().iadd(this)},i.prototype.isub=function(o){if(o.negative!==0){o.negative=0;var c=this.iadd(o);return o.negative=1,c._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(o),this.negative=1,this._normSign();var f=this.cmp(o);if(f===0)return this.negative=0,this.length=1,this.words[0]=0,this;var l,g;f>0?(l=this,g=o):(l=o,g=this);for(var y=0,v=0;v<g.length;v++)c=(l.words[v]|0)-(g.words[v]|0)+y,y=c>>26,this.words[v]=c&67108863;for(;y!==0&&v<l.length;v++)c=(l.words[v]|0)+y,y=c>>26,this.words[v]=c&67108863;if(y===0&&v<l.length&&l!==this)for(;v<l.length;v++)this.words[v]=l.words[v];return this.length=Math.max(this.length,v),l!==this&&(this.negative=1),this._strip()},i.prototype.sub=function(o){return this.clone().isub(o)};function I(h,o,c){c.negative=o.negative^h.negative;var f=h.length+o.length|0;c.length=f,f=f-1|0;var l=h.words[0]|0,g=o.words[0]|0,y=l*g,v=y&67108863,p=y/67108864|0;c.words[0]=v;for(var a=1;a<f;a++){for(var m=p>>>26,z=p&67108863,L=Math.min(a,o.length-1),K=Math.max(0,a-h.length+1);K<=L;K++){var et=a-K|0;l=h.words[et]|0,g=o.words[K]|0,y=l*g+z,m+=y/67108864|0,z=y&67108863}c.words[a]=z|0,p=m|0}return p!==0?c.words[a]=p|0:c.length--,c._strip()}var N=function(o,c,f){var l=o.words,g=c.words,y=f.words,v=0,p,a,m,z=l[0]|0,L=z&8191,K=z>>>13,et=l[1]|0,Q=et&8191,H=et>>>13,Wt=l[2]|0,ct=Wt&8191,ft=Wt>>>13,mn=l[3]|0,gt=mn&8191,mt=mn>>>13,wi=l[4]|0,yt=wi&8191,wt=wi>>>13,vi=l[5]|0,vt=vi&8191,bt=vi>>>13,bi=l[6]|0,xt=bi&8191,Et=bi>>>13,xi=l[7]|0,Mt=xi&8191,St=xi>>>13,Ei=l[8]|0,Bt=Ei&8191,At=Ei>>>13,Mi=l[9]|0,It=Mi&8191,_t=Mi>>>13,Si=g[0]|0,kt=Si&8191,Rt=Si>>>13,Bi=g[1]|0,Tt=Bi&8191,Ot=Bi>>>13,Ai=g[2]|0,Lt=Ai&8191,Ut=Ai>>>13,Ii=g[3]|0,Ct=Ii&8191,Nt=Ii>>>13,_i=g[4]|0,zt=_i&8191,Ft=_i>>>13,ki=g[5]|0,Dt=ki&8191,Kt=ki>>>13,Ri=g[6]|0,qt=Ri&8191,Pt=Ri>>>13,Ti=g[7]|0,$t=Ti&8191,Zt=Ti>>>13,Oi=g[8]|0,Vt=Oi&8191,jt=Oi>>>13,Li=g[9]|0,Yt=Li&8191,Gt=Li>>>13;f.negative=o.negative^c.negative,f.length=19,p=Math.imul(L,kt),a=Math.imul(L,Rt),a=a+Math.imul(K,kt)|0,m=Math.imul(K,Rt);var rr=(v+p|0)+((a&8191)<<13)|0;v=(m+(a>>>13)|0)+(rr>>>26)|0,rr&=67108863,p=Math.imul(Q,kt),a=Math.imul(Q,Rt),a=a+Math.imul(H,kt)|0,m=Math.imul(H,Rt),p=p+Math.imul(L,Tt)|0,a=a+Math.imul(L,Ot)|0,a=a+Math.imul(K,Tt)|0,m=m+Math.imul(K,Ot)|0;var ir=(v+p|0)+((a&8191)<<13)|0;v=(m+(a>>>13)|0)+(ir>>>26)|0,ir&=67108863,p=Math.imul(ct,kt),a=Math.imul(ct,Rt),a=a+Math.imul(ft,kt)|0,m=Math.imul(ft,Rt),p=p+Math.imul(Q,Tt)|0,a=a+Math.imul(Q,Ot)|0,a=a+Math.imul(H,Tt)|0,m=m+Math.imul(H,Ot)|0,p=p+Math.imul(L,Lt)|0,a=a+Math.imul(L,Ut)|0,a=a+Math.imul(K,Lt)|0,m=m+Math.imul(K,Ut)|0;var or=(v+p|0)+((a&8191)<<13)|0;v=(m+(a>>>13)|0)+(or>>>26)|0,or&=67108863,p=Math.imul(gt,kt),a=Math.imul(gt,Rt),a=a+Math.imul(mt,kt)|0,m=Math.imul(mt,Rt),p=p+Math.imul(ct,Tt)|0,a=a+Math.imul(ct,Ot)|0,a=a+Math.imul(ft,Tt)|0,m=m+Math.imul(ft,Ot)|0,p=p+Math.imul(Q,Lt)|0,a=a+Math.imul(Q,Ut)|0,a=a+Math.imul(H,Lt)|0,m=m+Math.imul(H,Ut)|0,p=p+Math.imul(L,Ct)|0,a=a+Math.imul(L,Nt)|0,a=a+Math.imul(K,Ct)|0,m=m+Math.imul(K,Nt)|0;var sr=(v+p|0)+((a&8191)<<13)|0;v=(m+(a>>>13)|0)+(sr>>>26)|0,sr&=67108863,p=Math.imul(yt,kt),a=Math.imul(yt,Rt),a=a+Math.imul(wt,kt)|0,m=Math.imul(wt,Rt),p=p+Math.imul(gt,Tt)|0,a=a+Math.imul(gt,Ot)|0,a=a+Math.imul(mt,Tt)|0,m=m+Math.imul(mt,Ot)|0,p=p+Math.imul(ct,Lt)|0,a=a+Math.imul(ct,Ut)|0,a=a+Math.imul(ft,Lt)|0,m=m+Math.imul(ft,Ut)|0,p=p+Math.imul(Q,Ct)|0,a=a+Math.imul(Q,Nt)|0,a=a+Math.imul(H,Ct)|0,m=m+Math.imul(H,Nt)|0,p=p+Math.imul(L,zt)|0,a=a+Math.imul(L,Ft)|0,a=a+Math.imul(K,zt)|0,m=m+Math.imul(K,Ft)|0;var ar=(v+p|0)+((a&8191)<<13)|0;v=(m+(a>>>13)|0)+(ar>>>26)|0,ar&=67108863,p=Math.imul(vt,kt),a=Math.imul(vt,Rt),a=a+Math.imul(bt,kt)|0,m=Math.imul(bt,Rt),p=p+Math.imul(yt,Tt)|0,a=a+Math.imul(yt,Ot)|0,a=a+Math.imul(wt,Tt)|0,m=m+Math.imul(wt,Ot)|0,p=p+Math.imul(gt,Lt)|0,a=a+Math.imul(gt,Ut)|0,a=a+Math.imul(mt,Lt)|0,m=m+Math.imul(mt,Ut)|0,p=p+Math.imul(ct,Ct)|0,a=a+Math.imul(ct,Nt)|0,a=a+Math.imul(ft,Ct)|0,m=m+Math.imul(ft,Nt)|0,p=p+Math.imul(Q,zt)|0,a=a+Math.imul(Q,Ft)|0,a=a+Math.imul(H,zt)|0,m=m+Math.imul(H,Ft)|0,p=p+Math.imul(L,Dt)|0,a=a+Math.imul(L,Kt)|0,a=a+Math.imul(K,Dt)|0,m=m+Math.imul(K,Kt)|0;var cr=(v+p|0)+((a&8191)<<13)|0;v=(m+(a>>>13)|0)+(cr>>>26)|0,cr&=67108863,p=Math.imul(xt,kt),a=Math.imul(xt,Rt),a=a+Math.imul(Et,kt)|0,m=Math.imul(Et,Rt),p=p+Math.imul(vt,Tt)|0,a=a+Math.imul(vt,Ot)|0,a=a+Math.imul(bt,Tt)|0,m=m+Math.imul(bt,Ot)|0,p=p+Math.imul(yt,Lt)|0,a=a+Math.imul(yt,Ut)|0,a=a+Math.imul(wt,Lt)|0,m=m+Math.imul(wt,Ut)|0,p=p+Math.imul(gt,Ct)|0,a=a+Math.imul(gt,Nt)|0,a=a+Math.imul(mt,Ct)|0,m=m+Math.imul(mt,Nt)|0,p=p+Math.imul(ct,zt)|0,a=a+Math.imul(ct,Ft)|0,a=a+Math.imul(ft,zt)|0,m=m+Math.imul(ft,Ft)|0,p=p+Math.imul(Q,Dt)|0,a=a+Math.imul(Q,Kt)|0,a=a+Math.imul(H,Dt)|0,m=m+Math.imul(H,Kt)|0,p=p+Math.imul(L,qt)|0,a=a+Math.imul(L,Pt)|0,a=a+Math.imul(K,qt)|0,m=m+Math.imul(K,Pt)|0;var ur=(v+p|0)+((a&8191)<<13)|0;v=(m+(a>>>13)|0)+(ur>>>26)|0,ur&=67108863,p=Math.imul(Mt,kt),a=Math.imul(Mt,Rt),a=a+Math.imul(St,kt)|0,m=Math.imul(St,Rt),p=p+Math.imul(xt,Tt)|0,a=a+Math.imul(xt,Ot)|0,a=a+Math.imul(Et,Tt)|0,m=m+Math.imul(Et,Ot)|0,p=p+Math.imul(vt,Lt)|0,a=a+Math.imul(vt,Ut)|0,a=a+Math.imul(bt,Lt)|0,m=m+Math.imul(bt,Ut)|0,p=p+Math.imul(yt,Ct)|0,a=a+Math.imul(yt,Nt)|0,a=a+Math.imul(wt,Ct)|0,m=m+Math.imul(wt,Nt)|0,p=p+Math.imul(gt,zt)|0,a=a+Math.imul(gt,Ft)|0,a=a+Math.imul(mt,zt)|0,m=m+Math.imul(mt,Ft)|0,p=p+Math.imul(ct,Dt)|0,a=a+Math.imul(ct,Kt)|0,a=a+Math.imul(ft,Dt)|0,m=m+Math.imul(ft,Kt)|0,p=p+Math.imul(Q,qt)|0,a=a+Math.imul(Q,Pt)|0,a=a+Math.imul(H,qt)|0,m=m+Math.imul(H,Pt)|0,p=p+Math.imul(L,$t)|0,a=a+Math.imul(L,Zt)|0,a=a+Math.imul(K,$t)|0,m=m+Math.imul(K,Zt)|0;var fr=(v+p|0)+((a&8191)<<13)|0;v=(m+(a>>>13)|0)+(fr>>>26)|0,fr&=67108863,p=Math.imul(Bt,kt),a=Math.imul(Bt,Rt),a=a+Math.imul(At,kt)|0,m=Math.imul(At,Rt),p=p+Math.imul(Mt,Tt)|0,a=a+Math.imul(Mt,Ot)|0,a=a+Math.imul(St,Tt)|0,m=m+Math.imul(St,Ot)|0,p=p+Math.imul(xt,Lt)|0,a=a+Math.imul(xt,Ut)|0,a=a+Math.imul(Et,Lt)|0,m=m+Math.imul(Et,Ut)|0,p=p+Math.imul(vt,Ct)|0,a=a+Math.imul(vt,Nt)|0,a=a+Math.imul(bt,Ct)|0,m=m+Math.imul(bt,Nt)|0,p=p+Math.imul(yt,zt)|0,a=a+Math.imul(yt,Ft)|0,a=a+Math.imul(wt,zt)|0,m=m+Math.imul(wt,Ft)|0,p=p+Math.imul(gt,Dt)|0,a=a+Math.imul(gt,Kt)|0,a=a+Math.imul(mt,Dt)|0,m=m+Math.imul(mt,Kt)|0,p=p+Math.imul(ct,qt)|0,a=a+Math.imul(ct,Pt)|0,a=a+Math.imul(ft,qt)|0,m=m+Math.imul(ft,Pt)|0,p=p+Math.imul(Q,$t)|0,a=a+Math.imul(Q,Zt)|0,a=a+Math.imul(H,$t)|0,m=m+Math.imul(H,Zt)|0,p=p+Math.imul(L,Vt)|0,a=a+Math.imul(L,jt)|0,a=a+Math.imul(K,Vt)|0,m=m+Math.imul(K,jt)|0;var hr=(v+p|0)+((a&8191)<<13)|0;v=(m+(a>>>13)|0)+(hr>>>26)|0,hr&=67108863,p=Math.imul(It,kt),a=Math.imul(It,Rt),a=a+Math.imul(_t,kt)|0,m=Math.imul(_t,Rt),p=p+Math.imul(Bt,Tt)|0,a=a+Math.imul(Bt,Ot)|0,a=a+Math.imul(At,Tt)|0,m=m+Math.imul(At,Ot)|0,p=p+Math.imul(Mt,Lt)|0,a=a+Math.imul(Mt,Ut)|0,a=a+Math.imul(St,Lt)|0,m=m+Math.imul(St,Ut)|0,p=p+Math.imul(xt,Ct)|0,a=a+Math.imul(xt,Nt)|0,a=a+Math.imul(Et,Ct)|0,m=m+Math.imul(Et,Nt)|0,p=p+Math.imul(vt,zt)|0,a=a+Math.imul(vt,Ft)|0,a=a+Math.imul(bt,zt)|0,m=m+Math.imul(bt,Ft)|0,p=p+Math.imul(yt,Dt)|0,a=a+Math.imul(yt,Kt)|0,a=a+Math.imul(wt,Dt)|0,m=m+Math.imul(wt,Kt)|0,p=p+Math.imul(gt,qt)|0,a=a+Math.imul(gt,Pt)|0,a=a+Math.imul(mt,qt)|0,m=m+Math.imul(mt,Pt)|0,p=p+Math.imul(ct,$t)|0,a=a+Math.imul(ct,Zt)|0,a=a+Math.imul(ft,$t)|0,m=m+Math.imul(ft,Zt)|0,p=p+Math.imul(Q,Vt)|0,a=a+Math.imul(Q,jt)|0,a=a+Math.imul(H,Vt)|0,m=m+Math.imul(H,jt)|0,p=p+Math.imul(L,Yt)|0,a=a+Math.imul(L,Gt)|0,a=a+Math.imul(K,Yt)|0,m=m+Math.imul(K,Gt)|0;var lr=(v+p|0)+((a&8191)<<13)|0;v=(m+(a>>>13)|0)+(lr>>>26)|0,lr&=67108863,p=Math.imul(It,Tt),a=Math.imul(It,Ot),a=a+Math.imul(_t,Tt)|0,m=Math.imul(_t,Ot),p=p+Math.imul(Bt,Lt)|0,a=a+Math.imul(Bt,Ut)|0,a=a+Math.imul(At,Lt)|0,m=m+Math.imul(At,Ut)|0,p=p+Math.imul(Mt,Ct)|0,a=a+Math.imul(Mt,Nt)|0,a=a+Math.imul(St,Ct)|0,m=m+Math.imul(St,Nt)|0,p=p+Math.imul(xt,zt)|0,a=a+Math.imul(xt,Ft)|0,a=a+Math.imul(Et,zt)|0,m=m+Math.imul(Et,Ft)|0,p=p+Math.imul(vt,Dt)|0,a=a+Math.imul(vt,Kt)|0,a=a+Math.imul(bt,Dt)|0,m=m+Math.imul(bt,Kt)|0,p=p+Math.imul(yt,qt)|0,a=a+Math.imul(yt,Pt)|0,a=a+Math.imul(wt,qt)|0,m=m+Math.imul(wt,Pt)|0,p=p+Math.imul(gt,$t)|0,a=a+Math.imul(gt,Zt)|0,a=a+Math.imul(mt,$t)|0,m=m+Math.imul(mt,Zt)|0,p=p+Math.imul(ct,Vt)|0,a=a+Math.imul(ct,jt)|0,a=a+Math.imul(ft,Vt)|0,m=m+Math.imul(ft,jt)|0,p=p+Math.imul(Q,Yt)|0,a=a+Math.imul(Q,Gt)|0,a=a+Math.imul(H,Yt)|0,m=m+Math.imul(H,Gt)|0;var dr=(v+p|0)+((a&8191)<<13)|0;v=(m+(a>>>13)|0)+(dr>>>26)|0,dr&=67108863,p=Math.imul(It,Lt),a=Math.imul(It,Ut),a=a+Math.imul(_t,Lt)|0,m=Math.imul(_t,Ut),p=p+Math.imul(Bt,Ct)|0,a=a+Math.imul(Bt,Nt)|0,a=a+Math.imul(At,Ct)|0,m=m+Math.imul(At,Nt)|0,p=p+Math.imul(Mt,zt)|0,a=a+Math.imul(Mt,Ft)|0,a=a+Math.imul(St,zt)|0,m=m+Math.imul(St,Ft)|0,p=p+Math.imul(xt,Dt)|0,a=a+Math.imul(xt,Kt)|0,a=a+Math.imul(Et,Dt)|0,m=m+Math.imul(Et,Kt)|0,p=p+Math.imul(vt,qt)|0,a=a+Math.imul(vt,Pt)|0,a=a+Math.imul(bt,qt)|0,m=m+Math.imul(bt,Pt)|0,p=p+Math.imul(yt,$t)|0,a=a+Math.imul(yt,Zt)|0,a=a+Math.imul(wt,$t)|0,m=m+Math.imul(wt,Zt)|0,p=p+Math.imul(gt,Vt)|0,a=a+Math.imul(gt,jt)|0,a=a+Math.imul(mt,Vt)|0,m=m+Math.imul(mt,jt)|0,p=p+Math.imul(ct,Yt)|0,a=a+Math.imul(ct,Gt)|0,a=a+Math.imul(ft,Yt)|0,m=m+Math.imul(ft,Gt)|0;var pr=(v+p|0)+((a&8191)<<13)|0;v=(m+(a>>>13)|0)+(pr>>>26)|0,pr&=67108863,p=Math.imul(It,Ct),a=Math.imul(It,Nt),a=a+Math.imul(_t,Ct)|0,m=Math.imul(_t,Nt),p=p+Math.imul(Bt,zt)|0,a=a+Math.imul(Bt,Ft)|0,a=a+Math.imul(At,zt)|0,m=m+Math.imul(At,Ft)|0,p=p+Math.imul(Mt,Dt)|0,a=a+Math.imul(Mt,Kt)|0,a=a+Math.imul(St,Dt)|0,m=m+Math.imul(St,Kt)|0,p=p+Math.imul(xt,qt)|0,a=a+Math.imul(xt,Pt)|0,a=a+Math.imul(Et,qt)|0,m=m+Math.imul(Et,Pt)|0,p=p+Math.imul(vt,$t)|0,a=a+Math.imul(vt,Zt)|0,a=a+Math.imul(bt,$t)|0,m=m+Math.imul(bt,Zt)|0,p=p+Math.imul(yt,Vt)|0,a=a+Math.imul(yt,jt)|0,a=a+Math.imul(wt,Vt)|0,m=m+Math.imul(wt,jt)|0,p=p+Math.imul(gt,Yt)|0,a=a+Math.imul(gt,Gt)|0,a=a+Math.imul(mt,Yt)|0,m=m+Math.imul(mt,Gt)|0;var gr=(v+p|0)+((a&8191)<<13)|0;v=(m+(a>>>13)|0)+(gr>>>26)|0,gr&=67108863,p=Math.imul(It,zt),a=Math.imul(It,Ft),a=a+Math.imul(_t,zt)|0,m=Math.imul(_t,Ft),p=p+Math.imul(Bt,Dt)|0,a=a+Math.imul(Bt,Kt)|0,a=a+Math.imul(At,Dt)|0,m=m+Math.imul(At,Kt)|0,p=p+Math.imul(Mt,qt)|0,a=a+Math.imul(Mt,Pt)|0,a=a+Math.imul(St,qt)|0,m=m+Math.imul(St,Pt)|0,p=p+Math.imul(xt,$t)|0,a=a+Math.imul(xt,Zt)|0,a=a+Math.imul(Et,$t)|0,m=m+Math.imul(Et,Zt)|0,p=p+Math.imul(vt,Vt)|0,a=a+Math.imul(vt,jt)|0,a=a+Math.imul(bt,Vt)|0,m=m+Math.imul(bt,jt)|0,p=p+Math.imul(yt,Yt)|0,a=a+Math.imul(yt,Gt)|0,a=a+Math.imul(wt,Yt)|0,m=m+Math.imul(wt,Gt)|0;var mr=(v+p|0)+((a&8191)<<13)|0;v=(m+(a>>>13)|0)+(mr>>>26)|0,mr&=67108863,p=Math.imul(It,Dt),a=Math.imul(It,Kt),a=a+Math.imul(_t,Dt)|0,m=Math.imul(_t,Kt),p=p+Math.imul(Bt,qt)|0,a=a+Math.imul(Bt,Pt)|0,a=a+Math.imul(At,qt)|0,m=m+Math.imul(At,Pt)|0,p=p+Math.imul(Mt,$t)|0,a=a+Math.imul(Mt,Zt)|0,a=a+Math.imul(St,$t)|0,m=m+Math.imul(St,Zt)|0,p=p+Math.imul(xt,Vt)|0,a=a+Math.imul(xt,jt)|0,a=a+Math.imul(Et,Vt)|0,m=m+Math.imul(Et,jt)|0,p=p+Math.imul(vt,Yt)|0,a=a+Math.imul(vt,Gt)|0,a=a+Math.imul(bt,Yt)|0,m=m+Math.imul(bt,Gt)|0;var yr=(v+p|0)+((a&8191)<<13)|0;v=(m+(a>>>13)|0)+(yr>>>26)|0,yr&=67108863,p=Math.imul(It,qt),a=Math.imul(It,Pt),a=a+Math.imul(_t,qt)|0,m=Math.imul(_t,Pt),p=p+Math.imul(Bt,$t)|0,a=a+Math.imul(Bt,Zt)|0,a=a+Math.imul(At,$t)|0,m=m+Math.imul(At,Zt)|0,p=p+Math.imul(Mt,Vt)|0,a=a+Math.imul(Mt,jt)|0,a=a+Math.imul(St,Vt)|0,m=m+Math.imul(St,jt)|0,p=p+Math.imul(xt,Yt)|0,a=a+Math.imul(xt,Gt)|0,a=a+Math.imul(Et,Yt)|0,m=m+Math.imul(Et,Gt)|0;var wr=(v+p|0)+((a&8191)<<13)|0;v=(m+(a>>>13)|0)+(wr>>>26)|0,wr&=67108863,p=Math.imul(It,$t),a=Math.imul(It,Zt),a=a+Math.imul(_t,$t)|0,m=Math.imul(_t,Zt),p=p+Math.imul(Bt,Vt)|0,a=a+Math.imul(Bt,jt)|0,a=a+Math.imul(At,Vt)|0,m=m+Math.imul(At,jt)|0,p=p+Math.imul(Mt,Yt)|0,a=a+Math.imul(Mt,Gt)|0,a=a+Math.imul(St,Yt)|0,m=m+Math.imul(St,Gt)|0;var vr=(v+p|0)+((a&8191)<<13)|0;v=(m+(a>>>13)|0)+(vr>>>26)|0,vr&=67108863,p=Math.imul(It,Vt),a=Math.imul(It,jt),a=a+Math.imul(_t,Vt)|0,m=Math.imul(_t,jt),p=p+Math.imul(Bt,Yt)|0,a=a+Math.imul(Bt,Gt)|0,a=a+Math.imul(At,Yt)|0,m=m+Math.imul(At,Gt)|0;var br=(v+p|0)+((a&8191)<<13)|0;v=(m+(a>>>13)|0)+(br>>>26)|0,br&=67108863,p=Math.imul(It,Yt),a=Math.imul(It,Gt),a=a+Math.imul(_t,Yt)|0,m=Math.imul(_t,Gt);var xr=(v+p|0)+((a&8191)<<13)|0;return v=(m+(a>>>13)|0)+(xr>>>26)|0,xr&=67108863,y[0]=rr,y[1]=ir,y[2]=or,y[3]=sr,y[4]=ar,y[5]=cr,y[6]=ur,y[7]=fr,y[8]=hr,y[9]=lr,y[10]=dr,y[11]=pr,y[12]=gr,y[13]=mr,y[14]=yr,y[15]=wr,y[16]=vr,y[17]=br,y[18]=xr,v!==0&&(y[19]=v,f.length++),f};Math.imul||(N=I);function T(h,o,c){c.negative=o.negative^h.negative,c.length=h.length+o.length;for(var f=0,l=0,g=0;g<c.length-1;g++){var y=l;l=0;for(var v=f&67108863,p=Math.min(g,o.length-1),a=Math.max(0,g-h.length+1);a<=p;a++){var m=g-a,z=h.words[m]|0,L=o.words[a]|0,K=z*L,et=K&67108863;y=y+(K/67108864|0)|0,et=et+v|0,v=et&67108863,y=y+(et>>>26)|0,l+=y>>>26,y&=67108863}c.words[g]=v,f=y,y=l}return f!==0?c.words[g]=f:c.length--,c._strip()}function V(h,o,c){return T(h,o,c)}i.prototype.mulTo=function(o,c){var f,l=this.length+o.length;return this.length===10&&o.length===10?f=N(this,o,c):l<63?f=I(this,o,c):l<1024?f=T(this,o,c):f=V(this,o,c),f},i.prototype.mul=function(o){var c=new i(null);return c.words=new Array(this.length+o.length),this.mulTo(o,c)},i.prototype.mulf=function(o){var c=new i(null);return c.words=new Array(this.length+o.length),V(this,o,c)},i.prototype.imul=function(o){return this.clone().mulTo(o,this)},i.prototype.imuln=function(o){var c=o<0;c&&(o=-o),r(typeof o=="number"),r(o<67108864);for(var f=0,l=0;l<this.length;l++){var g=(this.words[l]|0)*o,y=(g&67108863)+(f&67108863);f>>=26,f+=g/67108864|0,f+=y>>>26,this.words[l]=y&67108863}return f!==0&&(this.words[l]=f,this.length++),this.length=o===0?1:this.length,c?this.ineg():this},i.prototype.muln=function(o){return this.clone().imuln(o)},i.prototype.sqr=function(){return this.mul(this)},i.prototype.isqr=function(){return this.imul(this.clone())},i.prototype.pow=function(o){var c=C(o);if(c.length===0)return new i(1);for(var f=this,l=0;l<c.length&&c[l]===0;l++,f=f.sqr());if(++l<c.length)for(var g=f.sqr();l<c.length;l++,g=g.sqr())c[l]!==0&&(f=f.mul(g));return f},i.prototype.iushln=function(o){r(typeof o=="number"&&o>=0);var c=o%26,f=(o-c)/26,l=67108863>>>26-c<<26-c,g;if(c!==0){var y=0;for(g=0;g<this.length;g++){var v=this.words[g]&l,p=(this.words[g]|0)-v<<c;this.words[g]=p|y,y=v>>>26-c}y&&(this.words[g]=y,this.length++)}if(f!==0){for(g=this.length-1;g>=0;g--)this.words[g+f]=this.words[g];for(g=0;g<f;g++)this.words[g]=0;this.length+=f}return this._strip()},i.prototype.ishln=function(o){return r(this.negative===0),this.iushln(o)},i.prototype.iushrn=function(o,c,f){r(typeof o=="number"&&o>=0);var l;c?l=(c-c%26)/26:l=0;var g=o%26,y=Math.min((o-g)/26,this.length),v=67108863^67108863>>>g<<g,p=f;if(l-=y,l=Math.max(0,l),p){for(var a=0;a<y;a++)p.words[a]=this.words[a];p.length=y}if(y!==0)if(this.length>y)for(this.length-=y,a=0;a<this.length;a++)this.words[a]=this.words[a+y];else this.words[0]=0,this.length=1;var m=0;for(a=this.length-1;a>=0&&(m!==0||a>=l);a--){var z=this.words[a]|0;this.words[a]=m<<26-g|z>>>g,m=z&v}return p&&m!==0&&(p.words[p.length++]=m),this.length===0&&(this.words[0]=0,this.length=1),this._strip()},i.prototype.ishrn=function(o,c,f){return r(this.negative===0),this.iushrn(o,c,f)},i.prototype.shln=function(o){return this.clone().ishln(o)},i.prototype.ushln=function(o){return this.clone().iushln(o)},i.prototype.shrn=function(o){return this.clone().ishrn(o)},i.prototype.ushrn=function(o){return this.clone().iushrn(o)},i.prototype.testn=function(o){r(typeof o=="number"&&o>=0);var c=o%26,f=(o-c)/26,l=1<<c;if(this.length<=f)return!1;var g=this.words[f];return!!(g&l)},i.prototype.imaskn=function(o){r(typeof o=="number"&&o>=0);var c=o%26,f=(o-c)/26;if(r(this.negative===0,"imaskn works only with positive numbers"),this.length<=f)return this;if(c!==0&&f++,this.length=Math.min(f,this.length),c!==0){var l=67108863^67108863>>>c<<c;this.words[this.length-1]&=l}return this._strip()},i.prototype.maskn=function(o){return this.clone().imaskn(o)},i.prototype.iaddn=function(o){return r(typeof o=="number"),r(o<67108864),o<0?this.isubn(-o):this.negative!==0?this.length===1&&(this.words[0]|0)<=o?(this.words[0]=o-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(o),this.negative=1,this):this._iaddn(o)},i.prototype._iaddn=function(o){this.words[0]+=o;for(var c=0;c<this.length&&this.words[c]>=67108864;c++)this.words[c]-=67108864,c===this.length-1?this.words[c+1]=1:this.words[c+1]++;return this.length=Math.max(this.length,c+1),this},i.prototype.isubn=function(o){if(r(typeof o=="number"),r(o<67108864),o<0)return this.iaddn(-o);if(this.negative!==0)return this.negative=0,this.iaddn(o),this.negative=1,this;if(this.words[0]-=o,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var c=0;c<this.length&&this.words[c]<0;c++)this.words[c]+=67108864,this.words[c+1]-=1;return this._strip()},i.prototype.addn=function(o){return this.clone().iaddn(o)},i.prototype.subn=function(o){return this.clone().isubn(o)},i.prototype.iabs=function(){return this.negative=0,this},i.prototype.abs=function(){return this.clone().iabs()},i.prototype._ishlnsubmul=function(o,c,f){var l=o.length+f,g;this._expand(l);var y,v=0;for(g=0;g<o.length;g++){y=(this.words[g+f]|0)+v;var p=(o.words[g]|0)*c;y-=p&67108863,v=(y>>26)-(p/67108864|0),this.words[g+f]=y&67108863}for(;g<this.length-f;g++)y=(this.words[g+f]|0)+v,v=y>>26,this.words[g+f]=y&67108863;if(v===0)return this._strip();for(r(v===-1),v=0,g=0;g<this.length;g++)y=-(this.words[g]|0)+v,v=y>>26,this.words[g]=y&67108863;return this.negative=1,this._strip()},i.prototype._wordDiv=function(o,c){var f=this.length-o.length,l=this.clone(),g=o,y=g.words[g.length-1]|0,v=this._countBits(y);f=26-v,f!==0&&(g=g.ushln(f),l.iushln(f),y=g.words[g.length-1]|0);var p=l.length-g.length,a;if(c!=="mod"){a=new i(null),a.length=p+1,a.words=new Array(a.length);for(var m=0;m<a.length;m++)a.words[m]=0}var z=l.clone()._ishlnsubmul(g,1,p);z.negative===0&&(l=z,a&&(a.words[p]=1));for(var L=p-1;L>=0;L--){var K=(l.words[g.length+L]|0)*67108864+(l.words[g.length+L-1]|0);for(K=Math.min(K/y|0,67108863),l._ishlnsubmul(g,K,L);l.negative!==0;)K--,l.negative=0,l._ishlnsubmul(g,1,L),l.isZero()||(l.negative^=1);a&&(a.words[L]=K)}return a&&a._strip(),l._strip(),c!=="div"&&f!==0&&l.iushrn(f),{div:a||null,mod:l}},i.prototype.divmod=function(o,c,f){if(r(!o.isZero()),this.isZero())return{div:new i(0),mod:new i(0)};var l,g,y;return this.negative!==0&&o.negative===0?(y=this.neg().divmod(o,c),c!=="mod"&&(l=y.div.neg()),c!=="div"&&(g=y.mod.neg(),f&&g.negative!==0&&g.iadd(o)),{div:l,mod:g}):this.negative===0&&o.negative!==0?(y=this.divmod(o.neg(),c),c!=="mod"&&(l=y.div.neg()),{div:l,mod:y.mod}):this.negative&o.negative?(y=this.neg().divmod(o.neg(),c),c!=="div"&&(g=y.mod.neg(),f&&g.negative!==0&&g.isub(o)),{div:y.div,mod:g}):o.length>this.length||this.cmp(o)<0?{div:new i(0),mod:this}:o.length===1?c==="div"?{div:this.divn(o.words[0]),mod:null}:c==="mod"?{div:null,mod:new i(this.modrn(o.words[0]))}:{div:this.divn(o.words[0]),mod:new i(this.modrn(o.words[0]))}:this._wordDiv(o,c)},i.prototype.div=function(o){return this.divmod(o,"div",!1).div},i.prototype.mod=function(o){return this.divmod(o,"mod",!1).mod},i.prototype.umod=function(o){return this.divmod(o,"mod",!0).mod},i.prototype.divRound=function(o){var c=this.divmod(o);if(c.mod.isZero())return c.div;var f=c.div.negative!==0?c.mod.isub(o):c.mod,l=o.ushrn(1),g=o.andln(1),y=f.cmp(l);return y<0||g===1&&y===0?c.div:c.div.negative!==0?c.div.isubn(1):c.div.iaddn(1)},i.prototype.modrn=function(o){var c=o<0;c&&(o=-o),r(o<=67108863);for(var f=(1<<26)%o,l=0,g=this.length-1;g>=0;g--)l=(f*l+(this.words[g]|0))%o;return c?-l:l},i.prototype.modn=function(o){return this.modrn(o)},i.prototype.idivn=function(o){var c=o<0;c&&(o=-o),r(o<=67108863);for(var f=0,l=this.length-1;l>=0;l--){var g=(this.words[l]|0)+f*67108864;this.words[l]=g/o|0,f=g%o}return this._strip(),c?this.ineg():this},i.prototype.divn=function(o){return this.clone().idivn(o)},i.prototype.egcd=function(o){r(o.negative===0),r(!o.isZero());var c=this,f=o.clone();c.negative!==0?c=c.umod(o):c=c.clone();for(var l=new i(1),g=new i(0),y=new i(0),v=new i(1),p=0;c.isEven()&&f.isEven();)c.iushrn(1),f.iushrn(1),++p;for(var a=f.clone(),m=c.clone();!c.isZero();){for(var z=0,L=1;!(c.words[0]&L)&&z<26;++z,L<<=1);if(z>0)for(c.iushrn(z);z-- >0;)(l.isOdd()||g.isOdd())&&(l.iadd(a),g.isub(m)),l.iushrn(1),g.iushrn(1);for(var K=0,et=1;!(f.words[0]&et)&&K<26;++K,et<<=1);if(K>0)for(f.iushrn(K);K-- >0;)(y.isOdd()||v.isOdd())&&(y.iadd(a),v.isub(m)),y.iushrn(1),v.iushrn(1);c.cmp(f)>=0?(c.isub(f),l.isub(y),g.isub(v)):(f.isub(c),y.isub(l),v.isub(g))}return{a:y,b:v,gcd:f.iushln(p)}},i.prototype._invmp=function(o){r(o.negative===0),r(!o.isZero());var c=this,f=o.clone();c.negative!==0?c=c.umod(o):c=c.clone();for(var l=new i(1),g=new i(0),y=f.clone();c.cmpn(1)>0&&f.cmpn(1)>0;){for(var v=0,p=1;!(c.words[0]&p)&&v<26;++v,p<<=1);if(v>0)for(c.iushrn(v);v-- >0;)l.isOdd()&&l.iadd(y),l.iushrn(1);for(var a=0,m=1;!(f.words[0]&m)&&a<26;++a,m<<=1);if(a>0)for(f.iushrn(a);a-- >0;)g.isOdd()&&g.iadd(y),g.iushrn(1);c.cmp(f)>=0?(c.isub(f),l.isub(g)):(f.isub(c),g.isub(l))}var z;return c.cmpn(1)===0?z=l:z=g,z.cmpn(0)<0&&z.iadd(o),z},i.prototype.gcd=function(o){if(this.isZero())return o.abs();if(o.isZero())return this.abs();var c=this.clone(),f=o.clone();c.negative=0,f.negative=0;for(var l=0;c.isEven()&&f.isEven();l++)c.iushrn(1),f.iushrn(1);do{for(;c.isEven();)c.iushrn(1);for(;f.isEven();)f.iushrn(1);var g=c.cmp(f);if(g<0){var y=c;c=f,f=y}else if(g===0||f.cmpn(1)===0)break;c.isub(f)}while(!0);return f.iushln(l)},i.prototype.invm=function(o){return this.egcd(o).a.umod(o)},i.prototype.isEven=function(){return(this.words[0]&1)===0},i.prototype.isOdd=function(){return(this.words[0]&1)===1},i.prototype.andln=function(o){return this.words[0]&o},i.prototype.bincn=function(o){r(typeof o=="number");var c=o%26,f=(o-c)/26,l=1<<c;if(this.length<=f)return this._expand(f+1),this.words[f]|=l,this;for(var g=l,y=f;g!==0&&y<this.length;y++){var v=this.words[y]|0;v+=g,g=v>>>26,v&=67108863,this.words[y]=v}return g!==0&&(this.words[y]=g,this.length++),this},i.prototype.isZero=function(){return this.length===1&&this.words[0]===0},i.prototype.cmpn=function(o){var c=o<0;if(this.negative!==0&&!c)return-1;if(this.negative===0&&c)return 1;this._strip();var f;if(this.length>1)f=1;else{c&&(o=-o),r(o<=67108863,"Number is too big");var l=this.words[0]|0;f=l===o?0:l<o?-1:1}return this.negative!==0?-f|0:f},i.prototype.cmp=function(o){if(this.negative!==0&&o.negative===0)return-1;if(this.negative===0&&o.negative!==0)return 1;var c=this.ucmp(o);return this.negative!==0?-c|0:c},i.prototype.ucmp=function(o){if(this.length>o.length)return 1;if(this.length<o.length)return-1;for(var c=0,f=this.length-1;f>=0;f--){var l=this.words[f]|0,g=o.words[f]|0;if(l!==g){l<g?c=-1:l>g&&(c=1);break}}return c},i.prototype.gtn=function(o){return this.cmpn(o)===1},i.prototype.gt=function(o){return this.cmp(o)===1},i.prototype.gten=function(o){return this.cmpn(o)>=0},i.prototype.gte=function(o){return this.cmp(o)>=0},i.prototype.ltn=function(o){return this.cmpn(o)===-1},i.prototype.lt=function(o){return this.cmp(o)===-1},i.prototype.lten=function(o){return this.cmpn(o)<=0},i.prototype.lte=function(o){return this.cmp(o)<=0},i.prototype.eqn=function(o){return this.cmpn(o)===0},i.prototype.eq=function(o){return this.cmp(o)===0},i.red=function(o){return new q(o)},i.prototype.toRed=function(o){return r(!this.red,"Already a number in reduction context"),r(this.negative===0,"red works only with positives"),o.convertTo(this)._forceRed(o)},i.prototype.fromRed=function(){return r(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},i.prototype._forceRed=function(o){return this.red=o,this},i.prototype.forceRed=function(o){return r(!this.red,"Already a number in reduction context"),this._forceRed(o)},i.prototype.redAdd=function(o){return r(this.red,"redAdd works only with red numbers"),this.red.add(this,o)},i.prototype.redIAdd=function(o){return r(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,o)},i.prototype.redSub=function(o){return r(this.red,"redSub works only with red numbers"),this.red.sub(this,o)},i.prototype.redISub=function(o){return r(this.red,"redISub works only with red numbers"),this.red.isub(this,o)},i.prototype.redShl=function(o){return r(this.red,"redShl works only with red numbers"),this.red.shl(this,o)},i.prototype.redMul=function(o){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,o),this.red.mul(this,o)},i.prototype.redIMul=function(o){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,o),this.red.imul(this,o)},i.prototype.redSqr=function(){return r(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},i.prototype.redISqr=function(){return r(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},i.prototype.redSqrt=function(){return r(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},i.prototype.redInvm=function(){return r(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},i.prototype.redNeg=function(){return r(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},i.prototype.redPow=function(o){return r(this.red&&!o.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,o)};var X={k256:null,p224:null,p192:null,p25519:null};function G(h,o){this.name=h,this.p=new i(o,16),this.n=this.p.bitLength(),this.k=new i(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}G.prototype._tmp=function(){var o=new i(null);return o.words=new Array(Math.ceil(this.n/13)),o},G.prototype.ireduce=function(o){var c=o,f;do this.split(c,this.tmp),c=this.imulK(c),c=c.iadd(this.tmp),f=c.bitLength();while(f>this.n);var l=f<this.n?-1:c.ucmp(this.p);return l===0?(c.words[0]=0,c.length=1):l>0?c.isub(this.p):c.strip!==void 0?c.strip():c._strip(),c},G.prototype.split=function(o,c){o.iushrn(this.n,0,c)},G.prototype.imulK=function(o){return o.imul(this.k)};function J(){G.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}s(J,G),J.prototype.split=function(o,c){for(var f=4194303,l=Math.min(o.length,9),g=0;g<l;g++)c.words[g]=o.words[g];if(c.length=l,o.length<=9){o.words[0]=0,o.length=1;return}var y=o.words[9];for(c.words[c.length++]=y&f,g=10;g<o.length;g++){var v=o.words[g]|0;o.words[g-10]=(v&f)<<4|y>>>22,y=v}y>>>=22,o.words[g-10]=y,y===0&&o.length>10?o.length-=10:o.length-=9},J.prototype.imulK=function(o){o.words[o.length]=0,o.words[o.length+1]=0,o.length+=2;for(var c=0,f=0;f<o.length;f++){var l=o.words[f]|0;c+=l*977,o.words[f]=c&67108863,c=l*64+(c/67108864|0)}return o.words[o.length-1]===0&&(o.length--,o.words[o.length-1]===0&&o.length--),o};function tt(){G.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}s(tt,G);function k(){G.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}s(k,G);function Z(){G.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}s(Z,G),Z.prototype.imulK=function(o){for(var c=0,f=0;f<o.length;f++){var l=(o.words[f]|0)*19+c,g=l&67108863;l>>>=26,o.words[f]=g,c=l}return c!==0&&(o.words[o.length++]=c),o},i._prime=function(o){if(X[o])return X[o];var c;if(o==="k256")c=new J;else if(o==="p224")c=new tt;else if(o==="p192")c=new k;else if(o==="p25519")c=new Z;else throw new Error("Unknown prime "+o);return X[o]=c,c};function q(h){if(typeof h=="string"){var o=i._prime(h);this.m=o.p,this.prime=o}else r(h.gtn(1),"modulus must be greater than 1"),this.m=h,this.prime=null}q.prototype._verify1=function(o){r(o.negative===0,"red works only with positives"),r(o.red,"red works only with red numbers")},q.prototype._verify2=function(o,c){r((o.negative|c.negative)===0,"red works only with positives"),r(o.red&&o.red===c.red,"red works only with red numbers")},q.prototype.imod=function(o){return this.prime?this.prime.ireduce(o)._forceRed(this):(B(o,o.umod(this.m)._forceRed(this)),o)},q.prototype.neg=function(o){return o.isZero()?o.clone():this.m.sub(o)._forceRed(this)},q.prototype.add=function(o,c){this._verify2(o,c);var f=o.add(c);return f.cmp(this.m)>=0&&f.isub(this.m),f._forceRed(this)},q.prototype.iadd=function(o,c){this._verify2(o,c);var f=o.iadd(c);return f.cmp(this.m)>=0&&f.isub(this.m),f},q.prototype.sub=function(o,c){this._verify2(o,c);var f=o.sub(c);return f.cmpn(0)<0&&f.iadd(this.m),f._forceRed(this)},q.prototype.isub=function(o,c){this._verify2(o,c);var f=o.isub(c);return f.cmpn(0)<0&&f.iadd(this.m),f},q.prototype.shl=function(o,c){return this._verify1(o),this.imod(o.ushln(c))},q.prototype.imul=function(o,c){return this._verify2(o,c),this.imod(o.imul(c))},q.prototype.mul=function(o,c){return this._verify2(o,c),this.imod(o.mul(c))},q.prototype.isqr=function(o){return this.imul(o,o.clone())},q.prototype.sqr=function(o){return this.mul(o,o)},q.prototype.sqrt=function(o){if(o.isZero())return o.clone();var c=this.m.andln(3);if(r(c%2===1),c===3){var f=this.m.add(new i(1)).iushrn(2);return this.pow(o,f)}for(var l=this.m.subn(1),g=0;!l.isZero()&&l.andln(1)===0;)g++,l.iushrn(1);r(!l.isZero());var y=new i(1).toRed(this),v=y.redNeg(),p=this.m.subn(1).iushrn(1),a=this.m.bitLength();for(a=new i(2*a*a).toRed(this);this.pow(a,p).cmp(v)!==0;)a.redIAdd(v);for(var m=this.pow(a,l),z=this.pow(o,l.addn(1).iushrn(1)),L=this.pow(o,l),K=g;L.cmp(y)!==0;){for(var et=L,Q=0;et.cmp(y)!==0;Q++)et=et.redSqr();r(Q<K);var H=this.pow(m,new i(1).iushln(K-Q-1));z=z.redMul(H),m=H.redSqr(),L=L.redMul(m),K=Q}return z},q.prototype.invm=function(o){var c=o._invmp(this.m);return c.negative!==0?(c.negative=0,this.imod(c).redNeg()):this.imod(c)},q.prototype.pow=function(o,c){if(c.isZero())return new i(1).toRed(this);if(c.cmpn(1)===0)return o.clone();var f=4,l=new Array(1<<f);l[0]=new i(1).toRed(this),l[1]=o;for(var g=2;g<l.length;g++)l[g]=this.mul(l[g-1],o);var y=l[0],v=0,p=0,a=c.bitLength()%26;for(a===0&&(a=26),g=c.length-1;g>=0;g--){for(var m=c.words[g],z=a-1;z>=0;z--){var L=m>>z&1;if(y!==l[0]&&(y=this.sqr(y)),L===0&&v===0){p=0;continue}v<<=1,v|=L,p++,!(p!==f&&(g!==0||z!==0))&&(y=this.mul(y,l[v]),p=0,v=0)}a=26}return y},q.prototype.convertTo=function(o){var c=o.umod(this.m);return c===o?c.clone():c},q.prototype.convertFrom=function(o){var c=o.clone();return c.red=null,c},i.mont=function(o){return new P(o)};function P(h){q.call(this,h),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new i(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}s(P,q),P.prototype.convertTo=function(o){return this.imod(o.ushln(this.shift))},P.prototype.convertFrom=function(o){var c=this.imod(o.mul(this.rinv));return c.red=null,c},P.prototype.imul=function(o,c){if(o.isZero()||c.isZero())return o.words[0]=0,o.length=1,o;var f=o.imul(c),l=f.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),g=f.isub(l).iushrn(this.shift),y=g;return g.cmp(this.m)>=0?y=g.isub(this.m):g.cmpn(0)<0&&(y=g.iadd(this.m)),y._forceRed(this)},P.prototype.mul=function(o,c){if(o.isZero()||c.isZero())return new i(0)._forceRed(this);var f=o.mul(c),l=f.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),g=f.isub(l).iushrn(this.shift),y=g;return g.cmp(this.m)>=0?y=g.isub(this.m):g.cmpn(0)<0&&(y=g.iadd(this.m)),y._forceRed(this)},P.prototype.invm=function(o){var c=this.imod(o._invmp(this.m).mul(this.r2));return c._forceRed(this)}})(n,ve)})(Gr);var no=Gr.exports;const Ni=to(no);var zi,Br,Ar=0,Ir=0;function na(n,t,e){var r=t&&e||0,s=t||new Array(16);n=n||{};var i=n.node||zi,u=n.clockseq!==void 0?n.clockseq:Br;if(i==null||u==null){var w=n.random||(n.rng||Rs)();i==null&&(i=zi=[w[0]|1,w[1],w[2],w[3],w[4],w[5]]),u==null&&(u=Br=(w[6]<<8|w[7])&16383)}var d=n.msecs!==void 0?n.msecs:Date.now(),b=n.nsecs!==void 0?n.nsecs:Ir+1,B=d-Ar+(b-Ir)/1e4;if(B<0&&n.clockseq===void 0&&(u=u+1&16383),(B<0||d>Ar)&&n.nsecs===void 0&&(b=0),b>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");Ar=d,Ir=b,Br=u,d+=122192928e5;var R=((d&268435455)*1e4+b)%4294967296;s[r++]=R>>>24&255,s[r++]=R>>>16&255,s[r++]=R>>>8&255,s[r++]=R&255;var M=d/4294967296*1e4&268435455;s[r++]=M>>>8&255,s[r++]=M&255,s[r++]=M>>>24&15|16,s[r++]=M>>>16&255,s[r++]=u>>>8|128,s[r++]=u&255;for(var S=0;S<6;++S)s[r+S]=i[S];return t||Vr(s)}function ro(n){if(!jr(n))throw TypeError("Invalid UUID");var t,e=new Uint8Array(16);return e[0]=(t=parseInt(n.slice(0,8),16))>>>24,e[1]=t>>>16&255,e[2]=t>>>8&255,e[3]=t&255,e[4]=(t=parseInt(n.slice(9,13),16))>>>8,e[5]=t&255,e[6]=(t=parseInt(n.slice(14,18),16))>>>8,e[7]=t&255,e[8]=(t=parseInt(n.slice(19,23),16))>>>8,e[9]=t&255,e[10]=(t=parseInt(n.slice(24,36),16))/1099511627776&255,e[11]=t/4294967296&255,e[12]=t>>>24&255,e[13]=t>>>16&255,e[14]=t>>>8&255,e[15]=t&255,e}function ra(n){n=unescape(encodeURIComponent(n));for(var t=[],e=0;e<n.length;++e)t.push(n.charCodeAt(e));return t}var ia="6ba7b810-9dad-11d1-80b4-00c04fd430c8",oa="6ba7b811-9dad-11d1-80b4-00c04fd430c8";function io(n,t,e){function r(s,i,u,w){if(typeof s=="string"&&(s=ra(s)),typeof i=="string"&&(i=ro(i)),i.length!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");var d=new Uint8Array(16+s.length);if(d.set(i),d.set(s,i.length),d=e(d),d[6]=d[6]&15|t,d[8]=d[8]&63|128,u){w=w||0;for(var b=0;b<16;++b)u[w+b]=d[b];return u}return Vr(d)}try{r.name=n}catch{}return r.DNS=ia,r.URL=oa,r}function sa(n){if(typeof n=="string"){var t=unescape(encodeURIComponent(n));n=new Uint8Array(t.length);for(var e=0;e<t.length;++e)n[e]=t.charCodeAt(e)}return aa(ca(ua(n),n.length*8))}function aa(n){for(var t=[],e=n.length*32,r="0123456789abcdef",s=0;s<e;s+=8){var i=n[s>>5]>>>s%32&255,u=parseInt(r.charAt(i>>>4&15)+r.charAt(i&15),16);t.push(u)}return t}function oo(n){return(n+64>>>9<<4)+14+1}function ca(n,t){n[t>>5]|=128<<t%32,n[oo(t)-1]=t;for(var e=1732584193,r=-271733879,s=-1732584194,i=271733878,u=0;u<n.length;u+=16){var w=e,d=r,b=s,B=i;e=ee(e,r,s,i,n[u],7,-680876936),i=ee(i,e,r,s,n[u+1],12,-389564586),s=ee(s,i,e,r,n[u+2],17,606105819),r=ee(r,s,i,e,n[u+3],22,-1044525330),e=ee(e,r,s,i,n[u+4],7,-176418897),i=ee(i,e,r,s,n[u+5],12,1200080426),s=ee(s,i,e,r,n[u+6],17,-1473231341),r=ee(r,s,i,e,n[u+7],22,-45705983),e=ee(e,r,s,i,n[u+8],7,1770035416),i=ee(i,e,r,s,n[u+9],12,-1958414417),s=ee(s,i,e,r,n[u+10],17,-42063),r=ee(r,s,i,e,n[u+11],22,-1990404162),e=ee(e,r,s,i,n[u+12],7,1804603682),i=ee(i,e,r,s,n[u+13],12,-40341101),s=ee(s,i,e,r,n[u+14],17,-1502002290),r=ee(r,s,i,e,n[u+15],22,1236535329),e=ne(e,r,s,i,n[u+1],5,-165796510),i=ne(i,e,r,s,n[u+6],9,-1069501632),s=ne(s,i,e,r,n[u+11],14,643717713),r=ne(r,s,i,e,n[u],20,-373897302),e=ne(e,r,s,i,n[u+5],5,-701558691),i=ne(i,e,r,s,n[u+10],9,38016083),s=ne(s,i,e,r,n[u+15],14,-660478335),r=ne(r,s,i,e,n[u+4],20,-405537848),e=ne(e,r,s,i,n[u+9],5,568446438),i=ne(i,e,r,s,n[u+14],9,-1019803690),s=ne(s,i,e,r,n[u+3],14,-187363961),r=ne(r,s,i,e,n[u+8],20,1163531501),e=ne(e,r,s,i,n[u+13],5,-1444681467),i=ne(i,e,r,s,n[u+2],9,-51403784),s=ne(s,i,e,r,n[u+7],14,1735328473),r=ne(r,s,i,e,n[u+12],20,-1926607734),e=re(e,r,s,i,n[u+5],4,-378558),i=re(i,e,r,s,n[u+8],11,-2022574463),s=re(s,i,e,r,n[u+11],16,1839030562),r=re(r,s,i,e,n[u+14],23,-35309556),e=re(e,r,s,i,n[u+1],4,-1530992060),i=re(i,e,r,s,n[u+4],11,1272893353),s=re(s,i,e,r,n[u+7],16,-155497632),r=re(r,s,i,e,n[u+10],23,-1094730640),e=re(e,r,s,i,n[u+13],4,681279174),i=re(i,e,r,s,n[u],11,-358537222),s=re(s,i,e,r,n[u+3],16,-722521979),r=re(r,s,i,e,n[u+6],23,76029189),e=re(e,r,s,i,n[u+9],4,-640364487),i=re(i,e,r,s,n[u+12],11,-421815835),s=re(s,i,e,r,n[u+15],16,530742520),r=re(r,s,i,e,n[u+2],23,-995338651),e=ie(e,r,s,i,n[u],6,-198630844),i=ie(i,e,r,s,n[u+7],10,1126891415),s=ie(s,i,e,r,n[u+14],15,-1416354905),r=ie(r,s,i,e,n[u+5],21,-57434055),e=ie(e,r,s,i,n[u+12],6,1700485571),i=ie(i,e,r,s,n[u+3],10,-1894986606),s=ie(s,i,e,r,n[u+10],15,-1051523),r=ie(r,s,i,e,n[u+1],21,-2054922799),e=ie(e,r,s,i,n[u+8],6,1873313359),i=ie(i,e,r,s,n[u+15],10,-30611744),s=ie(s,i,e,r,n[u+6],15,-1560198380),r=ie(r,s,i,e,n[u+13],21,1309151649),e=ie(e,r,s,i,n[u+4],6,-145523070),i=ie(i,e,r,s,n[u+11],10,-1120210379),s=ie(s,i,e,r,n[u+2],15,718787259),r=ie(r,s,i,e,n[u+9],21,-343485551),e=ze(e,w),r=ze(r,d),s=ze(s,b),i=ze(i,B)}return[e,r,s,i]}function ua(n){if(n.length===0)return[];for(var t=n.length*8,e=new Uint32Array(oo(t)),r=0;r<t;r+=8)e[r>>5]|=(n[r/8]&255)<<r%32;return e}function ze(n,t){var e=(n&65535)+(t&65535),r=(n>>16)+(t>>16)+(e>>16);return r<<16|e&65535}function fa(n,t){return n<<t|n>>>32-t}function Gn(n,t,e,r,s,i){return ze(fa(ze(ze(t,n),ze(r,i)),s),e)}function ee(n,t,e,r,s,i,u){return Gn(t&e|~t&r,n,t,s,i,u)}function ne(n,t,e,r,s,i,u){return Gn(t&r|e&~r,n,t,s,i,u)}function re(n,t,e,r,s,i,u){return Gn(t^e^r,n,t,s,i,u)}function ie(n,t,e,r,s,i,u){return Gn(e^(t|~r),n,t,s,i,u)}var ha=io("v3",48,sa);function la(n,t,e,r){switch(n){case 0:return t&e^~t&r;case 1:return t^e^r;case 2:return t&e^t&r^e&r;case 3:return t^e^r}}function _r(n,t){return n<<t|n>>>32-t}function da(n){var t=[1518500249,1859775393,2400959708,3395469782],e=[1732584193,4023233417,2562383102,271733878,3285377520];if(typeof n=="string"){var r=unescape(encodeURIComponent(n));n=[];for(var s=0;s<r.length;++s)n.push(r.charCodeAt(s))}else Array.isArray(n)||(n=Array.prototype.slice.call(n));n.push(128);for(var i=n.length/4+2,u=Math.ceil(i/16),w=new Array(u),d=0;d<u;++d){for(var b=new Uint32Array(16),B=0;B<16;++B)b[B]=n[d*64+B*4]<<24|n[d*64+B*4+1]<<16|n[d*64+B*4+2]<<8|n[d*64+B*4+3];w[d]=b}w[u-1][14]=(n.length-1)*8/Math.pow(2,32),w[u-1][14]=Math.floor(w[u-1][14]),w[u-1][15]=(n.length-1)*8&4294967295;for(var R=0;R<u;++R){for(var M=new Uint32Array(80),S=0;S<16;++S)M[S]=w[R][S];for(var A=16;A<80;++A)M[A]=_r(M[A-3]^M[A-8]^M[A-14]^M[A-16],1);for(var U=e[0],C=e[1],I=e[2],N=e[3],T=e[4],V=0;V<80;++V){var X=Math.floor(V/20),G=_r(U,5)+la(X,C,I,N)+T+t[X]+M[V]>>>0;T=N,N=I,I=_r(C,30)>>>0,C=U,U=G}e[0]=e[0]+U>>>0,e[1]=e[1]+C>>>0,e[2]=e[2]+I>>>0,e[3]=e[3]+N>>>0,e[4]=e[4]+T>>>0}return[e[0]>>24&255,e[0]>>16&255,e[0]>>8&255,e[0]&255,e[1]>>24&255,e[1]>>16&255,e[1]>>8&255,e[1]&255,e[2]>>24&255,e[2]>>16&255,e[2]>>8&255,e[2]&255,e[3]>>24&255,e[3]>>16&255,e[3]>>8&255,e[3]&255,e[4]>>24&255,e[4]>>16&255,e[4]>>8&255,e[4]&255]}var pa=io("v5",80,da);const ga="00000000-0000-0000-0000-000000000000";function ma(n){if(!jr(n))throw TypeError("Invalid UUID");return parseInt(n.substr(14,1),16)}const ya=Object.freeze(Object.defineProperty({__proto__:null,NIL:ga,parse:ro,stringify:Vr,v1:na,v3:ha,v4:Ts,v5:pa,validate:jr,version:ma},Symbol.toStringTag,{value:"Module"}));class wa extends Os{async init(t){}async getIdentityToken(){if(!this.provider||this.status!==Ee.CONNECTED)throw Me.notConnectedError();if(!this.coreOptions)throw Ui.invalidParams("Please initialize Web3Auth with a valid options");const t=await this.provider.request({method:Mr.GET_ACCOUNTS});if(t&&t.length>0){const e=Ls(t[0],this.name);if(e&&!Us(e))return{idToken:e};const r=await this.provider.request({method:"solana_chainId"}),s=this.coreOptions.chains.find(B=>B.chainId===r);if(!s)throw Ui.invalidParams("chainConfig is required before authentication");const{chainNamespace:i}=s,u={domain:window.location.origin,uri:window.location.href,address:t[0],chainId:parseInt(r,16),version:"1",nonce:Math.random().toString(36).slice(2),issuedAt:new Date().toISOString()},w=await Cs(u,i),d=await this.provider.request({method:Mr.SIGN_MESSAGE,params:{data:w,display:"utf8"}}),b=await Ns(i,d,w,this.name,this.coreOptions.sessionTime,this.coreOptions.clientId,this.coreOptions.web3AuthNetwork);return zs(t[0],this.name,b),{idToken:b}}throw Me.notConnectedError("Not connected with wallet, Please login/connect first")}async disconnectSession(){super.checkDisconnectionRequirements();const t=await this.provider.request({method:Mr.GET_ACCOUNTS});t&&t.length>0&&Fs(t[0],this.name)}async disconnect(){this.rehydrated=!1,this.emit(Ke.DISCONNECTED)}}var va=function(n,t,e,r){if(e==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?n!==t||!r:!t.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return e==="m"?r:e==="a"?r.call(n):r?r.value:t.get(n)},ba=function(n,t,e,r,s){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!s)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?n!==t||!s:!t.has(n))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?s.call(n,e):s?s.value=e:t.set(n,e),e},Rn;let yn;const Hn=new Set;function xa(n){wn=void 0,Hn.add(n)}function Ea(n){wn=void 0,Hn.delete(n)}const nn={};function cf(){if(yn||(yn=Object.freeze({register:Fi,get:Ma,on:Sa}),typeof window>"u"))return yn;const n=Object.freeze({register:Fi});try{window.addEventListener("wallet-standard:register-wallet",({detail:t})=>t(n))}catch(t){console.error(`wallet-standard:register-wallet event listener could not be added
`,t)}try{window.dispatchEvent(new Ba(n))}catch(t){console.error(`wallet-standard:app-ready event could not be dispatched
`,t)}return yn}function Fi(...n){var t;return n=n.filter(e=>!Hn.has(e)),n.length?(n.forEach(e=>xa(e)),(t=nn.register)==null||t.forEach(e=>Di(()=>e(...n))),function(){var r;n.forEach(s=>Ea(s)),(r=nn.unregister)==null||r.forEach(s=>Di(()=>s(...n)))}):()=>{}}let wn;function Ma(){return wn||(wn=[...Hn]),wn}function Sa(n,t){var e;return(e=nn[n])!=null&&e.push(t)||(nn[n]=[t]),function(){var s;nn[n]=(s=nn[n])==null?void 0:s.filter(i=>t!==i)}}function Di(n){try{n()}catch(t){console.error(t)}}class Ba extends Event{get detail(){return va(this,Rn,"f")}get type(){return"wallet-standard:app-ready"}constructor(t){super("wallet-standard:app-ready",{bubbles:!1,cancelable:!1,composed:!1}),Rn.set(this,void 0),ba(this,Rn,t,"f")}preventDefault(){throw new Error("preventDefault cannot be called")}stopImmediatePropagation(){throw new Error("stopImmediatePropagation cannot be called")}stopPropagation(){throw new Error("stopPropagation cannot be called")}}Rn=new WeakMap;const so="solana:signAndSendTransaction",ao="solana:signMessage",zr="solana:signTransaction",co="standard:connect",Aa="standard:disconnect";/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Hr=BigInt(0),Fr=BigInt(1);function Ge(n,t=""){if(typeof n!="boolean"){const e=t&&`"${t}"`;throw new Error(e+"expected boolean, got type="+typeof n)}return n}function ye(n,t,e=""){const r=Yn(n),s=n==null?void 0:n.length,i=t!==void 0;if(!r||i&&s!==t){const u=e&&`"${e}" `,w=i?` of length ${t}`:"",d=r?`length=${s}`:`type=${typeof n}`;throw new Error(u+"expected Uint8Array"+w+", got "+d)}return n}function In(n){const t=n.toString(16);return t.length&1?"0"+t:t}function uo(n){if(typeof n!="string")throw new Error("hex string expected, got "+typeof n);return n===""?Hr:BigInt("0x"+n)}function Wn(n){return uo(je(n))}function vn(n){return Ds(n),uo(je(Uint8Array.from(n).reverse()))}function Wr(n,t){return Ln(n.toString(16).padStart(t*2,"0"))}function fo(n,t){return Wr(n,t).reverse()}function dt(n,t,e){let r;if(typeof t=="string")try{r=Ln(t)}catch(i){throw new Error(n+" must be hex string or Uint8Array, cause: "+i)}else if(Yn(t))r=Uint8Array.from(t);else throw new Error(n+" must be hex string or Uint8Array");const s=r.length;if(typeof e=="number"&&s!==e)throw new Error(n+" of length "+e+" expected, got "+s);return r}function Ki(n){return Uint8Array.from(n)}const kr=n=>typeof n=="bigint"&&Hr<=n;function Ia(n,t,e){return kr(n)&&kr(t)&&kr(e)&&t<=n&&n<e}function Dr(n,t,e,r){if(!Ia(t,e,r))throw new Error("expected valid "+n+": "+e+" <= n < "+r+", got "+t)}function ho(n){let t;for(t=0;n>Hr;n>>=Fr,t+=1);return t}const xn=n=>(Fr<<BigInt(n))-Fr;function _a(n,t,e){if(typeof n!="number"||n<2)throw new Error("hashLen must be a number");if(typeof t!="number"||t<2)throw new Error("qByteLen must be a number");if(typeof e!="function")throw new Error("hmacFn must be a function");const r=S=>new Uint8Array(S),s=S=>Uint8Array.of(S);let i=r(n),u=r(n),w=0;const d=()=>{i.fill(1),u.fill(0),w=0},b=(...S)=>e(u,i,...S),B=(S=r(0))=>{u=b(s(0),S),i=b(),S.length!==0&&(u=b(s(1),S),i=b())},R=()=>{if(w++>=1e3)throw new Error("drbg: tried 1000 values");let S=0;const A=[];for(;S<t;){i=b();const U=i.slice();A.push(U),S+=i.length}return Be(...A)};return(S,A)=>{d(),B(S);let U;for(;!(U=A(R()));)B();return d(),U}}function En(n,t,e={}){if(!n||typeof n!="object")throw new Error("expected valid options object");function r(s,i,u){const w=n[s];if(u&&w===void 0)return;const d=typeof w;if(d!==i||w===null)throw new Error(`param "${s}" is invalid: expected ${i}, got ${d}`)}Object.entries(t).forEach(([s,i])=>r(s,i,!1)),Object.entries(e).forEach(([s,i])=>r(s,i,!0))}function Un(n){const t=new WeakMap;return(e,...r)=>{const s=t.get(e);if(s!==void 0)return s;const i=n(e,...r);return t.set(e,i),i}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const ue=BigInt(0),te=BigInt(1),$e=BigInt(2),lo=BigInt(3),po=BigInt(4),go=BigInt(5),ka=BigInt(7),mo=BigInt(8),Ra=BigInt(9),yo=BigInt(16);function Ht(n,t){const e=n%t;return e>=ue?e:t+e}function lt(n,t,e){let r=n;for(;t-- >ue;)r*=r,r%=e;return r}function qi(n,t){if(n===ue)throw new Error("invert: expected non-zero number");if(t<=ue)throw new Error("invert: expected positive modulus, got "+t);let e=Ht(n,t),r=t,s=ue,i=te;for(;e!==ue;){const w=r/e,d=r%e,b=s-i*w;r=e,e=d,s=i,i=b}if(r!==te)throw new Error("invert: does not exist");return Ht(s,t)}function Xr(n,t,e){if(!n.eql(n.sqr(t),e))throw new Error("Cannot find square root")}function wo(n,t){const e=(n.ORDER+te)/po,r=n.pow(t,e);return Xr(n,r,t),r}function Ta(n,t){const e=(n.ORDER-go)/mo,r=n.mul(t,$e),s=n.pow(r,e),i=n.mul(t,s),u=n.mul(n.mul(i,$e),s),w=n.mul(i,n.sub(u,n.ONE));return Xr(n,w,t),w}function Oa(n){const t=He(n),e=vo(n),r=e(t,t.neg(t.ONE)),s=e(t,r),i=e(t,t.neg(r)),u=(n+ka)/yo;return(w,d)=>{let b=w.pow(d,u),B=w.mul(b,r);const R=w.mul(b,s),M=w.mul(b,i),S=w.eql(w.sqr(B),d),A=w.eql(w.sqr(R),d);b=w.cmov(b,B,S),B=w.cmov(M,R,A);const U=w.eql(w.sqr(B),d),C=w.cmov(b,B,U);return Xr(w,C,d),C}}function vo(n){if(n<lo)throw new Error("sqrt is not defined for small field");let t=n-te,e=0;for(;t%$e===ue;)t/=$e,e++;let r=$e;const s=He(n);for(;Pi(s,r)===1;)if(r++>1e3)throw new Error("Cannot find square root: probably non-prime P");if(e===1)return wo;let i=s.pow(r,t);const u=(t+te)/$e;return function(d,b){if(d.is0(b))return b;if(Pi(d,b)!==1)throw new Error("Cannot find square root");let B=e,R=d.mul(d.ONE,i),M=d.pow(b,t),S=d.pow(b,u);for(;!d.eql(M,d.ONE);){if(d.is0(M))return d.ZERO;let A=1,U=d.sqr(M);for(;!d.eql(U,d.ONE);)if(A++,U=d.sqr(U),A===B)throw new Error("Cannot find square root");const C=te<<BigInt(B-A-1),I=d.pow(R,C);B=A,R=d.sqr(I),M=d.mul(M,R),S=d.mul(S,I)}return S}}function La(n){return n%po===lo?wo:n%mo===go?Ta:n%yo===Ra?Oa(n):vo(n)}const Ua=(n,t)=>(Ht(n,t)&te)===te,Ca=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function Na(n){const t={ORDER:"bigint",MASK:"bigint",BYTES:"number",BITS:"number"},e=Ca.reduce((r,s)=>(r[s]="function",r),t);return En(n,e),n}function za(n,t,e){if(e<ue)throw new Error("invalid exponent, negatives unsupported");if(e===ue)return n.ONE;if(e===te)return t;let r=n.ONE,s=t;for(;e>ue;)e&te&&(r=n.mul(r,s)),s=n.sqr(s),e>>=te;return r}function bo(n,t,e=!1){const r=new Array(t.length).fill(e?n.ZERO:void 0),s=t.reduce((u,w,d)=>n.is0(w)?u:(r[d]=u,n.mul(u,w)),n.ONE),i=n.inv(s);return t.reduceRight((u,w,d)=>n.is0(w)?u:(r[d]=n.mul(u,r[d]),n.mul(u,w)),i),r}function Pi(n,t){const e=(n.ORDER-te)/$e,r=n.pow(t,e),s=n.eql(r,n.ONE),i=n.eql(r,n.ZERO),u=n.eql(r,n.neg(n.ONE));if(!s&&!i&&!u)throw new Error("invalid Legendre symbol result");return s?1:i?0:-1}function xo(n,t){t!==void 0&&Ks(t);const e=t!==void 0?t:n.toString(2).length,r=Math.ceil(e/8);return{nBitLength:e,nByteLength:r}}function He(n,t,e=!1,r={}){if(n<=ue)throw new Error("invalid field: expected ORDER > 0, got "+n);let s,i,u=!1,w;if(typeof t=="object"&&t!=null){if(r.sqrt||e)throw new Error("cannot specify opts in two arguments");const M=t;M.BITS&&(s=M.BITS),M.sqrt&&(i=M.sqrt),typeof M.isLE=="boolean"&&(e=M.isLE),typeof M.modFromBytes=="boolean"&&(u=M.modFromBytes),w=M.allowedLengths}else typeof t=="number"&&(s=t),r.sqrt&&(i=r.sqrt);const{nBitLength:d,nByteLength:b}=xo(n,s);if(b>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let B;const R=Object.freeze({ORDER:n,isLE:e,BITS:d,BYTES:b,MASK:xn(d),ZERO:ue,ONE:te,allowedLengths:w,create:M=>Ht(M,n),isValid:M=>{if(typeof M!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof M);return ue<=M&&M<n},is0:M=>M===ue,isValidNot0:M=>!R.is0(M)&&R.isValid(M),isOdd:M=>(M&te)===te,neg:M=>Ht(-M,n),eql:(M,S)=>M===S,sqr:M=>Ht(M*M,n),add:(M,S)=>Ht(M+S,n),sub:(M,S)=>Ht(M-S,n),mul:(M,S)=>Ht(M*S,n),pow:(M,S)=>za(R,M,S),div:(M,S)=>Ht(M*qi(S,n),n),sqrN:M=>M*M,addN:(M,S)=>M+S,subN:(M,S)=>M-S,mulN:(M,S)=>M*S,inv:M=>qi(M,n),sqrt:i||(M=>(B||(B=La(n)),B(R,M))),toBytes:M=>e?fo(M,b):Wr(M,b),fromBytes:(M,S=!0)=>{if(w){if(!w.includes(M.length)||M.length>b)throw new Error("Field.fromBytes: expected "+w+" bytes, got "+M.length);const U=new Uint8Array(b);U.set(M,e?0:U.length-M.length),M=U}if(M.length!==b)throw new Error("Field.fromBytes: expected "+b+" bytes, got "+M.length);let A=e?vn(M):Wn(M);if(u&&(A=Ht(A,n)),!S&&!R.isValid(A))throw new Error("invalid field element: outside of range 0..ORDER");return A},invertBatch:M=>bo(R,M),cmov:(M,S,A)=>A?S:M});return Object.freeze(R)}function Eo(n){if(typeof n!="bigint")throw new Error("field order must be bigint");const t=n.toString(2).length;return Math.ceil(t/8)}function Mo(n){const t=Eo(n);return t+Math.ceil(t/2)}function Fa(n,t,e=!1){const r=n.length,s=Eo(t),i=Mo(t);if(r<16||r<i||r>1024)throw new Error("expected "+i+"-1024 bytes of input, got "+r);const u=e?vn(n):Wn(n),w=Ht(u,t-te)+te;return e?fo(w,s):Wr(w,s)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const un=BigInt(0),Ze=BigInt(1);function Cn(n,t){const e=t.negate();return n?e:t}function Ve(n,t){const e=bo(n.Fp,t.map(r=>r.Z));return t.map((r,s)=>n.fromAffine(r.toAffine(e[s])))}function So(n,t){if(!Number.isSafeInteger(n)||n<=0||n>t)throw new Error("invalid window size, expected [1.."+t+"], got W="+n)}function Rr(n,t){So(n,t);const e=Math.ceil(t/n)+1,r=2**(n-1),s=2**n,i=xn(n),u=BigInt(n);return{windows:e,windowSize:r,mask:i,maxNumber:s,shiftBy:u}}function $i(n,t,e){const{windowSize:r,mask:s,maxNumber:i,shiftBy:u}=e;let w=Number(n&s),d=n>>u;w>r&&(w-=i,d+=Ze);const b=t*r,B=b+Math.abs(w)-1,R=w===0,M=w<0,S=t%2!==0;return{nextN:d,offset:B,isZero:R,isNeg:M,isNegF:S,offsetF:b}}function Da(n,t){if(!Array.isArray(n))throw new Error("array expected");n.forEach((e,r)=>{if(!(e instanceof t))throw new Error("invalid point at index "+r)})}function Ka(n,t){if(!Array.isArray(n))throw new Error("array of scalars expected");n.forEach((e,r)=>{if(!t.isValid(e))throw new Error("invalid scalar at index "+r)})}const Tr=new WeakMap,Bo=new WeakMap;function Or(n){return Bo.get(n)||1}function Zi(n){if(n!==un)throw new Error("invalid wNAF")}class Ao{constructor(t,e){this.BASE=t.BASE,this.ZERO=t.ZERO,this.Fn=t.Fn,this.bits=e}_unsafeLadder(t,e,r=this.ZERO){let s=t;for(;e>un;)e&Ze&&(r=r.add(s)),s=s.double(),e>>=Ze;return r}precomputeWindow(t,e){const{windows:r,windowSize:s}=Rr(e,this.bits),i=[];let u=t,w=u;for(let d=0;d<r;d++){w=u,i.push(w);for(let b=1;b<s;b++)w=w.add(u),i.push(w);u=w.double()}return i}wNAF(t,e,r){if(!this.Fn.isValid(r))throw new Error("invalid scalar");let s=this.ZERO,i=this.BASE;const u=Rr(t,this.bits);for(let w=0;w<u.windows;w++){const{nextN:d,offset:b,isZero:B,isNeg:R,isNegF:M,offsetF:S}=$i(r,w,u);r=d,B?i=i.add(Cn(M,e[S])):s=s.add(Cn(R,e[b]))}return Zi(r),{p:s,f:i}}wNAFUnsafe(t,e,r,s=this.ZERO){const i=Rr(t,this.bits);for(let u=0;u<i.windows&&r!==un;u++){const{nextN:w,offset:d,isZero:b,isNeg:B}=$i(r,u,i);if(r=w,!b){const R=e[d];s=s.add(B?R.negate():R)}}return Zi(r),s}getPrecomputes(t,e,r){let s=Tr.get(e);return s||(s=this.precomputeWindow(e,t),t!==1&&(typeof r=="function"&&(s=r(s)),Tr.set(e,s))),s}cached(t,e,r){const s=Or(t);return this.wNAF(s,this.getPrecomputes(s,t,r),e)}unsafe(t,e,r,s){const i=Or(t);return i===1?this._unsafeLadder(t,e,s):this.wNAFUnsafe(i,this.getPrecomputes(i,t,r),e,s)}createCache(t,e){So(e,this.bits),Bo.set(t,e),Tr.delete(t)}hasCache(t){return Or(t)!==1}}function qa(n,t,e,r){let s=t,i=n.ZERO,u=n.ZERO;for(;e>un||r>un;)e&Ze&&(i=i.add(s)),r&Ze&&(u=u.add(s)),s=s.double(),e>>=Ze,r>>=Ze;return{p1:i,p2:u}}function Io(n,t,e,r){Da(e,n),Ka(r,t);const s=e.length,i=r.length;if(s!==i)throw new Error("arrays of points and scalars must have equal length");const u=n.ZERO,w=ho(BigInt(s));let d=1;w>12?d=w-3:w>4?d=w-2:w>0&&(d=2);const b=xn(d),B=new Array(Number(b)+1).fill(u),R=Math.floor((t.BITS-1)/d)*d;let M=u;for(let S=R;S>=0;S-=d){B.fill(u);for(let U=0;U<i;U++){const C=r[U],I=Number(C>>BigInt(S)&b);B[I]=B[I].add(e[U])}let A=u;for(let U=B.length-1,C=u;U>0;U--)C=C.add(B[U]),A=A.add(C);if(M=M.add(A),S!==0)for(let U=0;U<d;U++)M=M.double()}return M}function Vi(n,t,e){if(t){if(t.ORDER!==n)throw new Error("Field.ORDER must match order: Fp == p, Fn == n");return Na(t),t}else return He(n,{isLE:e})}function _o(n,t,e={},r){if(r===void 0&&(r=n==="edwards"),!t||typeof t!="object")throw new Error(`expected valid ${n} CURVE object`);for(const d of["p","n","h"]){const b=t[d];if(!(typeof b=="bigint"&&b>un))throw new Error(`CURVE.${d} must be positive bigint`)}const s=Vi(t.p,e.Fp,r),i=Vi(t.n,e.Fn,r),w=["Gx","Gy","a",n==="weierstrass"?"b":"d"];for(const d of w)if(!s.isValid(t[d]))throw new Error(`CURVE.${d} must be valid field element of CURVE.Fp`);return t=Object.freeze(Object.assign({},t)),{CURVE:t,Fp:s,Fn:i}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Ne=BigInt(0),Xt=BigInt(1),Lr=BigInt(2),Pa=BigInt(8);function $a(n,t,e,r){const s=n.sqr(e),i=n.sqr(r),u=n.add(n.mul(t.a,s),i),w=n.add(n.ONE,n.mul(t.d,n.mul(s,i)));return n.eql(u,w)}function Za(n,t={}){const e=_o("edwards",n,t,t.FpFnLE),{Fp:r,Fn:s}=e;let i=e.CURVE;const{h:u}=i;En(t,{},{uvRatio:"function"});const w=Lr<<BigInt(s.BYTES*8)-Xt,d=C=>r.create(C),b=t.uvRatio||((C,I)=>{try{return{isValid:!0,value:r.sqrt(r.div(C,I))}}catch{return{isValid:!1,value:Ne}}});if(!$a(r,i,i.Gx,i.Gy))throw new Error("bad curve params: generator point");function B(C,I,N=!1){const T=N?Xt:Ne;return Dr("coordinate "+C,I,T,w),I}function R(C){if(!(C instanceof A))throw new Error("ExtendedPoint expected")}const M=Un((C,I)=>{const{X:N,Y:T,Z:V}=C,X=C.is0();I==null&&(I=X?Pa:r.inv(V));const G=d(N*I),J=d(T*I),tt=r.mul(V,I);if(X)return{x:Ne,y:Xt};if(tt!==Xt)throw new Error("invZ was invalid");return{x:G,y:J}}),S=Un(C=>{const{a:I,d:N}=i;if(C.is0())throw new Error("bad point: ZERO");const{X:T,Y:V,Z:X,T:G}=C,J=d(T*T),tt=d(V*V),k=d(X*X),Z=d(k*k),q=d(J*I),P=d(k*d(q+tt)),h=d(Z+d(N*d(J*tt)));if(P!==h)throw new Error("bad point: equation left != right (1)");const o=d(T*V),c=d(X*G);if(o!==c)throw new Error("bad point: equation left != right (2)");return!0});class A{constructor(I,N,T,V){this.X=B("x",I),this.Y=B("y",N),this.Z=B("z",T,!0),this.T=B("t",V),Object.freeze(this)}static CURVE(){return i}static fromAffine(I){if(I instanceof A)throw new Error("extended point not allowed");const{x:N,y:T}=I||{};return B("x",N),B("y",T),new A(N,T,Xt,d(N*T))}static fromBytes(I,N=!1){const T=r.BYTES,{a:V,d:X}=i;I=Ki(ye(I,T,"point")),Ge(N,"zip215");const G=Ki(I),J=I[T-1];G[T-1]=J&-129;const tt=vn(G),k=N?w:r.ORDER;Dr("point.y",tt,Ne,k);const Z=d(tt*tt),q=d(Z-Xt),P=d(X*Z-V);let{isValid:h,value:o}=b(q,P);if(!h)throw new Error("bad point: invalid y coordinate");const c=(o&Xt)===Xt,f=(J&128)!==0;if(!N&&o===Ne&&f)throw new Error("bad point: x=0 and x_0=1");return f!==c&&(o=d(-o)),A.fromAffine({x:o,y:tt})}static fromHex(I,N=!1){return A.fromBytes(dt("point",I),N)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}precompute(I=8,N=!0){return U.createCache(this,I),N||this.multiply(Lr),this}assertValidity(){S(this)}equals(I){R(I);const{X:N,Y:T,Z:V}=this,{X,Y:G,Z:J}=I,tt=d(N*J),k=d(X*V),Z=d(T*J),q=d(G*V);return tt===k&&Z===q}is0(){return this.equals(A.ZERO)}negate(){return new A(d(-this.X),this.Y,this.Z,d(-this.T))}double(){const{a:I}=i,{X:N,Y:T,Z:V}=this,X=d(N*N),G=d(T*T),J=d(Lr*d(V*V)),tt=d(I*X),k=N+T,Z=d(d(k*k)-X-G),q=tt+G,P=q-J,h=tt-G,o=d(Z*P),c=d(q*h),f=d(Z*h),l=d(P*q);return new A(o,c,l,f)}add(I){R(I);const{a:N,d:T}=i,{X:V,Y:X,Z:G,T:J}=this,{X:tt,Y:k,Z,T:q}=I,P=d(V*tt),h=d(X*k),o=d(J*T*q),c=d(G*Z),f=d((V+X)*(tt+k)-P-h),l=c-o,g=c+o,y=d(h-N*P),v=d(f*l),p=d(g*y),a=d(f*y),m=d(l*g);return new A(v,p,m,a)}subtract(I){return this.add(I.negate())}multiply(I){if(!s.isValidNot0(I))throw new Error("invalid scalar: expected 1 <= sc < curve.n");const{p:N,f:T}=U.cached(this,I,V=>Ve(A,V));return Ve(A,[N,T])[0]}multiplyUnsafe(I,N=A.ZERO){if(!s.isValid(I))throw new Error("invalid scalar: expected 0 <= sc < curve.n");return I===Ne?A.ZERO:this.is0()||I===Xt?this:U.unsafe(this,I,T=>Ve(A,T),N)}isSmallOrder(){return this.multiplyUnsafe(u).is0()}isTorsionFree(){return U.unsafe(this,i.n).is0()}toAffine(I){return M(this,I)}clearCofactor(){return u===Xt?this:this.multiplyUnsafe(u)}toBytes(){const{x:I,y:N}=this.toAffine(),T=r.toBytes(N);return T[T.length-1]|=I&Xt?128:0,T}toHex(){return je(this.toBytes())}toString(){return`<Point ${this.is0()?"ZERO":this.toHex()}>`}get ex(){return this.X}get ey(){return this.Y}get ez(){return this.Z}get et(){return this.T}static normalizeZ(I){return Ve(A,I)}static msm(I,N){return Io(A,s,I,N)}_setWindowSize(I){this.precompute(I)}toRawBytes(){return this.toBytes()}}A.BASE=new A(i.Gx,i.Gy,Xt,d(i.Gx*i.Gy)),A.ZERO=new A(Ne,Xt,Xt,Ne),A.Fp=r,A.Fn=s;const U=new Ao(A,s.BITS);return A.BASE.precompute(8),A}function Va(n,t,e={}){if(typeof t!="function")throw new Error('"hash" function param is required');En(e,{},{adjustScalarBytes:"function",randomBytes:"function",domain:"function",prehash:"function",mapToCurve:"function"});const{prehash:r}=e,{BASE:s,Fp:i,Fn:u}=n,w=e.randomBytes||Yr,d=e.adjustScalarBytes||(k=>k),b=e.domain||((k,Z,q)=>{if(Ge(q,"phflag"),Z.length||q)throw new Error("Contexts/pre-hash are not supported");return k});function B(k){return u.create(vn(k))}function R(k){const Z=T.secretKey;k=dt("private key",k,Z);const q=dt("hashed private key",t(k),2*Z),P=d(q.slice(0,Z)),h=q.slice(Z,2*Z),o=B(P);return{head:P,prefix:h,scalar:o}}function M(k){const{head:Z,prefix:q,scalar:P}=R(k),h=s.multiply(P),o=h.toBytes();return{head:Z,prefix:q,scalar:P,point:h,pointBytes:o}}function S(k){return M(k).pointBytes}function A(k=Uint8Array.of(),...Z){const q=Be(...Z);return B(t(b(q,dt("context",k),!!r)))}function U(k,Z,q={}){k=dt("message",k),r&&(k=r(k));const{prefix:P,scalar:h,pointBytes:o}=M(Z),c=A(q.context,P,k),f=s.multiply(c).toBytes(),l=A(q.context,f,o,k),g=u.create(c+l*h);if(!u.isValid(g))throw new Error("sign failed: invalid s");const y=Be(f,u.toBytes(g));return ye(y,T.signature,"result")}const C={zip215:!0};function I(k,Z,q,P=C){const{context:h,zip215:o}=P,c=T.signature;k=dt("signature",k,c),Z=dt("message",Z),q=dt("publicKey",q,T.publicKey),o!==void 0&&Ge(o,"zip215"),r&&(Z=r(Z));const f=c/2,l=k.subarray(0,f),g=vn(k.subarray(f,c));let y,v,p;try{y=n.fromBytes(q,o),v=n.fromBytes(l,o),p=s.multiplyUnsafe(g)}catch{return!1}if(!o&&y.isSmallOrder())return!1;const a=A(h,v.toBytes(),y.toBytes(),Z);return v.add(y.multiplyUnsafe(a)).subtract(p).clearCofactor().is0()}const N=i.BYTES,T={secretKey:N,publicKey:N,signature:2*N,seed:N};function V(k=w(T.seed)){return ye(k,T.seed,"seed")}function X(k){const Z=tt.randomSecretKey(k);return{secretKey:Z,publicKey:S(Z)}}function G(k){return Yn(k)&&k.length===u.BYTES}function J(k,Z){try{return!!n.fromBytes(k,Z)}catch{return!1}}const tt={getExtendedPublicKey:M,randomSecretKey:V,isValidSecretKey:G,isValidPublicKey:J,toMontgomery(k){const{y:Z}=n.fromBytes(k),q=T.publicKey,P=q===32;if(!P&&q!==57)throw new Error("only defined for 25519 and 448");const h=P?i.div(Xt+Z,Xt-Z):i.div(Z-Xt,Z+Xt);return i.toBytes(h)},toMontgomerySecret(k){const Z=T.secretKey;ye(k,Z);const q=t(k.subarray(0,Z));return d(q).subarray(0,Z)},randomPrivateKey:V,precompute(k=8,Z=n.BASE){return Z.precompute(k,!1)}};return Object.freeze({keygen:X,getPublicKey:S,sign:U,verify:I,utils:tt,Point:n,lengths:T})}function ja(n){const t={a:n.a,d:n.d,p:n.Fp.ORDER,n:n.n,h:n.h,Gx:n.Gx,Gy:n.Gy},e=n.Fp,r=He(t.n,n.nBitLength,!0),s={Fp:e,Fn:r,uvRatio:n.uvRatio},i={randomBytes:n.randomBytes,adjustScalarBytes:n.adjustScalarBytes,domain:n.domain,prehash:n.prehash,mapToCurve:n.mapToCurve};return{CURVE:t,curveOpts:s,hash:n.hash,eddsaOpts:i}}function Ya(n,t){const e=t.Point;return Object.assign({},t,{ExtendedPoint:e,CURVE:n,nBitLength:e.Fn.BITS,nByteLength:e.Fn.BYTES})}function Ga(n){const{CURVE:t,curveOpts:e,hash:r,eddsaOpts:s}=ja(n),i=Za(t,e),u=Va(i,r,s);return Ya(n,u)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Ha=BigInt(1),ji=BigInt(2);BigInt(3);const Wa=BigInt(5),Xa=BigInt(8),Jr=BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffed"),ko={p:Jr,n:BigInt("0x1000000000000000000000000000000014def9dea2f79cd65812631a5cf5d3ed"),h:Xa,a:BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffec"),d:BigInt("0x52036cee2b6ffe738cc740797779e89800700a4d4141d8ab75eb4dca135978a3"),Gx:BigInt("0x216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a"),Gy:BigInt("0x6666666666666666666666666666666666666666666666666666666666666658")};function Ja(n){const t=BigInt(10),e=BigInt(20),r=BigInt(40),s=BigInt(80),i=Jr,w=n*n%i*n%i,d=lt(w,ji,i)*w%i,b=lt(d,Ha,i)*n%i,B=lt(b,Wa,i)*b%i,R=lt(B,t,i)*B%i,M=lt(R,e,i)*R%i,S=lt(M,r,i)*M%i,A=lt(S,s,i)*S%i,U=lt(A,s,i)*S%i,C=lt(U,t,i)*B%i;return{pow_p_5_8:lt(C,ji,i)*n%i,b2:w}}function Qa(n){return n[0]&=248,n[31]&=127,n[31]|=64,n}const Yi=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752");function tc(n,t){const e=Jr,r=Ht(t*t*t,e),s=Ht(r*r*t,e),i=Ja(n*s).pow_p_5_8;let u=Ht(n*r*i,e);const w=Ht(t*u*u,e),d=u,b=Ht(u*Yi,e),B=w===n,R=w===Ht(-n,e),M=w===Ht(-n*Yi,e);return B&&(u=d),(R||M)&&(u=b),Ua(u,e)&&(u=Ht(-u,e)),{isValid:B||R,value:u}}const ec=He(ko.p,{isLE:!0}),nc={...ko,Fp:ec,hash:qs,adjustScalarBytes:Qa,uvRatio:tc},Mn=Ga(nc);var _n=Ps.Buffer;function rc(n){if(n.length>=255)throw new TypeError("Alphabet too long");for(var t=new Uint8Array(256),e=0;e<t.length;e++)t[e]=255;for(var r=0;r<n.length;r++){var s=n.charAt(r),i=s.charCodeAt(0);if(t[i]!==255)throw new TypeError(s+" is ambiguous");t[i]=r}var u=n.length,w=n.charAt(0),d=Math.log(u)/Math.log(256),b=Math.log(256)/Math.log(u);function B(S){if((Array.isArray(S)||S instanceof Uint8Array)&&(S=_n.from(S)),!_n.isBuffer(S))throw new TypeError("Expected Buffer");if(S.length===0)return"";for(var A=0,U=0,C=0,I=S.length;C!==I&&S[C]===0;)C++,A++;for(var N=(I-C)*b+1>>>0,T=new Uint8Array(N);C!==I;){for(var V=S[C],X=0,G=N-1;(V!==0||X<U)&&G!==-1;G--,X++)V+=256*T[G]>>>0,T[G]=V%u>>>0,V=V/u>>>0;if(V!==0)throw new Error("Non-zero carry");U=X,C++}for(var J=N-U;J!==N&&T[J]===0;)J++;for(var tt=w.repeat(A);J<N;++J)tt+=n.charAt(T[J]);return tt}function R(S){if(typeof S!="string")throw new TypeError("Expected String");if(S.length===0)return _n.alloc(0);for(var A=0,U=0,C=0;S[A]===w;)U++,A++;for(var I=(S.length-A)*d+1>>>0,N=new Uint8Array(I);A<S.length;){var T=S.charCodeAt(A);if(T>255)return;var V=t[T];if(V===255)return;for(var X=0,G=I-1;(V!==0||X<C)&&G!==-1;G--,X++)V+=u*N[G]>>>0,N[G]=V%256>>>0,V=V/256>>>0;if(V!==0)throw new Error("Non-zero carry");C=X,A++}for(var J=I-C;J!==I&&N[J]===0;)J++;var tt=_n.allocUnsafe(U+(I-J));tt.fill(0,0,U);for(var k=U;J!==I;)tt[k++]=N[J++];return tt}function M(S){var A=R(S);if(A)return A;throw new Error("Non-base"+u+" character")}return{encode:B,decodeUnsafe:R,decode:M}}var ic=rc,oc=ic,sc="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz",Ro=oc(sc);const Se=to(Ro);var Qt={};function Oe(n,t,e){return t<=n&&n<=e}function Xn(n){if(n===void 0)return{};if(n===Object(n))return n;throw TypeError("Could not convert argument to dictionary")}function ac(n){for(var t=String(n),e=t.length,r=0,s=[];r<e;){var i=t.charCodeAt(r);if(i<55296||i>57343)s.push(i);else if(56320<=i&&i<=57343)s.push(65533);else if(55296<=i&&i<=56319)if(r===e-1)s.push(65533);else{var u=n.charCodeAt(r+1);if(56320<=u&&u<=57343){var w=i&1023,d=u&1023;s.push(65536+(w<<10)+d),r+=1}else s.push(65533)}r+=1}return s}function cc(n){for(var t="",e=0;e<n.length;++e){var r=n[e];r<=65535?t+=String.fromCharCode(r):(r-=65536,t+=String.fromCharCode((r>>10)+55296,(r&1023)+56320))}return t}var Nn=-1;function Qr(n){this.tokens=[].slice.call(n)}Qr.prototype={endOfStream:function(){return!this.tokens.length},read:function(){return this.tokens.length?this.tokens.shift():Nn},prepend:function(n){if(Array.isArray(n))for(var t=n;t.length;)this.tokens.unshift(t.pop());else this.tokens.unshift(n)},push:function(n){if(Array.isArray(n))for(var t=n;t.length;)this.tokens.push(t.shift());else this.tokens.push(n)}};var fn=-1;function Ur(n,t){if(n)throw TypeError("Decoder error");return t||65533}var zn="utf-8";function Fn(n,t){if(!(this instanceof Fn))return new Fn(n,t);if(n=n!==void 0?String(n).toLowerCase():zn,n!==zn)throw new Error("Encoding not supported. Only utf-8 is supported");t=Xn(t),this._streaming=!1,this._BOMseen=!1,this._decoder=null,this._fatal=!!t.fatal,this._ignoreBOM=!!t.ignoreBOM,Object.defineProperty(this,"encoding",{value:"utf-8"}),Object.defineProperty(this,"fatal",{value:this._fatal}),Object.defineProperty(this,"ignoreBOM",{value:this._ignoreBOM})}Fn.prototype={decode:function(t,e){var r;typeof t=="object"&&t instanceof ArrayBuffer?r=new Uint8Array(t):typeof t=="object"&&"buffer"in t&&t.buffer instanceof ArrayBuffer?r=new Uint8Array(t.buffer,t.byteOffset,t.byteLength):r=new Uint8Array(0),e=Xn(e),this._streaming||(this._decoder=new uc({fatal:this._fatal}),this._BOMseen=!1),this._streaming=!!e.stream;for(var s=new Qr(r),i=[],u;!s.endOfStream()&&(u=this._decoder.handler(s,s.read()),u!==fn);)u!==null&&(Array.isArray(u)?i.push.apply(i,u):i.push(u));if(!this._streaming){do{if(u=this._decoder.handler(s,s.read()),u===fn)break;u!==null&&(Array.isArray(u)?i.push.apply(i,u):i.push(u))}while(!s.endOfStream());this._decoder=null}return i.length&&["utf-8"].indexOf(this.encoding)!==-1&&!this._ignoreBOM&&!this._BOMseen&&(i[0]===65279?(this._BOMseen=!0,i.shift()):this._BOMseen=!0),cc(i)}};function Dn(n,t){if(!(this instanceof Dn))return new Dn(n,t);if(n=n!==void 0?String(n).toLowerCase():zn,n!==zn)throw new Error("Encoding not supported. Only utf-8 is supported");t=Xn(t),this._streaming=!1,this._encoder=null,this._options={fatal:!!t.fatal},Object.defineProperty(this,"encoding",{value:"utf-8"})}Dn.prototype={encode:function(t,e){t=t?String(t):"",e=Xn(e),this._streaming||(this._encoder=new fc(this._options)),this._streaming=!!e.stream;for(var r=[],s=new Qr(ac(t)),i;!s.endOfStream()&&(i=this._encoder.handler(s,s.read()),i!==fn);)Array.isArray(i)?r.push.apply(r,i):r.push(i);if(!this._streaming){for(;i=this._encoder.handler(s,s.read()),i!==fn;)Array.isArray(i)?r.push.apply(r,i):r.push(i);this._encoder=null}return new Uint8Array(r)}};function uc(n){var t=n.fatal,e=0,r=0,s=0,i=128,u=191;this.handler=function(w,d){if(d===Nn&&s!==0)return s=0,Ur(t);if(d===Nn)return fn;if(s===0){if(Oe(d,0,127))return d;if(Oe(d,194,223))s=1,e=d-192;else if(Oe(d,224,239))d===224&&(i=160),d===237&&(u=159),s=2,e=d-224;else if(Oe(d,240,244))d===240&&(i=144),d===244&&(u=143),s=3,e=d-240;else return Ur(t);return e=e<<6*s,null}if(!Oe(d,i,u))return e=s=r=0,i=128,u=191,w.prepend(d),Ur(t);if(i=128,u=191,r+=1,e+=d-128<<6*(s-r),r!==s)return null;var b=e;return e=s=r=0,b}}function fc(n){n.fatal,this.handler=function(t,e){if(e===Nn)return fn;if(Oe(e,0,127))return e;var r,s;Oe(e,128,2047)?(r=1,s=192):Oe(e,2048,65535)?(r=2,s=224):Oe(e,65536,1114111)&&(r=3,s=240);for(var i=[(e>>6*r)+s];r>0;){var u=e>>6*(r-1);i.push(128|u&63),r-=1}return i}}const hc=Object.freeze(Object.defineProperty({__proto__:null,TextDecoder:Fn,TextEncoder:Dn},Symbol.toStringTag,{value:"Module"})),lc=eo(hc);var dc=ve&&ve.__createBinding||(Object.create?function(n,t,e,r){r===void 0&&(r=e),Object.defineProperty(n,r,{enumerable:!0,get:function(){return t[e]}})}:function(n,t,e,r){r===void 0&&(r=e),n[r]=t[e]}),pc=ve&&ve.__setModuleDefault||(Object.create?function(n,t){Object.defineProperty(n,"default",{enumerable:!0,value:t})}:function(n,t){n.default=t}),_e=ve&&ve.__decorate||function(n,t,e,r){var s=arguments.length,i=s<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,u;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(n,t,e,r);else for(var w=n.length-1;w>=0;w--)(u=n[w])&&(i=(s<3?u(i):s>3?u(t,e,i):u(t,e))||i);return s>3&&i&&Object.defineProperty(t,e,i),i},gc=ve&&ve.__importStar||function(n){if(n&&n.__esModule)return n;var t={};if(n!=null)for(var e in n)e!=="default"&&Object.hasOwnProperty.call(n,e)&&dc(t,n,e);return pc(t,n),t},To=ve&&ve.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(Qt,"__esModule",{value:!0});var Oo=Qt.deserializeUnchecked=Fo=Qt.deserialize=zo=Qt.serialize=Qt.BinaryReader=Qt.BinaryWriter=Qt.BorshError=Qt.baseDecode=Qt.baseEncode=void 0;const Fe=To(no),Lo=To(Ro),mc=gc(lc),yc=typeof TextDecoder!="function"?mc.TextDecoder:TextDecoder,wc=new yc("utf-8",{fatal:!0});function vc(n){return typeof n=="string"&&(n=Buffer.from(n,"utf8")),Lo.default.encode(Buffer.from(n))}Qt.baseEncode=vc;function bc(n){return Buffer.from(Lo.default.decode(n))}Qt.baseDecode=bc;const Cr=1024;class oe extends Error{constructor(t){super(t),this.fieldPath=[],this.originalMessage=t}addToFieldPath(t){this.fieldPath.splice(0,0,t),this.message=this.originalMessage+": "+this.fieldPath.join(".")}}Qt.BorshError=oe;class Uo{constructor(){this.buf=Buffer.alloc(Cr),this.length=0}maybeResize(){this.buf.length<16+this.length&&(this.buf=Buffer.concat([this.buf,Buffer.alloc(Cr)]))}writeU8(t){this.maybeResize(),this.buf.writeUInt8(t,this.length),this.length+=1}writeU16(t){this.maybeResize(),this.buf.writeUInt16LE(t,this.length),this.length+=2}writeU32(t){this.maybeResize(),this.buf.writeUInt32LE(t,this.length),this.length+=4}writeU64(t){this.maybeResize(),this.writeBuffer(Buffer.from(new Fe.default(t).toArray("le",8)))}writeU128(t){this.maybeResize(),this.writeBuffer(Buffer.from(new Fe.default(t).toArray("le",16)))}writeU256(t){this.maybeResize(),this.writeBuffer(Buffer.from(new Fe.default(t).toArray("le",32)))}writeU512(t){this.maybeResize(),this.writeBuffer(Buffer.from(new Fe.default(t).toArray("le",64)))}writeBuffer(t){this.buf=Buffer.concat([Buffer.from(this.buf.subarray(0,this.length)),t,Buffer.alloc(Cr)]),this.length+=t.length}writeString(t){this.maybeResize();const e=Buffer.from(t,"utf8");this.writeU32(e.length),this.writeBuffer(e)}writeFixedArray(t){this.writeBuffer(Buffer.from(t))}writeArray(t,e){this.maybeResize(),this.writeU32(t.length);for(const r of t)this.maybeResize(),e(r)}toArray(){return this.buf.subarray(0,this.length)}}Qt.BinaryWriter=Uo;function ke(n,t,e){const r=e.value;e.value=function(...s){try{return r.apply(this,s)}catch(i){if(i instanceof RangeError){const u=i.code;if(["ERR_BUFFER_OUT_OF_BOUNDS","ERR_OUT_OF_RANGE"].indexOf(u)>=0)throw new oe("Reached the end of buffer when deserializing")}throw i}}}class he{constructor(t){this.buf=t,this.offset=0}readU8(){const t=this.buf.readUInt8(this.offset);return this.offset+=1,t}readU16(){const t=this.buf.readUInt16LE(this.offset);return this.offset+=2,t}readU32(){const t=this.buf.readUInt32LE(this.offset);return this.offset+=4,t}readU64(){const t=this.readBuffer(8);return new Fe.default(t,"le")}readU128(){const t=this.readBuffer(16);return new Fe.default(t,"le")}readU256(){const t=this.readBuffer(32);return new Fe.default(t,"le")}readU512(){const t=this.readBuffer(64);return new Fe.default(t,"le")}readBuffer(t){if(this.offset+t>this.buf.length)throw new oe(`Expected buffer length ${t} isn't within bounds`);const e=this.buf.slice(this.offset,this.offset+t);return this.offset+=t,e}readString(){const t=this.readU32(),e=this.readBuffer(t);try{return wc.decode(e)}catch(r){throw new oe(`Error decoding UTF-8 string: ${r}`)}}readFixedArray(t){return new Uint8Array(this.readBuffer(t))}readArray(t){const e=this.readU32(),r=Array();for(let s=0;s<e;++s)r.push(t());return r}}_e([ke],he.prototype,"readU8",null);_e([ke],he.prototype,"readU16",null);_e([ke],he.prototype,"readU32",null);_e([ke],he.prototype,"readU64",null);_e([ke],he.prototype,"readU128",null);_e([ke],he.prototype,"readU256",null);_e([ke],he.prototype,"readU512",null);_e([ke],he.prototype,"readString",null);_e([ke],he.prototype,"readFixedArray",null);_e([ke],he.prototype,"readArray",null);Qt.BinaryReader=he;function Co(n){return n.charAt(0).toUpperCase()+n.slice(1)}function qe(n,t,e,r,s){try{if(typeof r=="string")s[`write${Co(r)}`](e);else if(r instanceof Array)if(typeof r[0]=="number"){if(e.length!==r[0])throw new oe(`Expecting byte array of length ${r[0]}, but got ${e.length} bytes`);s.writeFixedArray(e)}else if(r.length===2&&typeof r[1]=="number"){if(e.length!==r[1])throw new oe(`Expecting byte array of length ${r[1]}, but got ${e.length} bytes`);for(let i=0;i<r[1];i++)qe(n,null,e[i],r[0],s)}else s.writeArray(e,i=>{qe(n,t,i,r[0],s)});else if(r.kind!==void 0)switch(r.kind){case"option":{e==null?s.writeU8(0):(s.writeU8(1),qe(n,t,e,r.type,s));break}case"map":{s.writeU32(e.size),e.forEach((i,u)=>{qe(n,t,u,r.key,s),qe(n,t,i,r.value,s)});break}default:throw new oe(`FieldType ${r} unrecognized`)}else No(n,e,s)}catch(i){throw i instanceof oe&&i.addToFieldPath(t),i}}function No(n,t,e){if(typeof t.borshSerialize=="function"){t.borshSerialize(e);return}const r=n.get(t.constructor);if(!r)throw new oe(`Class ${t.constructor.name} is missing in schema`);if(r.kind==="struct")r.fields.map(([s,i])=>{qe(n,s,t[s],i,e)});else if(r.kind==="enum"){const s=t[r.field];for(let i=0;i<r.values.length;++i){const[u,w]=r.values[i];if(u===s){e.writeU8(i),qe(n,u,t[u],w,e);break}}}else throw new oe(`Unexpected schema kind: ${r.kind} for ${t.constructor.name}`)}function xc(n,t,e=Uo){const r=new e;return No(n,t,r),r.toArray()}var zo=Qt.serialize=xc;function Pe(n,t,e,r){try{if(typeof e=="string")return r[`read${Co(e)}`]();if(e instanceof Array){if(typeof e[0]=="number")return r.readFixedArray(e[0]);if(typeof e[1]=="number"){const s=[];for(let i=0;i<e[1];i++)s.push(Pe(n,null,e[0],r));return s}else return r.readArray(()=>Pe(n,t,e[0],r))}if(e.kind==="option")return r.readU8()?Pe(n,t,e.type,r):void 0;if(e.kind==="map"){let s=new Map;const i=r.readU32();for(let u=0;u<i;u++){const w=Pe(n,t,e.key,r),d=Pe(n,t,e.value,r);s.set(w,d)}return s}return ti(n,e,r)}catch(s){throw s instanceof oe&&s.addToFieldPath(t),s}}function ti(n,t,e){if(typeof t.borshDeserialize=="function")return t.borshDeserialize(e);const r=n.get(t);if(!r)throw new oe(`Class ${t.name} is missing in schema`);if(r.kind==="struct"){const s={};for(const[i,u]of n.get(t).fields)s[i]=Pe(n,i,u,e);return new t(s)}if(r.kind==="enum"){const s=e.readU8();if(s>=r.values.length)throw new oe(`Enum index: ${s} is out of range`);const[i,u]=r.values[s],w=Pe(n,i,u,e);return new t({[i]:w})}throw new oe(`Unexpected schema kind: ${r.kind} for ${t.constructor.name}`)}function Ec(n,t,e,r=he){const s=new r(e),i=ti(n,t,s);if(s.offset<e.length)throw new oe(`Unexpected ${e.length-s.offset} bytes after deserialized data`);return i}var Fo=Qt.deserialize=Ec;function Mc(n,t,e,r=he){const s=new r(e);return ti(n,t,s)}Oo=Qt.deserializeUnchecked=Mc;var E={};Object.defineProperty(E,"__esModule",{value:!0});E.s16=E.s8=E.nu64be=E.u48be=E.u40be=E.u32be=E.u24be=E.u16be=Jt=E.nu64=E.u48=E.u40=Y=E.u32=E.u24=le=E.u16=ot=E.u8=Ye=E.offset=E.greedy=E.Constant=E.UTF8=E.CString=E.Blob=E.Boolean=E.BitField=E.BitStructure=E.VariantLayout=E.Union=E.UnionLayoutDiscriminator=E.UnionDiscriminator=E.Structure=E.Sequence=E.DoubleBE=E.Double=E.FloatBE=E.Float=E.NearInt64BE=E.NearInt64=E.NearUInt64BE=E.NearUInt64=E.IntBE=E.Int=E.UIntBE=E.UInt=E.OffsetLayout=E.GreedyCount=E.ExternalLayout=E.bindConstructorLayout=E.nameWithProperty=E.Layout=E.uint8ArrayToBuffer=E.checkUint8Array=void 0;E.constant=E.utf8=E.cstr=ut=E.blob=E.unionLayoutDiscriminator=E.union=se=E.seq=E.bits=$=E.struct=E.f64be=E.f64=E.f32be=E.f32=E.ns64be=E.s48be=E.s40be=E.s32be=E.s24be=E.s16be=fe=E.ns64=E.s48=E.s40=E.s32=E.s24=void 0;const ei=rt;function ln(n){if(!(n instanceof Uint8Array))throw new TypeError("b must be a Uint8Array")}E.checkUint8Array=ln;function it(n){return ln(n),ei.Buffer.from(n.buffer,n.byteOffset,n.length)}E.uint8ArrayToBuffer=it;class st{constructor(t,e){if(!Number.isInteger(t))throw new TypeError("span must be an integer");this.span=t,this.property=e}makeDestinationObject(){return{}}getSpan(t,e){if(0>this.span)throw new RangeError("indeterminate span");return this.span}replicate(t){const e=Object.create(this.constructor.prototype);return Object.assign(e,this),e.property=t,e}fromArray(t){}}E.Layout=st;function ni(n,t){return t.property?n+"["+t.property+"]":n}E.nameWithProperty=ni;function Sc(n,t){if(typeof n!="function")throw new TypeError("Class must be constructor");if(Object.prototype.hasOwnProperty.call(n,"layout_"))throw new Error("Class is already bound to a layout");if(!(t&&t instanceof st))throw new TypeError("layout must be a Layout");if(Object.prototype.hasOwnProperty.call(t,"boundConstructor_"))throw new Error("layout is already bound to a constructor");n.layout_=t,t.boundConstructor_=n,t.makeDestinationObject=()=>new n,Object.defineProperty(n.prototype,"encode",{value(e,r){return t.encode(this,e,r)},writable:!0}),Object.defineProperty(n,"decode",{value(e,r){return t.decode(e,r)},writable:!0})}E.bindConstructorLayout=Sc;class ce extends st{isCount(){throw new Error("ExternalLayout is abstract")}}E.ExternalLayout=ce;class Do extends ce{constructor(t=1,e){if(!Number.isInteger(t)||0>=t)throw new TypeError("elementSpan must be a (positive) integer");super(-1,e),this.elementSpan=t}isCount(){return!0}decode(t,e=0){ln(t);const r=t.length-e;return Math.floor(r/this.elementSpan)}encode(t,e,r){return 0}}E.GreedyCount=Do;class ri extends ce{constructor(t,e=0,r){if(!(t instanceof st))throw new TypeError("layout must be a Layout");if(!Number.isInteger(e))throw new TypeError("offset must be integer or undefined");super(t.span,r||t.property),this.layout=t,this.offset=e}isCount(){return this.layout instanceof me||this.layout instanceof we}decode(t,e=0){return this.layout.decode(t,e+this.offset)}encode(t,e,r=0){return this.layout.encode(t,e,r+this.offset)}}E.OffsetLayout=ri;class me extends st{constructor(t,e){if(super(t,e),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(t,e=0){return it(t).readUIntLE(e,this.span)}encode(t,e,r=0){return it(e).writeUIntLE(t,r,this.span),this.span}}E.UInt=me;class we extends st{constructor(t,e){if(super(t,e),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(t,e=0){return it(t).readUIntBE(e,this.span)}encode(t,e,r=0){return it(e).writeUIntBE(t,r,this.span),this.span}}E.UIntBE=we;class We extends st{constructor(t,e){if(super(t,e),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(t,e=0){return it(t).readIntLE(e,this.span)}encode(t,e,r=0){return it(e).writeIntLE(t,r,this.span),this.span}}E.Int=We;class dn extends st{constructor(t,e){if(super(t,e),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(t,e=0){return it(t).readIntBE(e,this.span)}encode(t,e,r=0){return it(e).writeIntBE(t,r,this.span),this.span}}E.IntBE=dn;const Kr=Math.pow(2,32);function Jn(n){const t=Math.floor(n/Kr),e=n-t*Kr;return{hi32:t,lo32:e}}function Qn(n,t){return n*Kr+t}class Ko extends st{constructor(t){super(8,t)}decode(t,e=0){const r=it(t),s=r.readUInt32LE(e),i=r.readUInt32LE(e+4);return Qn(i,s)}encode(t,e,r=0){const s=Jn(t),i=it(e);return i.writeUInt32LE(s.lo32,r),i.writeUInt32LE(s.hi32,r+4),8}}E.NearUInt64=Ko;class qo extends st{constructor(t){super(8,t)}decode(t,e=0){const r=it(t),s=r.readUInt32BE(e),i=r.readUInt32BE(e+4);return Qn(s,i)}encode(t,e,r=0){const s=Jn(t),i=it(e);return i.writeUInt32BE(s.hi32,r),i.writeUInt32BE(s.lo32,r+4),8}}E.NearUInt64BE=qo;class Po extends st{constructor(t){super(8,t)}decode(t,e=0){const r=it(t),s=r.readUInt32LE(e),i=r.readInt32LE(e+4);return Qn(i,s)}encode(t,e,r=0){const s=Jn(t),i=it(e);return i.writeUInt32LE(s.lo32,r),i.writeInt32LE(s.hi32,r+4),8}}E.NearInt64=Po;class $o extends st{constructor(t){super(8,t)}decode(t,e=0){const r=it(t),s=r.readInt32BE(e),i=r.readUInt32BE(e+4);return Qn(s,i)}encode(t,e,r=0){const s=Jn(t),i=it(e);return i.writeInt32BE(s.hi32,r),i.writeUInt32BE(s.lo32,r+4),8}}E.NearInt64BE=$o;class Zo extends st{constructor(t){super(4,t)}decode(t,e=0){return it(t).readFloatLE(e)}encode(t,e,r=0){return it(e).writeFloatLE(t,r),4}}E.Float=Zo;class Vo extends st{constructor(t){super(4,t)}decode(t,e=0){return it(t).readFloatBE(e)}encode(t,e,r=0){return it(e).writeFloatBE(t,r),4}}E.FloatBE=Vo;class jo extends st{constructor(t){super(8,t)}decode(t,e=0){return it(t).readDoubleLE(e)}encode(t,e,r=0){return it(e).writeDoubleLE(t,r),8}}E.Double=jo;class Yo extends st{constructor(t){super(8,t)}decode(t,e=0){return it(t).readDoubleBE(e)}encode(t,e,r=0){return it(e).writeDoubleBE(t,r),8}}E.DoubleBE=Yo;class Go extends st{constructor(t,e,r){if(!(t instanceof st))throw new TypeError("elementLayout must be a Layout");if(!(e instanceof ce&&e.isCount()||Number.isInteger(e)&&0<=e))throw new TypeError("count must be non-negative integer or an unsigned integer ExternalLayout");let s=-1;!(e instanceof ce)&&0<t.span&&(s=e*t.span),super(s,r),this.elementLayout=t,this.count=e}getSpan(t,e=0){if(0<=this.span)return this.span;let r=0,s=this.count;if(s instanceof ce&&(s=s.decode(t,e)),0<this.elementLayout.span)r=s*this.elementLayout.span;else{let i=0;for(;i<s;)r+=this.elementLayout.getSpan(t,e+r),++i}return r}decode(t,e=0){const r=[];let s=0,i=this.count;for(i instanceof ce&&(i=i.decode(t,e));s<i;)r.push(this.elementLayout.decode(t,e)),e+=this.elementLayout.getSpan(t,e),s+=1;return r}encode(t,e,r=0){const s=this.elementLayout,i=t.reduce((u,w)=>u+s.encode(w,e,r+u),0);return this.count instanceof ce&&this.count.encode(t.length,e,r),i}}E.Sequence=Go;class Ho extends st{constructor(t,e,r){if(!(Array.isArray(t)&&t.reduce((i,u)=>i&&u instanceof st,!0)))throw new TypeError("fields must be array of Layout instances");typeof e=="boolean"&&r===void 0&&(r=e,e=void 0);for(const i of t)if(0>i.span&&i.property===void 0)throw new Error("fields cannot contain unnamed variable-length layout");let s=-1;try{s=t.reduce((i,u)=>i+u.getSpan(),0)}catch{}super(s,e),this.fields=t,this.decodePrefixes=!!r}getSpan(t,e=0){if(0<=this.span)return this.span;let r=0;try{r=this.fields.reduce((s,i)=>{const u=i.getSpan(t,e);return e+=u,s+u},0)}catch{throw new RangeError("indeterminate span")}return r}decode(t,e=0){ln(t);const r=this.makeDestinationObject();for(const s of this.fields)if(s.property!==void 0&&(r[s.property]=s.decode(t,e)),e+=s.getSpan(t,e),this.decodePrefixes&&t.length===e)break;return r}encode(t,e,r=0){const s=r;let i=0,u=0;for(const w of this.fields){let d=w.span;if(u=0<d?d:0,w.property!==void 0){const b=t[w.property];b!==void 0&&(u=w.encode(b,e,r),0>d&&(d=w.getSpan(e,r)))}i=r,r+=d}return i+u-s}fromArray(t){const e=this.makeDestinationObject();for(const r of this.fields)r.property!==void 0&&0<t.length&&(e[r.property]=t.shift());return e}layoutFor(t){if(typeof t!="string")throw new TypeError("property must be string");for(const e of this.fields)if(e.property===t)return e}offsetOf(t){if(typeof t!="string")throw new TypeError("property must be string");let e=0;for(const r of this.fields){if(r.property===t)return e;0>r.span?e=-1:0<=e&&(e+=r.span)}}}E.Structure=Ho;class ii{constructor(t){this.property=t}decode(t,e){throw new Error("UnionDiscriminator is abstract")}encode(t,e,r){throw new Error("UnionDiscriminator is abstract")}}E.UnionDiscriminator=ii;class Kn extends ii{constructor(t,e){if(!(t instanceof ce&&t.isCount()))throw new TypeError("layout must be an unsigned integer ExternalLayout");super(e||t.property||"variant"),this.layout=t}decode(t,e){return this.layout.decode(t,e)}encode(t,e,r){return this.layout.encode(t,e,r)}}E.UnionLayoutDiscriminator=Kn;class oi extends st{constructor(t,e,r){let s;if(t instanceof me||t instanceof we)s=new Kn(new ri(t));else if(t instanceof ce&&t.isCount())s=new Kn(t);else if(t instanceof ii)s=t;else throw new TypeError("discr must be a UnionDiscriminator or an unsigned integer layout");if(e===void 0&&(e=null),!(e===null||e instanceof st))throw new TypeError("defaultLayout must be null or a Layout");if(e!==null){if(0>e.span)throw new Error("defaultLayout must have constant span");e.property===void 0&&(e=e.replicate("content"))}let i=-1;e&&(i=e.span,0<=i&&(t instanceof me||t instanceof we)&&(i+=s.layout.span)),super(i,r),this.discriminator=s,this.usesPrefixDiscriminator=t instanceof me||t instanceof we,this.defaultLayout=e,this.registry={};let u=this.defaultGetSourceVariant.bind(this);this.getSourceVariant=function(w){return u(w)},this.configGetSourceVariant=function(w){u=w.bind(this)}}getSpan(t,e=0){if(0<=this.span)return this.span;const r=this.getVariant(t,e);if(!r)throw new Error("unable to determine span for unrecognized variant");return r.getSpan(t,e)}defaultGetSourceVariant(t){if(Object.prototype.hasOwnProperty.call(t,this.discriminator.property)){if(this.defaultLayout&&this.defaultLayout.property&&Object.prototype.hasOwnProperty.call(t,this.defaultLayout.property))return;const e=this.registry[t[this.discriminator.property]];if(e&&(!e.layout||e.property&&Object.prototype.hasOwnProperty.call(t,e.property)))return e}else for(const e in this.registry){const r=this.registry[e];if(r.property&&Object.prototype.hasOwnProperty.call(t,r.property))return r}throw new Error("unable to infer src variant")}decode(t,e=0){let r;const s=this.discriminator,i=s.decode(t,e),u=this.registry[i];if(u===void 0){const w=this.defaultLayout;let d=0;this.usesPrefixDiscriminator&&(d=s.layout.span),r=this.makeDestinationObject(),r[s.property]=i,r[w.property]=w.decode(t,e+d)}else r=u.decode(t,e);return r}encode(t,e,r=0){const s=this.getSourceVariant(t);if(s===void 0){const i=this.discriminator,u=this.defaultLayout;let w=0;return this.usesPrefixDiscriminator&&(w=i.layout.span),i.encode(t[i.property],e,r),w+u.encode(t[u.property],e,r+w)}return s.encode(t,e,r)}addVariant(t,e,r){const s=new Wo(this,t,e,r);return this.registry[t]=s,s}getVariant(t,e=0){let r;return t instanceof Uint8Array?r=this.discriminator.decode(t,e):r=t,this.registry[r]}}E.Union=oi;class Wo extends st{constructor(t,e,r,s){if(!(t instanceof oi))throw new TypeError("union must be a Union");if(!Number.isInteger(e)||0>e)throw new TypeError("variant must be a (non-negative) integer");if(typeof r=="string"&&s===void 0&&(s=r,r=null),r){if(!(r instanceof st))throw new TypeError("layout must be a Layout");if(t.defaultLayout!==null&&0<=r.span&&r.span>t.defaultLayout.span)throw new Error("variant span exceeds span of containing union");if(typeof s!="string")throw new TypeError("variant must have a String property")}let i=t.span;0>t.span&&(i=r?r.span:0,0<=i&&t.usesPrefixDiscriminator&&(i+=t.discriminator.layout.span)),super(i,s),this.union=t,this.variant=e,this.layout=r||null}getSpan(t,e=0){if(0<=this.span)return this.span;let r=0;this.union.usesPrefixDiscriminator&&(r=this.union.discriminator.layout.span);let s=0;return this.layout&&(s=this.layout.getSpan(t,e+r)),r+s}decode(t,e=0){const r=this.makeDestinationObject();if(this!==this.union.getVariant(t,e))throw new Error("variant mismatch");let s=0;return this.union.usesPrefixDiscriminator&&(s=this.union.discriminator.layout.span),this.layout?r[this.property]=this.layout.decode(t,e+s):this.property?r[this.property]=!0:this.union.usesPrefixDiscriminator&&(r[this.union.discriminator.property]=this.variant),r}encode(t,e,r=0){let s=0;if(this.union.usesPrefixDiscriminator&&(s=this.union.discriminator.layout.span),this.layout&&!Object.prototype.hasOwnProperty.call(t,this.property))throw new TypeError("variant lacks property "+this.property);this.union.discriminator.encode(this.variant,e,r);let i=s;if(this.layout&&(this.layout.encode(t[this.property],e,r+s),i+=this.layout.getSpan(e,r+s),0<=this.union.span&&i>this.union.span))throw new Error("encoded variant overruns containing union");return i}fromArray(t){if(this.layout)return this.layout.fromArray(t)}}E.VariantLayout=Wo;function en(n){return 0>n&&(n+=4294967296),n}class si extends st{constructor(t,e,r){if(!(t instanceof me||t instanceof we))throw new TypeError("word must be a UInt or UIntBE layout");if(typeof e=="string"&&r===void 0&&(r=e,e=!1),4<t.span)throw new RangeError("word cannot exceed 32 bits");super(t.span,r),this.word=t,this.msb=!!e,this.fields=[];let s=0;this._packedSetValue=function(i){return s=en(i),this},this._packedGetValue=function(){return s}}decode(t,e=0){const r=this.makeDestinationObject(),s=this.word.decode(t,e);this._packedSetValue(s);for(const i of this.fields)i.property!==void 0&&(r[i.property]=i.decode(t));return r}encode(t,e,r=0){const s=this.word.decode(e,r);this._packedSetValue(s);for(const i of this.fields)if(i.property!==void 0){const u=t[i.property];u!==void 0&&i.encode(u)}return this.word.encode(this._packedGetValue(),e,r)}addField(t,e){const r=new ai(this,t,e);return this.fields.push(r),r}addBoolean(t){const e=new Xo(this,t);return this.fields.push(e),e}fieldFor(t){if(typeof t!="string")throw new TypeError("property must be string");for(const e of this.fields)if(e.property===t)return e}}E.BitStructure=si;class ai{constructor(t,e,r){if(!(t instanceof si))throw new TypeError("container must be a BitStructure");if(!Number.isInteger(e)||0>=e)throw new TypeError("bits must be positive integer");const s=8*t.span,i=t.fields.reduce((u,w)=>u+w.bits,0);if(e+i>s)throw new Error("bits too long for span remainder ("+(s-i)+" of "+s+" remain)");this.container=t,this.bits=e,this.valueMask=(1<<e)-1,e===32&&(this.valueMask=4294967295),this.start=i,this.container.msb&&(this.start=s-i-e),this.wordMask=en(this.valueMask<<this.start),this.property=r}decode(t,e){const r=this.container._packedGetValue();return en(r&this.wordMask)>>>this.start}encode(t){if(typeof t!="number"||!Number.isInteger(t)||t!==en(t&this.valueMask))throw new TypeError(ni("BitField.encode",this)+" value must be integer not exceeding "+this.valueMask);const e=this.container._packedGetValue(),r=en(t<<this.start);this.container._packedSetValue(en(e&~this.wordMask)|r)}}E.BitField=ai;let Xo=class extends ai{constructor(t,e){super(t,1,e)}decode(t,e){return!!super.decode(t,e)}encode(t){typeof t=="boolean"&&(t=+t),super.encode(t)}};E.Boolean=Xo;class Jo extends st{constructor(t,e){if(!(t instanceof ce&&t.isCount()||Number.isInteger(t)&&0<=t))throw new TypeError("length must be positive integer or an unsigned integer ExternalLayout");let r=-1;t instanceof ce||(r=t),super(r,e),this.length=t}getSpan(t,e){let r=this.span;return 0>r&&(r=this.length.decode(t,e)),r}decode(t,e=0){let r=this.span;return 0>r&&(r=this.length.decode(t,e)),it(t).slice(e,e+r)}encode(t,e,r){let s=this.length;if(this.length instanceof ce&&(s=t.length),!(t instanceof Uint8Array&&s===t.length))throw new TypeError(ni("Blob.encode",this)+" requires (length "+s+") Uint8Array as src");if(r+s>e.length)throw new RangeError("encoding overruns Uint8Array");const i=it(t);return it(e).write(i.toString("hex"),r,s,"hex"),this.length instanceof ce&&this.length.encode(s,e,r),s}}E.Blob=Jo;class Qo extends st{constructor(t){super(-1,t)}getSpan(t,e=0){ln(t);let r=e;for(;r<t.length&&t[r]!==0;)r+=1;return 1+r-e}decode(t,e=0){const r=this.getSpan(t,e);return it(t).slice(e,e+r-1).toString("utf-8")}encode(t,e,r=0){typeof t!="string"&&(t=String(t));const s=ei.Buffer.from(t,"utf8"),i=s.length;if(r+i>e.length)throw new RangeError("encoding overruns Buffer");const u=it(e);return s.copy(u,r),u[r+i]=0,i+1}}E.CString=Qo;class ts extends st{constructor(t,e){if(typeof t=="string"&&e===void 0&&(e=t,t=void 0),t===void 0)t=-1;else if(!Number.isInteger(t))throw new TypeError("maxSpan must be an integer");super(-1,e),this.maxSpan=t}getSpan(t,e=0){return ln(t),t.length-e}decode(t,e=0){const r=this.getSpan(t,e);if(0<=this.maxSpan&&this.maxSpan<r)throw new RangeError("text length exceeds maxSpan");return it(t).slice(e,e+r).toString("utf-8")}encode(t,e,r=0){typeof t!="string"&&(t=String(t));const s=ei.Buffer.from(t,"utf8"),i=s.length;if(0<=this.maxSpan&&this.maxSpan<i)throw new RangeError("text length exceeds maxSpan");if(r+i>e.length)throw new RangeError("encoding overruns Buffer");return s.copy(it(e),r),i}}E.UTF8=ts;class es extends st{constructor(t,e){super(0,e),this.value=t}decode(t,e){return this.value}encode(t,e,r){return 0}}E.Constant=es;E.greedy=(n,t)=>new Do(n,t);var Ye=E.offset=(n,t,e)=>new ri(n,t,e),ot=E.u8=n=>new me(1,n),le=E.u16=n=>new me(2,n);E.u24=n=>new me(3,n);var Y=E.u32=n=>new me(4,n);E.u40=n=>new me(5,n);E.u48=n=>new me(6,n);var Jt=E.nu64=n=>new Ko(n);E.u16be=n=>new we(2,n);E.u24be=n=>new we(3,n);E.u32be=n=>new we(4,n);E.u40be=n=>new we(5,n);E.u48be=n=>new we(6,n);E.nu64be=n=>new qo(n);E.s8=n=>new We(1,n);E.s16=n=>new We(2,n);E.s24=n=>new We(3,n);E.s32=n=>new We(4,n);E.s40=n=>new We(5,n);E.s48=n=>new We(6,n);var fe=E.ns64=n=>new Po(n);E.s16be=n=>new dn(2,n);E.s24be=n=>new dn(3,n);E.s32be=n=>new dn(4,n);E.s40be=n=>new dn(5,n);E.s48be=n=>new dn(6,n);E.ns64be=n=>new $o(n);E.f32=n=>new Zo(n);E.f32be=n=>new Vo(n);E.f64=n=>new jo(n);E.f64be=n=>new Yo(n);var $=E.struct=(n,t,e)=>new Ho(n,t,e);E.bits=(n,t,e)=>new si(n,t,e);var se=E.seq=(n,t,e)=>new Go(n,t,e);E.union=(n,t,e)=>new oi(n,t,e);E.unionLayoutDiscriminator=(n,t)=>new Kn(n,t);var ut=E.blob=(n,t)=>new Jo(n,t);E.cstr=n=>new Qo(n);E.utf8=(n,t)=>new ts(n,t);E.constant=(n,t)=>new es(n,t);var Bc=8078e3,Ac=8078001,Ic=8078004,_c=8078005,kc=8078006,Rc=8078011;function ns(n){return Array.isArray(n)?"%5B"+n.map(ns).join("%2C%20")+"%5D":typeof n=="bigint"?`${n}n`:encodeURIComponent(String(n!=null&&Object.getPrototypeOf(n)===null?{...n}:n))}function Tc([n,t]){return`${n}=${ns(t)}`}function Oc(n){const t=Object.entries(n).map(Tc).join("&");return btoa(t)}function Lc(n,t={}){{let e=`Solana error #${n}; Decode this error by running \`npx @solana/errors decode -- ${n}`;return Object.keys(t).length&&(e+=` '${Oc(t)}'`),`${e}\``}}var an=class extends Error{constructor(...[t,e]){let r,s;if(e){const{cause:u,...w}=e;u&&(s={cause:u}),Object.keys(w).length>0&&(r=w)}const i=Lc(t,r);super(i,s);Er(this,"cause",this.cause);Er(this,"context");this.context={__code:t,...r},this.name="SolanaError"}};function Uc(n,t){return"fixedSize"in t?t.fixedSize:t.getSizeFromValue(n)}function Cc(n){return Object.freeze({...n,encode:t=>{const e=new Uint8Array(Uc(t,n));return n.write(t,e,0),e}})}function Nc(n){return Object.freeze({...n,decode:(t,e=0)=>n.read(t,e)[0]})}function tn(n){return"fixedSize"in n&&typeof n.fixedSize=="number"}function zc(n,t){if(tn(n)!==tn(t))throw new an(Ic);if(tn(n)&&tn(t)&&n.fixedSize!==t.fixedSize)throw new an(_c,{decoderFixedSize:t.fixedSize,encoderFixedSize:n.fixedSize});if(!tn(n)&&!tn(t)&&n.maxSize!==t.maxSize)throw new an(kc,{decoderMaxSize:t.maxSize,encoderMaxSize:n.maxSize});return{...t,...n,decode:t.decode,encode:n.encode,read:t.read,write:n.write}}function Fc(n,t,e=0){if(t.length-e<=0)throw new an(Bc,{codecDescription:n})}function Dc(n,t,e,r=0){const s=e.length-r;if(s<t)throw new an(Ac,{bytesLength:s,codecDescription:n,expected:t})}function Kc(n,t,e,r){if(r<t||r>e)throw new an(Rc,{codecDescription:n,max:e,min:t,value:r})}function rs(n){return(n==null?void 0:n.endian)!==1}function qc(n){return Cc({fixedSize:n.size,write(t,e,r){n.range&&Kc(n.name,n.range[0],n.range[1],t);const s=new ArrayBuffer(n.size);return n.set(new DataView(s),t,rs(n.config)),e.set(new Uint8Array(s),r),r+n.size}})}function Pc(n){return Nc({fixedSize:n.size,read(t,e=0){Fc(n.name,t,e),Dc(n.name,n.size,t,e);const r=new DataView($c(t,e,n.size));return[n.get(r,rs(n.config)),e+n.size]}})}function $c(n,t,e){const r=n.byteOffset+(t??0),s=e??n.byteLength;return n.buffer.slice(r,r+s)}var Zc=(n={})=>qc({config:n,name:"u64",range:[0n,BigInt("0xffffffffffffffff")],set:(t,e,r)=>t.setBigUint64(0,BigInt(e),r),size:8}),Vc=(n={})=>Pc({config:n,get:(t,e)=>t.getBigUint64(0,e),name:"u64",size:8}),jc=(n={})=>zc(Zc(n),Vc(n));class Yc extends TypeError{constructor(t,e){let r;const{message:s,explanation:i,...u}=t,{path:w}=t,d=w.length===0?s:`At path: ${w.join(".")} -- ${s}`;super(i??d),i!=null&&(this.cause=d),Object.assign(this,u),this.name=this.constructor.name,this.failures=()=>r??(r=[t,...e()])}}function Gc(n){return Sn(n)&&typeof n[Symbol.iterator]=="function"}function Sn(n){return typeof n=="object"&&n!=null}function qn(n){return Sn(n)&&!Array.isArray(n)}function be(n){return typeof n=="symbol"?n.toString():typeof n=="string"?JSON.stringify(n):`${n}`}function Hc(n){const{done:t,value:e}=n.next();return t?void 0:e}function Wc(n,t,e,r){if(n===!0)return;n===!1?n={}:typeof n=="string"&&(n={message:n});const{path:s,branch:i}=t,{type:u}=e,{refinement:w,message:d=`Expected a value of type \`${u}\`${w?` with refinement \`${w}\``:""}, but received: \`${be(r)}\``}=n;return{value:r,type:u,refinement:w,key:s[s.length-1],path:s,branch:i,...n,message:d}}function*Gi(n,t,e,r){Gc(n)||(n=[n]);for(const s of n){const i=Wc(s,t,e,r);i&&(yield i)}}function*ci(n,t,e={}){const{path:r=[],branch:s=[n],coerce:i=!1,mask:u=!1}=e,w={path:r,branch:s,mask:u};i&&(n=t.coercer(n,w));let d="valid";for(const b of t.validator(n,w))b.explanation=e.message,d="not_valid",yield[b,void 0];for(let[b,B,R]of t.entries(n,w)){const M=ci(B,R,{path:b===void 0?r:[...r,b],branch:b===void 0?s:[...s,B],coerce:i,mask:u,message:e.message});for(const S of M)S[0]?(d=S[0].refinement!=null?"not_refined":"not_valid",yield[S[0],void 0]):i&&(B=S[1],b===void 0?n=B:n instanceof Map?n.set(b,B):n instanceof Set?n.add(B):Sn(n)&&(B!==void 0||b in n)&&(n[b]=B))}if(d!=="not_valid")for(const b of t.refiner(n,w))b.explanation=e.message,d="not_refined",yield[b,void 0];d==="valid"&&(yield[void 0,n])}let Re=class{constructor(t){const{type:e,schema:r,validator:s,refiner:i,coercer:u=d=>d,entries:w=function*(){}}=t;this.type=e,this.schema=r,this.entries=w,this.coercer=u,s?this.validator=(d,b)=>{const B=s(d,b);return Gi(B,b,this,d)}:this.validator=()=>[],i?this.refiner=(d,b)=>{const B=i(d,b);return Gi(B,b,this,d)}:this.refiner=()=>[]}assert(t,e){return Xc(t,this,e)}create(t,e){return bn(t,this,e)}is(t){return is(t,this)}mask(t,e){return Jc(t,this,e)}validate(t,e={}){return Bn(t,this,e)}};function Xc(n,t,e){const r=Bn(n,t,{message:e});if(r[0])throw r[0]}function bn(n,t,e){const r=Bn(n,t,{coerce:!0,message:e});if(r[0])throw r[0];return r[1]}function Jc(n,t,e){const r=Bn(n,t,{coerce:!0,mask:!0,message:e});if(r[0])throw r[0];return r[1]}function is(n,t){return!Bn(n,t)[0]}function Bn(n,t,e={}){const r=ci(n,t,e),s=Hc(r);return s[0]?[new Yc(s[0],function*(){for(const u of r)u[0]&&(yield u[0])}),void 0]:[void 0,s[1]]}function Xe(n,t){return new Re({type:n,schema:null,validator:t})}function Qc(){return Xe("any",()=>!0)}function F(n){return new Re({type:"array",schema:n,*entries(t){if(n&&Array.isArray(t))for(const[e,r]of t.entries())yield[e,r,n]},coercer(t){return Array.isArray(t)?t.slice():t},validator(t){return Array.isArray(t)||`Expected an array value, but received: ${be(t)}`}})}function Ie(){return Xe("boolean",n=>typeof n=="boolean")}function ui(n){return Xe("instance",t=>t instanceof n||`Expected a \`${n.name}\` instance, but received: ${be(t)}`)}function ht(n){const t=be(n),e=typeof n;return new Re({type:"literal",schema:e==="string"||e==="number"||e==="boolean"?n:null,validator(r){return r===n||`Expected the literal \`${t}\`, but received: ${be(r)}`}})}function tu(){return Xe("never",()=>!1)}function D(n){return new Re({...n,validator:(t,e)=>t===null||n.validator(t,e),refiner:(t,e)=>t===null||n.refiner(t,e)})}function x(){return Xe("number",n=>typeof n=="number"&&!isNaN(n)||`Expected a number, but received: ${be(n)}`)}function j(n){return new Re({...n,validator:(t,e)=>t===void 0||n.validator(t,e),refiner:(t,e)=>t===void 0||n.refiner(t,e)})}function os(n,t){return new Re({type:"record",schema:null,*entries(e){if(Sn(e))for(const r in e){const s=e[r];yield[r,r,n],yield[r,s,t]}},validator(e){return qn(e)||`Expected an object, but received: ${be(e)}`},coercer(e){return qn(e)?{...e}:e}})}function O(){return Xe("string",n=>typeof n=="string"||`Expected a string, but received: ${be(n)}`)}function fi(n){const t=tu();return new Re({type:"tuple",schema:null,*entries(e){if(Array.isArray(e)){const r=Math.max(n.length,e.length);for(let s=0;s<r;s++)yield[s,e[s],n[s]||t]}},validator(e){return Array.isArray(e)||`Expected an array, but received: ${be(e)}`},coercer(e){return Array.isArray(e)?e.slice():e}})}function _(n){const t=Object.keys(n);return new Re({type:"type",schema:n,*entries(e){if(Sn(e))for(const r of t)yield[r,e[r],n[r]]},validator(e){return qn(e)||`Expected an object, but received: ${be(e)}`},coercer(e){return qn(e)?{...e}:e}})}function ae(n){const t=n.map(e=>e.type).join(" | ");return new Re({type:"union",schema:null,coercer(e,r){for(const s of n){const[i,u]=s.validate(e,{coerce:!0,mask:r.mask});if(!i)return u}return e},validator(e,r){const s=[];for(const i of n){const[...u]=ci(e,i,r),[w]=u;if(w[0])for(const[d]of u)d&&s.push(d);else return[]}return[`Expected the value to satisfy a union of \`${t}\`, but received: ${be(e)}`,...s]}})}function pn(){return Xe("unknown",()=>!0)}function An(n,t,e){return new Re({...n,coercer:(r,s)=>is(r,t)?n.coercer(e(r,s),s):n.coercer(r,s)})}const ss=eo(ya),eu=ss.v4,nu=function(n,t,e,r){if(typeof n!="string")throw new TypeError(n+" must be a string");r=r||{};const s=typeof r.version=="number"?r.version:2;if(s!==1&&s!==2)throw new TypeError(s+" must be 1 or 2");const i={method:n};if(s===2&&(i.jsonrpc="2.0"),t){if(typeof t!="object"&&!Array.isArray(t))throw new TypeError(t+" must be an object, array or omitted");i.params=t}if(typeof e>"u"){const u=typeof r.generator=="function"?r.generator:function(){return eu()};i.id=u(i,r)}else s===2&&e===null?r.notificationIdNull&&(i.id=null):i.id=e;return i};var ru=nu;const iu=ss.v4,ou=ru,Pn=function(n,t){if(!(this instanceof Pn))return new Pn(n,t);t||(t={}),this.options={reviver:typeof t.reviver<"u"?t.reviver:null,replacer:typeof t.replacer<"u"?t.replacer:null,generator:typeof t.generator<"u"?t.generator:function(){return iu()},version:typeof t.version<"u"?t.version:2,notificationIdNull:typeof t.notificationIdNull=="boolean"?t.notificationIdNull:!1},this.callServer=n};Pn.prototype.request=function(n,t,e,r){const s=this;let i=null;const u=Array.isArray(n)&&typeof t=="function";if(this.options.version===1&&u)throw new TypeError("JSON-RPC 1.0 does not support batching");if(u||!u&&n&&typeof n=="object"&&typeof t=="function")r=t,i=n;else{typeof e=="function"&&(r=e,e=void 0);const b=typeof r=="function";try{i=ou(n,t,e,{generator:this.options.generator,version:this.options.version,notificationIdNull:this.options.notificationIdNull})}catch(B){if(b)return r(B);throw B}if(!b)return i}let d;try{d=JSON.stringify(i,this.options.replacer)}catch(b){return r(b)}return this.callServer(d,function(b,B){s._parseResponse(b,B,r)}),i};Pn.prototype._parseResponse=function(n,t,e){if(n){e(n);return}if(!t)return e();let r;try{r=JSON.parse(t,this.options.reviver)}catch(s){return e(s)}if(e.length===3)if(Array.isArray(r)){const s=function(u){return typeof u.error<"u"},i=function(u){return!s(u)};return e(null,r.filter(s),r.filter(i))}else return e(null,r.error,r.result);e(null,r)};/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Hi=(n,t)=>(n+(n>=0?t:-t)/as)/t;function su(n,t,e){const[[r,s],[i,u]]=t,w=Hi(u*n,e),d=Hi(-s*n,e);let b=n-w*r-d*i,B=-w*s-d*u;const R=b<Ue,M=B<Ue;R&&(b=-b),M&&(B=-B);const S=xn(Math.ceil(ho(e)/2))+cn;if(b<Ue||b>=S||B<Ue||B>=S)throw new Error("splitScalar (endomorphism): failed, k="+n);return{k1neg:R,k1:b,k2neg:M,k2:B}}function qr(n){if(!["compact","recovered","der"].includes(n))throw new Error('Signature format must be "compact", "recovered", or "der"');return n}function Nr(n,t){const e={};for(let r of Object.keys(t))e[r]=n[r]===void 0?t[r]:n[r];return Ge(e.lowS,"lowS"),Ge(e.prehash,"prehash"),e.format!==void 0&&qr(e.format),e}class au extends Error{constructor(t=""){super(t)}}const Te={Err:au,_tlv:{encode:(n,t)=>{const{Err:e}=Te;if(n<0||n>256)throw new e("tlv.encode: wrong tag");if(t.length&1)throw new e("tlv.encode: unpadded data");const r=t.length/2,s=In(r);if(s.length/2&128)throw new e("tlv.encode: long form length too big");const i=r>127?In(s.length/2|128):"";return In(n)+i+s+t},decode(n,t){const{Err:e}=Te;let r=0;if(n<0||n>256)throw new e("tlv.encode: wrong tag");if(t.length<2||t[r++]!==n)throw new e("tlv.decode: wrong tlv");const s=t[r++],i=!!(s&128);let u=0;if(!i)u=s;else{const d=s&127;if(!d)throw new e("tlv.decode(long): indefinite length not supported");if(d>4)throw new e("tlv.decode(long): byte length is too big");const b=t.subarray(r,r+d);if(b.length!==d)throw new e("tlv.decode: length bytes not complete");if(b[0]===0)throw new e("tlv.decode(long): zero leftmost byte");for(const B of b)u=u<<8|B;if(r+=d,u<128)throw new e("tlv.decode(long): not minimal encoding")}const w=t.subarray(r,r+u);if(w.length!==u)throw new e("tlv.decode: wrong value length");return{v:w,l:t.subarray(r+u)}}},_int:{encode(n){const{Err:t}=Te;if(n<Ue)throw new t("integer: negative integers are not allowed");let e=In(n);if(Number.parseInt(e[0],16)&8&&(e="00"+e),e.length&1)throw new t("unexpected DER parsing assertion: unpadded hex");return e},decode(n){const{Err:t}=Te;if(n[0]&128)throw new t("invalid signature integer: negative");if(n[0]===0&&!(n[1]&128))throw new t("invalid signature integer: unnecessary leading zero");return Wn(n)}},toSig(n){const{Err:t,_int:e,_tlv:r}=Te,s=dt("signature",n),{v:i,l:u}=r.decode(48,s);if(u.length)throw new t("invalid signature: left bytes after parsing");const{v:w,l:d}=r.decode(2,i),{v:b,l:B}=r.decode(2,d);if(B.length)throw new t("invalid signature: left bytes after parsing");return{r:e.decode(w),s:e.decode(b)}},hexFromSig(n){const{_tlv:t,_int:e}=Te,r=t.encode(2,e.encode(n.r)),s=t.encode(2,e.encode(n.s)),i=r+s;return t.encode(48,i)}},Ue=BigInt(0),cn=BigInt(1),as=BigInt(2),kn=BigInt(3),cu=BigInt(4);function rn(n,t){const{BYTES:e}=n;let r;if(typeof t=="bigint")r=t;else{let s=dt("private key",t);try{r=n.fromBytes(s)}catch{throw new Error(`invalid private key: expected ui8a of size ${e}, got ${typeof t}`)}}if(!n.isValidNot0(r))throw new Error("invalid private key: out of range [1..N-1]");return r}function uu(n,t={}){const e=_o("weierstrass",n,t),{Fp:r,Fn:s}=e;let i=e.CURVE;const{h:u,n:w}=i;En(t,{},{allowInfinityPoint:"boolean",clearCofactor:"function",isTorsionFree:"function",fromBytes:"function",toBytes:"function",endo:"object",wrapPrivateKey:"boolean"});const{endo:d}=t;if(d&&(!r.is0(i.a)||typeof d.beta!="bigint"||!Array.isArray(d.basises)))throw new Error('invalid endo: expected "beta": bigint and "basises": array');const b=us(r,s);function B(){if(!r.isOdd)throw new Error("compression is not supported: Field does not have .isOdd()")}function R(P,h,o){const{x:c,y:f}=h.toAffine(),l=r.toBytes(c);if(Ge(o,"isCompressed"),o){B();const g=!r.isOdd(f);return Be(cs(g),l)}else return Be(Uint8Array.of(4),l,r.toBytes(f))}function M(P){ye(P,void 0,"Point");const{publicKey:h,publicKeyUncompressed:o}=b,c=P.length,f=P[0],l=P.subarray(1);if(c===h&&(f===2||f===3)){const g=r.fromBytes(l);if(!r.isValid(g))throw new Error("bad point: is not on curve, wrong x");const y=U(g);let v;try{v=r.sqrt(y)}catch(m){const z=m instanceof Error?": "+m.message:"";throw new Error("bad point: is not on curve, sqrt error"+z)}B();const p=r.isOdd(v);return(f&1)===1!==p&&(v=r.neg(v)),{x:g,y:v}}else if(c===o&&f===4){const g=r.BYTES,y=r.fromBytes(l.subarray(0,g)),v=r.fromBytes(l.subarray(g,g*2));if(!C(y,v))throw new Error("bad point: is not on curve");return{x:y,y:v}}else throw new Error(`bad point: got length ${c}, expected compressed=${h} or uncompressed=${o}`)}const S=t.toBytes||R,A=t.fromBytes||M;function U(P){const h=r.sqr(P),o=r.mul(h,P);return r.add(r.add(o,r.mul(P,i.a)),i.b)}function C(P,h){const o=r.sqr(h),c=U(P);return r.eql(o,c)}if(!C(i.Gx,i.Gy))throw new Error("bad curve params: generator point");const I=r.mul(r.pow(i.a,kn),cu),N=r.mul(r.sqr(i.b),BigInt(27));if(r.is0(r.add(I,N)))throw new Error("bad curve params: a or b");function T(P,h,o=!1){if(!r.isValid(h)||o&&r.is0(h))throw new Error(`bad point coordinate ${P}`);return h}function V(P){if(!(P instanceof k))throw new Error("ProjectivePoint expected")}function X(P){if(!d||!d.basises)throw new Error("no endo");return su(P,d.basises,s.ORDER)}const G=Un((P,h)=>{const{X:o,Y:c,Z:f}=P;if(r.eql(f,r.ONE))return{x:o,y:c};const l=P.is0();h==null&&(h=l?r.ONE:r.inv(f));const g=r.mul(o,h),y=r.mul(c,h),v=r.mul(f,h);if(l)return{x:r.ZERO,y:r.ZERO};if(!r.eql(v,r.ONE))throw new Error("invZ was invalid");return{x:g,y}}),J=Un(P=>{if(P.is0()){if(t.allowInfinityPoint&&!r.is0(P.Y))return;throw new Error("bad point: ZERO")}const{x:h,y:o}=P.toAffine();if(!r.isValid(h)||!r.isValid(o))throw new Error("bad point: x or y not field elements");if(!C(h,o))throw new Error("bad point: equation left != right");if(!P.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0});function tt(P,h,o,c,f){return o=new k(r.mul(o.X,P),o.Y,o.Z),h=Cn(c,h),o=Cn(f,o),h.add(o)}class k{constructor(h,o,c){this.X=T("x",h),this.Y=T("y",o,!0),this.Z=T("z",c),Object.freeze(this)}static CURVE(){return i}static fromAffine(h){const{x:o,y:c}=h||{};if(!h||!r.isValid(o)||!r.isValid(c))throw new Error("invalid affine point");if(h instanceof k)throw new Error("projective point not allowed");return r.is0(o)&&r.is0(c)?k.ZERO:new k(o,c,r.ONE)}static fromBytes(h){const o=k.fromAffine(A(ye(h,void 0,"point")));return o.assertValidity(),o}static fromHex(h){return k.fromBytes(dt("pointHex",h))}get x(){return this.toAffine().x}get y(){return this.toAffine().y}precompute(h=8,o=!0){return q.createCache(this,h),o||this.multiply(kn),this}assertValidity(){J(this)}hasEvenY(){const{y:h}=this.toAffine();if(!r.isOdd)throw new Error("Field doesn't support isOdd");return!r.isOdd(h)}equals(h){V(h);const{X:o,Y:c,Z:f}=this,{X:l,Y:g,Z:y}=h,v=r.eql(r.mul(o,y),r.mul(l,f)),p=r.eql(r.mul(c,y),r.mul(g,f));return v&&p}negate(){return new k(this.X,r.neg(this.Y),this.Z)}double(){const{a:h,b:o}=i,c=r.mul(o,kn),{X:f,Y:l,Z:g}=this;let y=r.ZERO,v=r.ZERO,p=r.ZERO,a=r.mul(f,f),m=r.mul(l,l),z=r.mul(g,g),L=r.mul(f,l);return L=r.add(L,L),p=r.mul(f,g),p=r.add(p,p),y=r.mul(h,p),v=r.mul(c,z),v=r.add(y,v),y=r.sub(m,v),v=r.add(m,v),v=r.mul(y,v),y=r.mul(L,y),p=r.mul(c,p),z=r.mul(h,z),L=r.sub(a,z),L=r.mul(h,L),L=r.add(L,p),p=r.add(a,a),a=r.add(p,a),a=r.add(a,z),a=r.mul(a,L),v=r.add(v,a),z=r.mul(l,g),z=r.add(z,z),a=r.mul(z,L),y=r.sub(y,a),p=r.mul(z,m),p=r.add(p,p),p=r.add(p,p),new k(y,v,p)}add(h){V(h);const{X:o,Y:c,Z:f}=this,{X:l,Y:g,Z:y}=h;let v=r.ZERO,p=r.ZERO,a=r.ZERO;const m=i.a,z=r.mul(i.b,kn);let L=r.mul(o,l),K=r.mul(c,g),et=r.mul(f,y),Q=r.add(o,c),H=r.add(l,g);Q=r.mul(Q,H),H=r.add(L,K),Q=r.sub(Q,H),H=r.add(o,f);let Wt=r.add(l,y);return H=r.mul(H,Wt),Wt=r.add(L,et),H=r.sub(H,Wt),Wt=r.add(c,f),v=r.add(g,y),Wt=r.mul(Wt,v),v=r.add(K,et),Wt=r.sub(Wt,v),a=r.mul(m,H),v=r.mul(z,et),a=r.add(v,a),v=r.sub(K,a),a=r.add(K,a),p=r.mul(v,a),K=r.add(L,L),K=r.add(K,L),et=r.mul(m,et),H=r.mul(z,H),K=r.add(K,et),et=r.sub(L,et),et=r.mul(m,et),H=r.add(H,et),L=r.mul(K,H),p=r.add(p,L),L=r.mul(Wt,H),v=r.mul(Q,v),v=r.sub(v,L),L=r.mul(Q,K),a=r.mul(Wt,a),a=r.add(a,L),new k(v,p,a)}subtract(h){return this.add(h.negate())}is0(){return this.equals(k.ZERO)}multiply(h){const{endo:o}=t;if(!s.isValidNot0(h))throw new Error("invalid scalar: out of range");let c,f;const l=g=>q.cached(this,g,y=>Ve(k,y));if(o){const{k1neg:g,k1:y,k2neg:v,k2:p}=X(h),{p:a,f:m}=l(y),{p:z,f:L}=l(p);f=m.add(L),c=tt(o.beta,a,z,g,v)}else{const{p:g,f:y}=l(h);c=g,f=y}return Ve(k,[c,f])[0]}multiplyUnsafe(h){const{endo:o}=t,c=this;if(!s.isValid(h))throw new Error("invalid scalar: out of range");if(h===Ue||c.is0())return k.ZERO;if(h===cn)return c;if(q.hasCache(this))return this.multiply(h);if(o){const{k1neg:f,k1:l,k2neg:g,k2:y}=X(h),{p1:v,p2:p}=qa(k,c,l,y);return tt(o.beta,v,p,f,g)}else return q.unsafe(c,h)}multiplyAndAddUnsafe(h,o,c){const f=this.multiplyUnsafe(o).add(h.multiplyUnsafe(c));return f.is0()?void 0:f}toAffine(h){return G(this,h)}isTorsionFree(){const{isTorsionFree:h}=t;return u===cn?!0:h?h(k,this):q.unsafe(this,w).is0()}clearCofactor(){const{clearCofactor:h}=t;return u===cn?this:h?h(k,this):this.multiplyUnsafe(u)}isSmallOrder(){return this.multiplyUnsafe(u).is0()}toBytes(h=!0){return Ge(h,"isCompressed"),this.assertValidity(),S(k,this,h)}toHex(h=!0){return je(this.toBytes(h))}toString(){return`<Point ${this.is0()?"ZERO":this.toHex()}>`}get px(){return this.X}get py(){return this.X}get pz(){return this.Z}toRawBytes(h=!0){return this.toBytes(h)}_setWindowSize(h){this.precompute(h)}static normalizeZ(h){return Ve(k,h)}static msm(h,o){return Io(k,s,h,o)}static fromPrivateKey(h){return k.BASE.multiply(rn(s,h))}}k.BASE=new k(i.Gx,i.Gy,r.ONE),k.ZERO=new k(r.ZERO,r.ONE,r.ZERO),k.Fp=r,k.Fn=s;const Z=s.BITS,q=new Ao(k,t.endo?Math.ceil(Z/2):Z);return k.BASE.precompute(8),k}function cs(n){return Uint8Array.of(n?2:3)}function us(n,t){return{secretKey:t.BYTES,publicKey:1+n.BYTES,publicKeyUncompressed:1+2*n.BYTES,publicKeyHasPrefix:!0,signature:2*t.BYTES}}function fu(n,t={}){const{Fn:e}=n,r=t.randomBytes||Yr,s=Object.assign(us(n.Fp,e),{seed:Mo(e.ORDER)});function i(S){try{return!!rn(e,S)}catch{return!1}}function u(S,A){const{publicKey:U,publicKeyUncompressed:C}=s;try{const I=S.length;return A===!0&&I!==U||A===!1&&I!==C?!1:!!n.fromBytes(S)}catch{return!1}}function w(S=r(s.seed)){return Fa(ye(S,s.seed,"seed"),e.ORDER)}function d(S,A=!0){return n.BASE.multiply(rn(e,S)).toBytes(A)}function b(S){const A=w(S);return{secretKey:A,publicKey:d(A)}}function B(S){if(typeof S=="bigint")return!1;if(S instanceof n)return!0;const{secretKey:A,publicKey:U,publicKeyUncompressed:C}=s;if(e.allowedLengths||A===U)return;const I=dt("key",S).length;return I===U||I===C}function R(S,A,U=!0){if(B(S)===!0)throw new Error("first arg must be private key");if(B(A)===!1)throw new Error("second arg must be public key");const C=rn(e,S);return n.fromHex(A).multiply(C).toBytes(U)}return Object.freeze({getPublicKey:d,getSharedSecret:R,keygen:b,Point:n,utils:{isValidSecretKey:i,isValidPublicKey:u,randomSecretKey:w,isValidPrivateKey:i,randomPrivateKey:w,normPrivateKeyToScalar:S=>rn(e,S),precompute(S=8,A=n.BASE){return A.precompute(S,!1)}},lengths:s})}function hu(n,t,e={}){$s(t),En(e,{},{hmac:"function",lowS:"boolean",randomBytes:"function",bits2int:"function",bits2int_modN:"function"});const r=e.randomBytes||Yr,s=e.hmac||((o,...c)=>Zs(t,o,Be(...c))),{Fp:i,Fn:u}=n,{ORDER:w,BITS:d}=u,{keygen:b,getPublicKey:B,getSharedSecret:R,utils:M,lengths:S}=fu(n,e),A={prehash:!1,lowS:typeof e.lowS=="boolean"?e.lowS:!1,format:void 0,extraEntropy:!1},U="compact";function C(o){const c=w>>cn;return o>c}function I(o,c){if(!u.isValidNot0(c))throw new Error(`invalid signature ${o}: out of range 1..Point.Fn.ORDER`);return c}function N(o,c){qr(c);const f=S.signature,l=c==="compact"?f:c==="recovered"?f+1:void 0;return ye(o,l,`${c} signature`)}class T{constructor(c,f,l){this.r=I("r",c),this.s=I("s",f),l!=null&&(this.recovery=l),Object.freeze(this)}static fromBytes(c,f=U){N(c,f);let l;if(f==="der"){const{r:p,s:a}=Te.toSig(ye(c));return new T(p,a)}f==="recovered"&&(l=c[0],f="compact",c=c.subarray(1));const g=u.BYTES,y=c.subarray(0,g),v=c.subarray(g,g*2);return new T(u.fromBytes(y),u.fromBytes(v),l)}static fromHex(c,f){return this.fromBytes(Ln(c),f)}addRecoveryBit(c){return new T(this.r,this.s,c)}recoverPublicKey(c){const f=i.ORDER,{r:l,s:g,recovery:y}=this;if(y==null||![0,1,2,3].includes(y))throw new Error("recovery id invalid");if(w*as<f&&y>1)throw new Error("recovery id is ambiguous for h>1 curve");const p=y===2||y===3?l+w:l;if(!i.isValid(p))throw new Error("recovery id 2 or 3 invalid");const a=i.toBytes(p),m=n.fromBytes(Be(cs((y&1)===0),a)),z=u.inv(p),L=X(dt("msgHash",c)),K=u.create(-L*z),et=u.create(g*z),Q=n.BASE.multiplyUnsafe(K).add(m.multiplyUnsafe(et));if(Q.is0())throw new Error("point at infinify");return Q.assertValidity(),Q}hasHighS(){return C(this.s)}toBytes(c=U){if(qr(c),c==="der")return Ln(Te.hexFromSig(this));const f=u.toBytes(this.r),l=u.toBytes(this.s);if(c==="recovered"){if(this.recovery==null)throw new Error("recovery bit must be present");return Be(Uint8Array.of(this.recovery),f,l)}return Be(f,l)}toHex(c){return je(this.toBytes(c))}assertValidity(){}static fromCompact(c){return T.fromBytes(dt("sig",c),"compact")}static fromDER(c){return T.fromBytes(dt("sig",c),"der")}normalizeS(){return this.hasHighS()?new T(this.r,u.neg(this.s),this.recovery):this}toDERRawBytes(){return this.toBytes("der")}toDERHex(){return je(this.toBytes("der"))}toCompactRawBytes(){return this.toBytes("compact")}toCompactHex(){return je(this.toBytes("compact"))}}const V=e.bits2int||function(c){if(c.length>8192)throw new Error("input is too large");const f=Wn(c),l=c.length*8-d;return l>0?f>>BigInt(l):f},X=e.bits2int_modN||function(c){return u.create(V(c))},G=xn(d);function J(o){return Dr("num < 2^"+d,o,Ue,G),u.toBytes(o)}function tt(o,c){return ye(o,void 0,"message"),c?ye(t(o),void 0,"prehashed message"):o}function k(o,c,f){if(["recovered","canonical"].some(K=>K in f))throw new Error("sign() legacy options not supported");const{lowS:l,prehash:g,extraEntropy:y}=Nr(f,A);o=tt(o,g);const v=X(o),p=rn(u,c),a=[J(p),J(v)];if(y!=null&&y!==!1){const K=y===!0?r(S.secretKey):y;a.push(dt("extraEntropy",K))}const m=Be(...a),z=v;function L(K){const et=V(K);if(!u.isValidNot0(et))return;const Q=u.inv(et),H=n.BASE.multiply(et).toAffine(),Wt=u.create(H.x);if(Wt===Ue)return;const ct=u.create(Q*u.create(z+Wt*p));if(ct===Ue)return;let ft=(H.x===Wt?0:2)|Number(H.y&cn),mn=ct;return l&&C(ct)&&(mn=u.neg(ct),ft^=1),new T(Wt,mn,ft)}return{seed:m,k2sig:L}}function Z(o,c,f={}){o=dt("message",o);const{seed:l,k2sig:g}=k(o,c,f);return _a(t.outputLen,u.BYTES,s)(l,g)}function q(o){let c;const f=typeof o=="string"||Yn(o),l=!f&&o!==null&&typeof o=="object"&&typeof o.r=="bigint"&&typeof o.s=="bigint";if(!f&&!l)throw new Error("invalid signature, expected Uint8Array, hex string or Signature instance");if(l)c=new T(o.r,o.s);else if(f){try{c=T.fromBytes(dt("sig",o),"der")}catch(g){if(!(g instanceof Te.Err))throw g}if(!c)try{c=T.fromBytes(dt("sig",o),"compact")}catch{return!1}}return c||!1}function P(o,c,f,l={}){const{lowS:g,prehash:y,format:v}=Nr(l,A);if(f=dt("publicKey",f),c=tt(dt("message",c),y),"strict"in l)throw new Error("options.strict was renamed to lowS");const p=v===void 0?q(o):T.fromBytes(dt("sig",o),v);if(p===!1)return!1;try{const a=n.fromBytes(f);if(g&&p.hasHighS())return!1;const{r:m,s:z}=p,L=X(c),K=u.inv(z),et=u.create(L*K),Q=u.create(m*K),H=n.BASE.multiplyUnsafe(et).add(a.multiplyUnsafe(Q));return H.is0()?!1:u.create(H.x)===m}catch{return!1}}function h(o,c,f={}){const{prehash:l}=Nr(f,A);return c=tt(c,l),T.fromBytes(o,"recovered").recoverPublicKey(c).toBytes()}return Object.freeze({keygen:b,getPublicKey:B,getSharedSecret:R,utils:M,lengths:S,Point:n,sign:Z,verify:P,recoverPublicKey:h,Signature:T,hash:t})}function lu(n){const t={a:n.a,b:n.b,p:n.Fp.ORDER,n:n.n,h:n.h,Gx:n.Gx,Gy:n.Gy},e=n.Fp;let r=n.allowedPrivateKeyLengths?Array.from(new Set(n.allowedPrivateKeyLengths.map(u=>Math.ceil(u/2)))):void 0;const s=He(t.n,{BITS:n.nBitLength,allowedLengths:r,modFromBytes:n.wrapPrivateKey}),i={Fp:e,Fn:s,allowInfinityPoint:n.allowInfinityPoint,endo:n.endo,isTorsionFree:n.isTorsionFree,clearCofactor:n.clearCofactor,fromBytes:n.fromBytes,toBytes:n.toBytes};return{CURVE:t,curveOpts:i}}function du(n){const{CURVE:t,curveOpts:e}=lu(n),r={hmac:n.hmac,randomBytes:n.randomBytes,lowS:n.lowS,bits2int:n.bits2int,bits2int_modN:n.bits2int_modN};return{CURVE:t,curveOpts:e,hash:n.hash,ecdsaOpts:r}}function pu(n,t){const e=t.Point;return Object.assign({},t,{ProjectivePoint:e,CURVE:Object.assign({},n,xo(e.Fn.ORDER,e.Fn.BITS))})}function gu(n){const{CURVE:t,curveOpts:e,hash:r,ecdsaOpts:s}=du(n),i=uu(t,e),u=hu(i,r,s);return pu(n,u)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function mu(n,t){const e=r=>gu({...n,hash:r});return{...e(t),create:e}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const hi={p:BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),n:BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),h:BigInt(1),a:BigInt(0),b:BigInt(7),Gx:BigInt("0x79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798"),Gy:BigInt("0x483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8")},yu={beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),basises:[[BigInt("0x3086d221a7d46bcde86c90e49284eb15"),-BigInt("0xe4437ed6010e88286f547fa90abfe4c3")],[BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),BigInt("0x3086d221a7d46bcde86c90e49284eb15")]]},Wi=BigInt(2);function wu(n){const t=hi.p,e=BigInt(3),r=BigInt(6),s=BigInt(11),i=BigInt(22),u=BigInt(23),w=BigInt(44),d=BigInt(88),b=n*n*n%t,B=b*b*n%t,R=lt(B,e,t)*B%t,M=lt(R,e,t)*B%t,S=lt(M,Wi,t)*b%t,A=lt(S,s,t)*S%t,U=lt(A,i,t)*A%t,C=lt(U,w,t)*U%t,I=lt(C,d,t)*C%t,N=lt(I,w,t)*U%t,T=lt(N,e,t)*B%t,V=lt(T,u,t)*A%t,X=lt(V,r,t)*b%t,G=lt(X,Wi,t);if(!Pr.eql(Pr.sqr(G),n))throw new Error("Cannot find square root");return G}const Pr=He(hi.p,{sqrt:wu}),vu=mu({...hi,Fp:Pr,lowS:!0,endo:yu},Vs);Mn.utils.randomPrivateKey;Mn.getPublicKey;function Xi(n){try{return Mn.ExtendedPoint.fromHex(n),!0}catch{return!1}}const bu=(n,t)=>Mn.sign(n,t.slice(0,32));Mn.verify;const fs=n=>rt.Buffer.isBuffer(n)?n:n instanceof Uint8Array?rt.Buffer.from(n.buffer,n.byteOffset,n.byteLength):rt.Buffer.from(n);class xu{constructor(t){Object.assign(this,t)}encode(){return rt.Buffer.from(zo(Tn,this))}static decode(t){return Fo(Tn,this,t)}static decodeUnchecked(t){return Oo(Tn,this,t)}}const Tn=new Map;var hs;const Eu=32,De=32;function Mu(n){return n._bn!==void 0}let Ji=1;class W extends xu{constructor(t){if(super({}),this._bn=void 0,Mu(t))this._bn=t._bn;else{if(typeof t=="string"){const e=Se.decode(t);if(e.length!=De)throw new Error("Invalid public key input");this._bn=new Ni(e)}else this._bn=new Ni(t);if(this._bn.byteLength()>De)throw new Error("Invalid public key input")}}static unique(){const t=new W(Ji);return Ji+=1,new W(t.toBuffer())}equals(t){return this._bn.eq(t._bn)}toBase58(){return Se.encode(this.toBytes())}toJSON(){return this.toBase58()}toBytes(){const t=this.toBuffer();return new Uint8Array(t.buffer,t.byteOffset,t.byteLength)}toBuffer(){const t=this._bn.toArrayLike(rt.Buffer);if(t.length===De)return t;const e=rt.Buffer.alloc(32);return t.copy(e,32-t.length),e}get[Symbol.toStringTag](){return`PublicKey(${this.toString()})`}toString(){return this.toBase58()}static async createWithSeed(t,e,r){const s=rt.Buffer.concat([t.toBuffer(),rt.Buffer.from(e),r.toBuffer()]),i=Ci(s);return new W(i)}static createProgramAddressSync(t,e){let r=rt.Buffer.alloc(0);t.forEach(function(i){if(i.length>Eu)throw new TypeError("Max seed length exceeded");r=rt.Buffer.concat([r,fs(i)])}),r=rt.Buffer.concat([r,e.toBuffer(),rt.Buffer.from("ProgramDerivedAddress")]);const s=Ci(r);if(Xi(s))throw new Error("Invalid seeds, address must fall off the curve");return new W(s)}static async createProgramAddress(t,e){return this.createProgramAddressSync(t,e)}static findProgramAddressSync(t,e){let r=255,s;for(;r!=0;){try{const i=t.concat(rt.Buffer.from([r]));s=this.createProgramAddressSync(i,e)}catch(i){if(i instanceof TypeError)throw i;r--;continue}return[s,r]}throw new Error("Unable to find a viable program address nonce")}static async findProgramAddress(t,e){return this.findProgramAddressSync(t,e)}static isOnCurve(t){const e=new W(t);return Xi(e.toBytes())}}hs=W;W.default=new hs("11111111111111111111111111111111");Tn.set(W,{kind:"struct",fields:[["_bn","u256"]]});new W("BPFLoader1111111111111111111111111111111111");const On=1232,li=127,$r=64;class $n{constructor(t,e){this.staticAccountKeys=void 0,this.accountKeysFromLookups=void 0,this.staticAccountKeys=t,this.accountKeysFromLookups=e}keySegments(){const t=[this.staticAccountKeys];return this.accountKeysFromLookups&&(t.push(this.accountKeysFromLookups.writable),t.push(this.accountKeysFromLookups.readonly)),t}get(t){for(const e of this.keySegments()){if(t<e.length)return e[t];t-=e.length}}get length(){return this.keySegments().flat().length}compileInstructions(t){if(this.length>256)throw new Error("Account index overflow encountered during compilation");const r=new Map;this.keySegments().flat().forEach((i,u)=>{r.set(i.toBase58(),u)});const s=i=>{const u=r.get(i.toBase58());if(u===void 0)throw new Error("Encountered an unknown instruction account key during compilation");return u};return t.map(i=>({programIdIndex:s(i.programId),accountKeyIndexes:i.keys.map(u=>s(u.pubkey)),data:i.data}))}}const nt=(n="publicKey")=>ut(32,n),Su=(n="signature")=>ut(64,n),on=(n="string")=>{const t=$([Y("length"),Y("lengthPadding"),ut(Ye(Y(),-8),"chars")],n),e=t.decode.bind(t),r=t.encode.bind(t),s=t;return s.decode=(i,u)=>e(i,u).chars.toString(),s.encode=(i,u,w)=>{const d={chars:rt.Buffer.from(i,"utf8")};return r(d,u,w)},s.alloc=i=>Y().span+Y().span+rt.Buffer.from(i,"utf8").length,s},Bu=(n="authorized")=>$([nt("staker"),nt("withdrawer")],n),Au=(n="lockup")=>$([fe("unixTimestamp"),fe("epoch"),nt("custodian")],n),Iu=(n="voteInit")=>$([nt("nodePubkey"),nt("authorizedVoter"),nt("authorizedWithdrawer"),ot("commission")],n),_u=(n="voteAuthorizeWithSeedArgs")=>$([Y("voteAuthorizationType"),nt("currentAuthorityDerivedKeyOwnerPubkey"),on("currentAuthorityDerivedKeySeed"),nt("newAuthorized")],n);function de(n){let t=0,e=0;for(;;){let r=n.shift();if(t|=(r&127)<<e*7,e+=1,!(r&128))break}return t}function pe(n,t){let e=t;for(;;){let r=e&127;if(e>>=7,e==0){n.push(r);break}else r|=128,n.push(r)}}function Ae(n,t){if(!n)throw new Error(t||"Assertion failed")}class tr{constructor(t,e){this.payer=void 0,this.keyMetaMap=void 0,this.payer=t,this.keyMetaMap=e}static compile(t,e){const r=new Map,s=u=>{const w=u.toBase58();let d=r.get(w);return d===void 0&&(d={isSigner:!1,isWritable:!1,isInvoked:!1},r.set(w,d)),d},i=s(e);i.isSigner=!0,i.isWritable=!0;for(const u of t){s(u.programId).isInvoked=!0;for(const w of u.keys){const d=s(w.pubkey);d.isSigner||(d.isSigner=w.isSigner),d.isWritable||(d.isWritable=w.isWritable)}}return new tr(e,r)}getMessageComponents(){const t=[...this.keyMetaMap.entries()];Ae(t.length<=256,"Max static account keys length exceeded");const e=t.filter(([,d])=>d.isSigner&&d.isWritable),r=t.filter(([,d])=>d.isSigner&&!d.isWritable),s=t.filter(([,d])=>!d.isSigner&&d.isWritable),i=t.filter(([,d])=>!d.isSigner&&!d.isWritable),u={numRequiredSignatures:e.length+r.length,numReadonlySignedAccounts:r.length,numReadonlyUnsignedAccounts:i.length};{Ae(e.length>0,"Expected at least one writable signer key");const[d]=e[0];Ae(d===this.payer.toBase58(),"Expected first writable signer key to be the fee payer")}const w=[...e.map(([d])=>new W(d)),...r.map(([d])=>new W(d)),...s.map(([d])=>new W(d)),...i.map(([d])=>new W(d))];return[u,w]}extractTableLookup(t){const[e,r]=this.drainKeysFoundInLookupTable(t.state.addresses,u=>!u.isSigner&&!u.isInvoked&&u.isWritable),[s,i]=this.drainKeysFoundInLookupTable(t.state.addresses,u=>!u.isSigner&&!u.isInvoked&&!u.isWritable);if(!(e.length===0&&s.length===0))return[{accountKey:t.key,writableIndexes:e,readonlyIndexes:s},{writable:r,readonly:i}]}drainKeysFoundInLookupTable(t,e){const r=new Array,s=new Array;for(const[i,u]of this.keyMetaMap.entries())if(e(u)){const w=new W(i),d=t.findIndex(b=>b.equals(w));d>=0&&(Ae(d<256,"Max lookup table index exceeded"),r.push(d),s.push(w),this.keyMetaMap.delete(i))}return[r,s]}}const ls="Reached end of buffer unexpectedly";function Le(n){if(n.length===0)throw new Error(ls);return n.shift()}function ge(n,...t){const[e]=t;if(t.length===2?e+(t[1]??0)>n.length:e>=n.length)throw new Error(ls);return n.splice(...t)}class Zn{constructor(t){this.header=void 0,this.accountKeys=void 0,this.recentBlockhash=void 0,this.instructions=void 0,this.indexToProgramIds=new Map,this.header=t.header,this.accountKeys=t.accountKeys.map(e=>new W(e)),this.recentBlockhash=t.recentBlockhash,this.instructions=t.instructions,this.instructions.forEach(e=>this.indexToProgramIds.set(e.programIdIndex,this.accountKeys[e.programIdIndex]))}get version(){return"legacy"}get staticAccountKeys(){return this.accountKeys}get compiledInstructions(){return this.instructions.map(t=>({programIdIndex:t.programIdIndex,accountKeyIndexes:t.accounts,data:Se.decode(t.data)}))}get addressTableLookups(){return[]}getAccountKeys(){return new $n(this.staticAccountKeys)}static compile(t){const e=tr.compile(t.instructions,t.payerKey),[r,s]=e.getMessageComponents(),u=new $n(s).compileInstructions(t.instructions).map(w=>({programIdIndex:w.programIdIndex,accounts:w.accountKeyIndexes,data:Se.encode(w.data)}));return new Zn({header:r,accountKeys:s,recentBlockhash:t.recentBlockhash,instructions:u})}isAccountSigner(t){return t<this.header.numRequiredSignatures}isAccountWritable(t){const e=this.header.numRequiredSignatures;if(t>=this.header.numRequiredSignatures){const r=t-e,i=this.accountKeys.length-e-this.header.numReadonlyUnsignedAccounts;return r<i}else{const r=e-this.header.numReadonlySignedAccounts;return t<r}}isProgramId(t){return this.indexToProgramIds.has(t)}programIds(){return[...this.indexToProgramIds.values()]}nonProgramIds(){return this.accountKeys.filter((t,e)=>!this.isProgramId(e))}serialize(){const t=this.accountKeys.length;let e=[];pe(e,t);const r=this.instructions.map(R=>{const{accounts:M,programIdIndex:S}=R,A=Array.from(Se.decode(R.data));let U=[];pe(U,M.length);let C=[];return pe(C,A.length),{programIdIndex:S,keyIndicesCount:rt.Buffer.from(U),keyIndices:M,dataLength:rt.Buffer.from(C),data:A}});let s=[];pe(s,r.length);let i=rt.Buffer.alloc(On);rt.Buffer.from(s).copy(i);let u=s.length;r.forEach(R=>{const S=$([ot("programIdIndex"),ut(R.keyIndicesCount.length,"keyIndicesCount"),se(ot("keyIndex"),R.keyIndices.length,"keyIndices"),ut(R.dataLength.length,"dataLength"),se(ot("userdatum"),R.data.length,"data")]).encode(R,i,u);u+=S}),i=i.slice(0,u);const w=$([ut(1,"numRequiredSignatures"),ut(1,"numReadonlySignedAccounts"),ut(1,"numReadonlyUnsignedAccounts"),ut(e.length,"keyCount"),se(nt("key"),t,"keys"),nt("recentBlockhash")]),d={numRequiredSignatures:rt.Buffer.from([this.header.numRequiredSignatures]),numReadonlySignedAccounts:rt.Buffer.from([this.header.numReadonlySignedAccounts]),numReadonlyUnsignedAccounts:rt.Buffer.from([this.header.numReadonlyUnsignedAccounts]),keyCount:rt.Buffer.from(e),keys:this.accountKeys.map(R=>fs(R.toBytes())),recentBlockhash:Se.decode(this.recentBlockhash)};let b=rt.Buffer.alloc(2048);const B=w.encode(d,b);return i.copy(b,B),b.slice(0,B+i.length)}static from(t){let e=[...t];const r=Le(e);if(r!==(r&li))throw new Error("Versioned messages must be deserialized with VersionedMessage.deserialize()");const s=Le(e),i=Le(e),u=de(e);let w=[];for(let M=0;M<u;M++){const S=ge(e,0,De);w.push(new W(rt.Buffer.from(S)))}const d=ge(e,0,De),b=de(e);let B=[];for(let M=0;M<b;M++){const S=Le(e),A=de(e),U=ge(e,0,A),C=de(e),I=ge(e,0,C),N=Se.encode(rt.Buffer.from(I));B.push({programIdIndex:S,accounts:U,data:N})}const R={header:{numRequiredSignatures:r,numReadonlySignedAccounts:s,numReadonlyUnsignedAccounts:i},recentBlockhash:Se.encode(rt.Buffer.from(d)),accountKeys:w,instructions:B};return new Zn(R)}}class Vn{constructor(t){this.header=void 0,this.staticAccountKeys=void 0,this.recentBlockhash=void 0,this.compiledInstructions=void 0,this.addressTableLookups=void 0,this.header=t.header,this.staticAccountKeys=t.staticAccountKeys,this.recentBlockhash=t.recentBlockhash,this.compiledInstructions=t.compiledInstructions,this.addressTableLookups=t.addressTableLookups}get version(){return 0}get numAccountKeysFromLookups(){let t=0;for(const e of this.addressTableLookups)t+=e.readonlyIndexes.length+e.writableIndexes.length;return t}getAccountKeys(t){let e;if(t&&"accountKeysFromLookups"in t&&t.accountKeysFromLookups){if(this.numAccountKeysFromLookups!=t.accountKeysFromLookups.writable.length+t.accountKeysFromLookups.readonly.length)throw new Error("Failed to get account keys because of a mismatch in the number of account keys from lookups");e=t.accountKeysFromLookups}else if(t&&"addressLookupTableAccounts"in t&&t.addressLookupTableAccounts)e=this.resolveAddressTableLookups(t.addressLookupTableAccounts);else if(this.addressTableLookups.length>0)throw new Error("Failed to get account keys because address table lookups were not resolved");return new $n(this.staticAccountKeys,e)}isAccountSigner(t){return t<this.header.numRequiredSignatures}isAccountWritable(t){const e=this.header.numRequiredSignatures,r=this.staticAccountKeys.length;if(t>=r){const s=t-r,i=this.addressTableLookups.reduce((u,w)=>u+w.writableIndexes.length,0);return s<i}else if(t>=this.header.numRequiredSignatures){const s=t-e,u=r-e-this.header.numReadonlyUnsignedAccounts;return s<u}else{const s=e-this.header.numReadonlySignedAccounts;return t<s}}resolveAddressTableLookups(t){const e={writable:[],readonly:[]};for(const r of this.addressTableLookups){const s=t.find(i=>i.key.equals(r.accountKey));if(!s)throw new Error(`Failed to find address lookup table account for table key ${r.accountKey.toBase58()}`);for(const i of r.writableIndexes)if(i<s.state.addresses.length)e.writable.push(s.state.addresses[i]);else throw new Error(`Failed to find address for index ${i} in address lookup table ${r.accountKey.toBase58()}`);for(const i of r.readonlyIndexes)if(i<s.state.addresses.length)e.readonly.push(s.state.addresses[i]);else throw new Error(`Failed to find address for index ${i} in address lookup table ${r.accountKey.toBase58()}`)}return e}static compile(t){const e=tr.compile(t.instructions,t.payerKey),r=new Array,s={writable:new Array,readonly:new Array},i=t.addressLookupTableAccounts||[];for(const B of i){const R=e.extractTableLookup(B);if(R!==void 0){const[M,{writable:S,readonly:A}]=R;r.push(M),s.writable.push(...S),s.readonly.push(...A)}}const[u,w]=e.getMessageComponents(),b=new $n(w,s).compileInstructions(t.instructions);return new Vn({header:u,staticAccountKeys:w,recentBlockhash:t.recentBlockhash,compiledInstructions:b,addressTableLookups:r})}serialize(){const t=Array();pe(t,this.staticAccountKeys.length);const e=this.serializeInstructions(),r=Array();pe(r,this.compiledInstructions.length);const s=this.serializeAddressTableLookups(),i=Array();pe(i,this.addressTableLookups.length);const u=$([ot("prefix"),$([ot("numRequiredSignatures"),ot("numReadonlySignedAccounts"),ot("numReadonlyUnsignedAccounts")],"header"),ut(t.length,"staticAccountKeysLength"),se(nt(),this.staticAccountKeys.length,"staticAccountKeys"),nt("recentBlockhash"),ut(r.length,"instructionsLength"),ut(e.length,"serializedInstructions"),ut(i.length,"addressTableLookupsLength"),ut(s.length,"serializedAddressTableLookups")]),w=new Uint8Array(On),b=u.encode({prefix:128,header:this.header,staticAccountKeysLength:new Uint8Array(t),staticAccountKeys:this.staticAccountKeys.map(B=>B.toBytes()),recentBlockhash:Se.decode(this.recentBlockhash),instructionsLength:new Uint8Array(r),serializedInstructions:e,addressTableLookupsLength:new Uint8Array(i),serializedAddressTableLookups:s},w);return w.slice(0,b)}serializeInstructions(){let t=0;const e=new Uint8Array(On);for(const r of this.compiledInstructions){const s=Array();pe(s,r.accountKeyIndexes.length);const i=Array();pe(i,r.data.length);const u=$([ot("programIdIndex"),ut(s.length,"encodedAccountKeyIndexesLength"),se(ot(),r.accountKeyIndexes.length,"accountKeyIndexes"),ut(i.length,"encodedDataLength"),ut(r.data.length,"data")]);t+=u.encode({programIdIndex:r.programIdIndex,encodedAccountKeyIndexesLength:new Uint8Array(s),accountKeyIndexes:r.accountKeyIndexes,encodedDataLength:new Uint8Array(i),data:r.data},e,t)}return e.slice(0,t)}serializeAddressTableLookups(){let t=0;const e=new Uint8Array(On);for(const r of this.addressTableLookups){const s=Array();pe(s,r.writableIndexes.length);const i=Array();pe(i,r.readonlyIndexes.length);const u=$([nt("accountKey"),ut(s.length,"encodedWritableIndexesLength"),se(ot(),r.writableIndexes.length,"writableIndexes"),ut(i.length,"encodedReadonlyIndexesLength"),se(ot(),r.readonlyIndexes.length,"readonlyIndexes")]);t+=u.encode({accountKey:r.accountKey.toBytes(),encodedWritableIndexesLength:new Uint8Array(s),writableIndexes:r.writableIndexes,encodedReadonlyIndexesLength:new Uint8Array(i),readonlyIndexes:r.readonlyIndexes},e,t)}return e.slice(0,t)}static deserialize(t){let e=[...t];const r=Le(e),s=r&li;Ae(r!==s,"Expected versioned message but received legacy message");const i=s;Ae(i===0,`Expected versioned message with version 0 but found version ${i}`);const u={numRequiredSignatures:Le(e),numReadonlySignedAccounts:Le(e),numReadonlyUnsignedAccounts:Le(e)},w=[],d=de(e);for(let A=0;A<d;A++)w.push(new W(ge(e,0,De)));const b=Se.encode(ge(e,0,De)),B=de(e),R=[];for(let A=0;A<B;A++){const U=Le(e),C=de(e),I=ge(e,0,C),N=de(e),T=new Uint8Array(ge(e,0,N));R.push({programIdIndex:U,accountKeyIndexes:I,data:T})}const M=de(e),S=[];for(let A=0;A<M;A++){const U=new W(ge(e,0,De)),C=de(e),I=ge(e,0,C),N=de(e),T=ge(e,0,N);S.push({accountKey:U,writableIndexes:I,readonlyIndexes:T})}return new Vn({header:u,staticAccountKeys:w,recentBlockhash:b,compiledInstructions:R,addressTableLookups:S})}}const ds={deserializeMessageVersion(n){const t=n[0],e=t&li;return e===t?"legacy":e},deserialize:n=>{const t=ds.deserializeMessageVersion(n);if(t==="legacy")return Zn.from(n);if(t===0)return Vn.deserialize(n);throw new Error(`Transaction message version ${t} deserialization is not supported`)}};rt.Buffer.alloc($r).fill(0);class di{get version(){return this.message.version}constructor(t,e){if(this.signatures=void 0,this.message=void 0,e!==void 0)Ae(e.length===t.header.numRequiredSignatures,"Expected signatures length to be equal to the number of required signatures"),this.signatures=e;else{const r=[];for(let s=0;s<t.header.numRequiredSignatures;s++)r.push(new Uint8Array($r));this.signatures=r}this.message=t}serialize(){const t=this.message.serialize(),e=Array();pe(e,this.signatures.length);const r=$([ut(e.length,"encodedSignaturesLength"),se(Su(),this.signatures.length,"signatures"),ut(t.length,"serializedMessage")]),s=new Uint8Array(2048),i=r.encode({encodedSignaturesLength:new Uint8Array(e),signatures:this.signatures,serializedMessage:t},s);return s.slice(0,i)}static deserialize(t){let e=[...t];const r=[],s=de(e);for(let u=0;u<s;u++)r.push(new Uint8Array(ge(e,0,$r)));const i=ds.deserialize(new Uint8Array(e));return new di(i,r)}sign(t){const e=this.message.serialize(),r=this.message.staticAccountKeys.slice(0,this.message.header.numRequiredSignatures);for(const s of t){const i=r.findIndex(u=>u.equals(s.publicKey));Ae(i>=0,`Cannot sign with non signer key ${s.publicKey.toBase58()}`),this.signatures[i]=bu(e,s.secretKey)}}addSignature(t,e){Ae(e.byteLength===64,"Signature must be 64 bytes long");const s=this.message.staticAccountKeys.slice(0,this.message.header.numRequiredSignatures).findIndex(i=>i.equals(t));Ae(s>=0,`Can not add signature; \`${t.toBase58()}\` is not required to sign this transaction`),this.signatures[s]=e}}new W("SysvarC1ock11111111111111111111111111111111");new W("SysvarEpochSchedu1e111111111111111111111111");new W("Sysvar1nstructions1111111111111111111111111");new W("SysvarRecentB1ockHashes11111111111111111111");new W("SysvarRent111111111111111111111111111111111");new W("SysvarRewards111111111111111111111111111111");new W("SysvarS1otHashes111111111111111111111111111");new W("SysvarS1otHistory11111111111111111111111111");new W("SysvarStakeHistory1111111111111111111111111");const ku=Jt("lamportsPerSignature"),Ru=$([Y("version"),Y("state"),nt("authorizedPubkey"),nt("nonce"),$([ku],"feeCalculator")]);Ru.span;function hn(n){const t=ut(8,n),e=t.decode.bind(t),r=t.encode.bind(t),s=t,i=jc();return s.decode=(u,w)=>{const d=e(u,w);return i.decode(d)},s.encode=(u,w,d)=>{const b=i.encode(u);return r(b,w,d)},s}Object.freeze({Create:{index:0,layout:$([Y("instruction"),fe("lamports"),fe("space"),nt("programId")])},Assign:{index:1,layout:$([Y("instruction"),nt("programId")])},Transfer:{index:2,layout:$([Y("instruction"),hn("lamports")])},CreateWithSeed:{index:3,layout:$([Y("instruction"),nt("base"),on("seed"),fe("lamports"),fe("space"),nt("programId")])},AdvanceNonceAccount:{index:4,layout:$([Y("instruction")])},WithdrawNonceAccount:{index:5,layout:$([Y("instruction"),fe("lamports")])},InitializeNonceAccount:{index:6,layout:$([Y("instruction"),nt("authorized")])},AuthorizeNonceAccount:{index:7,layout:$([Y("instruction"),nt("authorized")])},Allocate:{index:8,layout:$([Y("instruction"),fe("space")])},AllocateWithSeed:{index:9,layout:$([Y("instruction"),nt("base"),on("seed"),fe("space"),nt("programId")])},AssignWithSeed:{index:10,layout:$([Y("instruction"),nt("base"),on("seed"),nt("programId")])},TransferWithSeed:{index:11,layout:$([Y("instruction"),hn("lamports"),on("seed"),nt("programId")])},UpgradeNonceAccount:{index:12,layout:$([Y("instruction")])}});new W("11111111111111111111111111111111");new W("BPFLoader2111111111111111111111111111111111");$([Y("typeIndex"),hn("deactivationSlot"),Jt("lastExtendedSlot"),ot("lastExtendedStartIndex"),ot(),se(nt(),Ye(ot(),-1),"authority")]);const pt=An(ui(W),O(),n=>new W(n)),ps=fi([O(),ht("base64")]),pi=An(ui(rt.Buffer),ps,n=>rt.Buffer.from(n[0],"base64"));function gs(n){return ae([_({jsonrpc:ht("2.0"),id:O(),result:n}),_({jsonrpc:ht("2.0"),id:O(),error:_({code:pn(),message:O(),data:j(Qc())})})])}const Tu=gs(pn());function at(n){return An(gs(n),Tu,t=>"error"in t?t:{...t,result:bn(t.result,n)})}function xe(n){return at(_({context:_({slot:x()}),value:n}))}function er(n){return _({context:_({slot:x()}),value:n})}const Ou=_({foundation:x(),foundationTerm:x(),initial:x(),taper:x(),terminal:x()});at(F(D(_({epoch:x(),effectiveSlot:x(),amount:x(),postBalance:x(),commission:j(D(x()))}))));const Lu=F(_({slot:x(),prioritizationFee:x()})),Uu=_({total:x(),validator:x(),foundation:x(),epoch:x()}),Cu=_({epoch:x(),slotIndex:x(),slotsInEpoch:x(),absoluteSlot:x(),blockHeight:j(x()),transactionCount:j(x())}),Nu=_({slotsPerEpoch:x(),leaderScheduleSlotOffset:x(),warmup:Ie(),firstNormalEpoch:x(),firstNormalSlot:x()}),zu=os(O(),F(x())),Je=D(ae([_({}),O()])),Fu=_({err:Je}),Du=ht("receivedSignature");_({"solana-core":O(),"feature-set":j(x())});const Ku=_({program:O(),programId:pt,parsed:pn()}),qu=_({programId:pt,accounts:F(pt),data:O()});xe(_({err:D(ae([_({}),O()])),logs:D(F(O())),accounts:j(D(F(D(_({executable:Ie(),owner:O(),lamports:x(),data:F(O()),rentEpoch:j(x())}))))),unitsConsumed:j(x()),returnData:j(D(_({programId:O(),data:fi([O(),ht("base64")])}))),innerInstructions:j(D(F(_({index:x(),instructions:F(ae([Ku,qu]))}))))}));xe(_({byIdentity:os(O(),F(x())),range:_({firstSlot:x(),lastSlot:x()})}));at(Ou);at(Uu);at(Lu);at(Cu);at(Nu);at(zu);at(x());xe(_({total:x(),circulating:x(),nonCirculating:x(),nonCirculatingAccounts:F(pt)}));const Pu=_({amount:O(),uiAmount:D(x()),decimals:x(),uiAmountString:j(O())});xe(F(_({address:pt,amount:O(),uiAmount:D(x()),decimals:x(),uiAmountString:j(O())})));xe(F(_({pubkey:pt,account:_({executable:Ie(),owner:pt,lamports:x(),data:pi,rentEpoch:x()})})));const Zr=_({program:O(),parsed:pn(),space:x()});xe(F(_({pubkey:pt,account:_({executable:Ie(),owner:pt,lamports:x(),data:Zr,rentEpoch:x()})})));xe(F(_({lamports:x(),address:pt})));const gi=_({executable:Ie(),owner:pt,lamports:x(),data:pi,rentEpoch:x()});_({pubkey:pt,account:gi});const $u=An(ae([ui(rt.Buffer),Zr]),ae([ps,Zr]),n=>Array.isArray(n)?bn(n,pi):n),Zu=_({executable:Ie(),owner:pt,lamports:x(),data:$u,rentEpoch:x()});_({pubkey:pt,account:Zu});_({state:ae([ht("active"),ht("inactive"),ht("activating"),ht("deactivating")]),active:x(),inactive:x()});at(F(_({signature:O(),slot:x(),err:Je,memo:D(O()),blockTime:j(D(x()))})));at(F(_({signature:O(),slot:x(),err:Je,memo:D(O()),blockTime:j(D(x()))})));_({subscription:x(),result:er(gi)});const Vu=_({pubkey:pt,account:gi});_({subscription:x(),result:er(Vu)});const ju=_({parent:x(),slot:x(),root:x()});_({subscription:x(),result:ju});const Yu=ae([_({type:ae([ht("firstShredReceived"),ht("completed"),ht("optimisticConfirmation"),ht("root")]),slot:x(),timestamp:x()}),_({type:ht("createdBank"),parent:x(),slot:x(),timestamp:x()}),_({type:ht("frozen"),slot:x(),timestamp:x(),stats:_({numTransactionEntries:x(),numSuccessfulTransactions:x(),numFailedTransactions:x(),maxTransactionsPerEntry:x()})}),_({type:ht("dead"),slot:x(),timestamp:x(),err:O()})]);_({subscription:x(),result:Yu});_({subscription:x(),result:er(ae([Fu,Du]))});_({subscription:x(),result:x()});_({pubkey:O(),gossip:D(O()),tpu:D(O()),rpc:D(O()),version:D(O())});const Qi=_({votePubkey:O(),nodePubkey:O(),activatedStake:x(),epochVoteAccount:Ie(),epochCredits:F(fi([x(),x(),x()])),commission:x(),lastVote:x(),rootSlot:D(x())});at(_({current:F(Qi),delinquent:F(Qi)}));const Gu=ae([ht("processed"),ht("confirmed"),ht("finalized")]),Hu=_({slot:x(),confirmations:D(x()),err:Je,confirmationStatus:j(Gu)});xe(F(D(Hu)));at(x());const ms=_({accountKey:pt,writableIndexes:F(x()),readonlyIndexes:F(x())}),mi=_({signatures:F(O()),message:_({accountKeys:F(O()),header:_({numRequiredSignatures:x(),numReadonlySignedAccounts:x(),numReadonlyUnsignedAccounts:x()}),instructions:F(_({accounts:F(x()),data:O(),programIdIndex:x()})),recentBlockhash:O(),addressTableLookups:j(F(ms))})}),ys=_({pubkey:pt,signer:Ie(),writable:Ie(),source:j(ae([ht("transaction"),ht("lookupTable")]))}),ws=_({accountKeys:F(ys),signatures:F(O())}),vs=_({parsed:pn(),program:O(),programId:pt}),bs=_({accounts:F(pt),data:O(),programId:pt}),Wu=ae([bs,vs]),Xu=ae([_({parsed:pn(),program:O(),programId:O()}),_({accounts:F(O()),data:O(),programId:O()})]),xs=An(Wu,Xu,n=>"accounts"in n?bn(n,bs):bn(n,vs)),Es=_({signatures:F(O()),message:_({accountKeys:F(ys),instructions:F(xs),recentBlockhash:O(),addressTableLookups:j(D(F(ms)))})}),jn=_({accountIndex:x(),mint:O(),owner:j(O()),programId:j(O()),uiTokenAmount:Pu}),Ms=_({writable:F(pt),readonly:F(pt)}),nr=_({err:Je,fee:x(),innerInstructions:j(D(F(_({index:x(),instructions:F(_({accounts:F(x()),data:O(),programIdIndex:x()}))})))),preBalances:F(x()),postBalances:F(x()),logMessages:j(D(F(O()))),preTokenBalances:j(D(F(jn))),postTokenBalances:j(D(F(jn))),loadedAddresses:j(Ms),computeUnitsConsumed:j(x()),costUnits:j(x())}),yi=_({err:Je,fee:x(),innerInstructions:j(D(F(_({index:x(),instructions:F(xs)})))),preBalances:F(x()),postBalances:F(x()),logMessages:j(D(F(O()))),preTokenBalances:j(D(F(jn))),postTokenBalances:j(D(F(jn))),loadedAddresses:j(Ms),computeUnitsConsumed:j(x()),costUnits:j(x())}),gn=ae([ht(0),ht("legacy")]),Qe=_({pubkey:O(),lamports:x(),postBalance:D(x()),rewardType:D(O()),commission:j(D(x()))});at(D(_({blockhash:O(),previousBlockhash:O(),parentSlot:x(),transactions:F(_({transaction:mi,meta:D(nr),version:j(gn)})),rewards:j(F(Qe)),blockTime:D(x()),blockHeight:D(x())})));at(D(_({blockhash:O(),previousBlockhash:O(),parentSlot:x(),rewards:j(F(Qe)),blockTime:D(x()),blockHeight:D(x())})));at(D(_({blockhash:O(),previousBlockhash:O(),parentSlot:x(),transactions:F(_({transaction:ws,meta:D(nr),version:j(gn)})),rewards:j(F(Qe)),blockTime:D(x()),blockHeight:D(x())})));at(D(_({blockhash:O(),previousBlockhash:O(),parentSlot:x(),transactions:F(_({transaction:Es,meta:D(yi),version:j(gn)})),rewards:j(F(Qe)),blockTime:D(x()),blockHeight:D(x())})));at(D(_({blockhash:O(),previousBlockhash:O(),parentSlot:x(),transactions:F(_({transaction:ws,meta:D(yi),version:j(gn)})),rewards:j(F(Qe)),blockTime:D(x()),blockHeight:D(x())})));at(D(_({blockhash:O(),previousBlockhash:O(),parentSlot:x(),rewards:j(F(Qe)),blockTime:D(x()),blockHeight:D(x())})));at(D(_({blockhash:O(),previousBlockhash:O(),parentSlot:x(),transactions:F(_({transaction:mi,meta:D(nr)})),rewards:j(F(Qe)),blockTime:D(x())})));at(D(_({blockhash:O(),previousBlockhash:O(),parentSlot:x(),signatures:F(O()),blockTime:D(x())})));at(D(_({slot:x(),meta:D(nr),blockTime:j(D(x())),transaction:mi,version:j(gn)})));at(D(_({slot:x(),transaction:Es,meta:D(yi),blockTime:j(D(x())),version:j(gn)})));xe(_({blockhash:O(),lastValidBlockHeight:x()}));xe(Ie());const Ju=_({slot:x(),numTransactions:x(),numSlots:x(),samplePeriodSecs:x()});at(F(Ju));xe(D(_({feeCalculator:_({lamportsPerSignature:x()})})));at(O());at(O());const Qu=_({err:Je,logs:F(O()),signature:O()});_({result:er(Qu),subscription:x()});Object.freeze({CreateLookupTable:{index:0,layout:$([Y("instruction"),hn("recentSlot"),ot("bumpSeed")])},FreezeLookupTable:{index:1,layout:$([Y("instruction")])},ExtendLookupTable:{index:2,layout:$([Y("instruction"),hn(),se(nt(),Ye(Y(),-8),"addresses")])},DeactivateLookupTable:{index:3,layout:$([Y("instruction")])},CloseLookupTable:{index:4,layout:$([Y("instruction")])}});new W("AddressLookupTab1e1111111111111111111111111");Object.freeze({RequestUnits:{index:0,layout:$([ot("instruction"),Y("units"),Y("additionalFee")])},RequestHeapFrame:{index:1,layout:$([ot("instruction"),Y("bytes")])},SetComputeUnitLimit:{index:2,layout:$([ot("instruction"),Y("units")])},SetComputeUnitPrice:{index:3,layout:$([ot("instruction"),hn("microLamports")])}});new W("ComputeBudget111111111111111111111111111111");$([ot("numSignatures"),ot("padding"),le("signatureOffset"),le("signatureInstructionIndex"),le("publicKeyOffset"),le("publicKeyInstructionIndex"),le("messageDataOffset"),le("messageDataSize"),le("messageInstructionIndex")]);new W("Ed25519SigVerify111111111111111111111111111");vu.utils.isValidPrivateKey;$([ot("numSignatures"),le("signatureOffset"),ot("signatureInstructionIndex"),le("ethAddressOffset"),ot("ethAddressInstructionIndex"),le("messageDataOffset"),le("messageDataSize"),ot("messageInstructionIndex"),ut(20,"ethAddress"),ut(64,"signature"),ot("recoveryId")]);new W("KeccakSecp256k11111111111111111111111111111");var Ss;new W("StakeConfig11111111111111111111111111111111");class Bs{constructor(t,e,r){this.unixTimestamp=void 0,this.epoch=void 0,this.custodian=void 0,this.unixTimestamp=t,this.epoch=e,this.custodian=r}}Ss=Bs;Bs.default=new Ss(0,0,W.default);Object.freeze({Initialize:{index:0,layout:$([Y("instruction"),Bu(),Au()])},Authorize:{index:1,layout:$([Y("instruction"),nt("newAuthorized"),Y("stakeAuthorizationType")])},Delegate:{index:2,layout:$([Y("instruction")])},Split:{index:3,layout:$([Y("instruction"),fe("lamports")])},Withdraw:{index:4,layout:$([Y("instruction"),fe("lamports")])},Deactivate:{index:5,layout:$([Y("instruction")])},Merge:{index:7,layout:$([Y("instruction")])},AuthorizeWithSeed:{index:8,layout:$([Y("instruction"),nt("newAuthorized"),Y("stakeAuthorizationType"),on("authoritySeed"),nt("authorityOwner")])}});new W("Stake11111111111111111111111111111111111111");Object.freeze({InitializeAccount:{index:0,layout:$([Y("instruction"),Iu()])},Authorize:{index:1,layout:$([Y("instruction"),nt("newAuthorized"),Y("voteAuthorizationType")])},Withdraw:{index:3,layout:$([Y("instruction"),fe("lamports")])},UpdateValidatorIdentity:{index:4,layout:$([Y("instruction")])},AuthorizeWithSeed:{index:10,layout:$([Y("instruction"),_u()])}});new W("Vote111111111111111111111111111111111111111");new W("Va1idator1nfo111111111111111111111111111111");_({name:O(),website:j(O()),details:j(O()),iconUrl:j(O()),keybaseUsername:j(O())});new W("Vote111111111111111111111111111111111111111");$([nt("nodePubkey"),nt("authorizedWithdrawer"),ot("commission"),Jt(),se($([Jt("slot"),Y("confirmationCount")]),Ye(Y(),-8),"votes"),ot("rootSlotValid"),Jt("rootSlot"),Jt(),se($([Jt("epoch"),nt("authorizedVoter")]),Ye(Y(),-8),"authorizedVoters"),$([se($([nt("authorizedPubkey"),Jt("epochOfLastAuthorizedSwitch"),Jt("targetEpoch")]),32,"buf"),Jt("idx"),ot("isEmpty")],"priorVoters"),Jt(),se($([Jt("epoch"),Jt("credits"),Jt("prevCredits")]),Ye(Y(),-8),"epochCredits"),$([Jt("slot"),Jt("timestamp")],"lastTimestamp")]);class tf extends js{constructor({config:t,state:e}){super({config:t,state:e})}async switchChain(t){throw Me.unsupportedOperation("Chain switching is not supported by this connector")}async setupProvider(t,e){const r=new Ys,s=this.getChain(e),i=this.getProviderHandlers(t),u=ta(i);r.push(u);const w=ea(s);r.push(w);const d=this.getInjectedProviderProxy(t);d&&r.push(d);const b=Gs(r);this.updateProviderEngineProxy(b),await this.lookupNetwork(t,e)}async lookupNetwork(t,e){return this.update({chainId:e}),e||""}getInjectedProviderProxy(t){}}const ef=n=>({requestAccounts:async()=>n.publicKey?[sn.encode(n.publicKey.toBytes())]:[],getPublicKey:async()=>n.publicKey?sn.encode(n.publicKey.toBytes()):"",getAccounts:async()=>n.publicKey?[sn.encode(n.publicKey.toBytes())]:[],getPrivateKey:async()=>{throw Sr.methodNotSupported()},getSecretKey:async()=>{throw Sr.methodNotSupported()},signTransaction:async e=>await n.signTransaction(e.params.message),signMessage:async e=>await n.signMessage(e.params.data,e.params.from,e.params.display),signAllTransactions:async e=>{var r,s;if(!((r=e.params)!==null&&r!==void 0&&r.message)||!((s=e.params)!==null&&s!==void 0&&s.message.length))throw Sr.invalidParams("message");return await n.signAllTransactions(e.params.message)},signAndSendTransaction:async e=>await n.signAndSendTransaction(e.params.message)}),As=n=>{switch(n.chainId){case"0x65":return"solana:mainnet";case"0x66":return"solana:testnet";case"0x67":return"solana:devnet";default:return null}};class nf extends tf{getProviderHandlers(t){const e=As(this.config.chain),r=()=>{const d=t==null?void 0:t.accounts[0];if(!d)throw Me.notConnectedError();return d};return ef({get publicKey(){return new W(r().publicKey)},signMessage:async d=>{const b=r(),B=new Uint8Array(Buffer.from(d,"utf-8")),R=await t.features[ao].signMessage({account:b,message:B});return sn.encode(R[0].signature)},signTransaction:async d=>{const b=r(),B=await t.features[zr].signTransaction({account:b,transaction:new Uint8Array(Buffer.from(d,"base64")),chain:e});return sn.encode(di.deserialize(B[0].signedTransaction).signatures[0])},signAllTransactions:async d=>{const b=r();return Promise.all(d.map(async B=>{const R=await t.features[zr].signTransaction({account:b,transaction:new Uint8Array(Buffer.from(B,"base64")),chain:e});return Buffer.from(R[0].signedTransaction).toString("base64")}))},signAndSendTransaction:async d=>{const b=r(),B=await t.features[so].signAndSendTransaction({account:b,transaction:new Uint8Array(Buffer.from(d,"base64")),chain:e});return sn.encode(B[0].signature)}})}}class rf extends wa{constructor(t){super(t),Ce(this,"name",void 0),Ce(this,"connectorNamespace",Ws.SOLANA),Ce(this,"currentChainNamespace",Xs.SOLANA),Ce(this,"type",Js.EXTERNAL),Ce(this,"isInjected",!0),Ce(this,"status",Ee.NOT_READY),Ce(this,"wallet",null),Ce(this,"injectedProvider",null),this.name=t.name,this.icon=t.wallet.icon,this.wallet=["gate","solflare"].includes(this.name)?Object.freeze(t.wallet):t.wallet}get provider(){return this.status!==Ee.NOT_READY&&this.injectedProvider?this.injectedProvider:null}get isWalletConnected(){return this.status===Ee.CONNECTED&&this.wallet.accounts.length>0}async init(t){await super.init(t);const e=this.coreOptions.chains.find(r=>r.chainId===t.chainId);super.checkInitializationRequirements({chainConfig:e}),this.injectedProvider=new nf({config:{chain:e,chains:this.coreOptions.chains}}),await this.injectedProvider.setupProvider(this.wallet,t.chainId),this.status=Ee.READY,this.emit(Ke.READY,this.name);try{if(Qs.debug("initializing solana injected connector"),t.autoConnect&&(this.rehydrated=!0,!await this.connect({chainId:t.chainId})))throw this.rehydrated=!1,Me.connectionError("Failed to rehydrate.")}catch(r){this.emit(Ke.REHYDRATION_ERROR,r)}}async connect({chainId:t}){try{super.checkConnectionRequirements();const e=this.coreOptions.chains.find(s=>s.chainId===t);if(!e)throw Me.connectionError("Chain config is not available");this.status=Ee.CONNECTING,this.emit(Ke.CONNECTING,{connector:this.name});const r=As(e);if(!this.wallet.chains.find(s=>s===r))throw Me.connectionError(`Chain ${r} not supported. Supported chains are ${this.wallet.chains.join(", ")}`);if(this.isWalletConnected||await this.wallet.features[co].connect(),this.wallet.accounts.length===0)throw Me.connectionError();return this.status=Ee.CONNECTED,this.emit(Ke.CONNECTED,{connector:this.name,reconnected:this.rehydrated,provider:this.provider}),this.provider}catch(e){throw this.status=Ee.READY,this.rehydrated||this.emit(Ke.ERRORED,e),this.rehydrated=!1,e}}async disconnect(t={cleanup:!1}){await super.disconnectSession();try{var e;await((e=this.wallet.features[Aa])===null||e===void 0?void 0:e.disconnect()),t.cleanup?(this.status=Ee.NOT_READY,this.injectedProvider=null):this.status=Ee.READY,await super.disconnect()}catch(r){this.emit(Ke.ERRORED,Me.disconnectionError(r==null?void 0:r.message))}}async getUserInfo(){if(!this.isWalletConnected)throw Me.notConnectedError("Not connected with wallet, Please login/connect first");return{}}async switchChain(t,e=!1){var r;super.checkSwitchChainRequirements(t,e),await((r=this.injectedProvider)===null||r===void 0?void 0:r.switchChain(t))}async enableMFA(){throw new Error("Method not implemented.")}async manageMFA(){throw new Error("Method Not implemented")}}const hf=n=>({coreOptions:t})=>new rf({name:Hs(n.name),wallet:n,coreOptions:t}),lf=n=>{const{chains:t,features:e}=n;return t.some(i=>i.startsWith("solana"))?!![co,ao,zr,so].every(i=>Object.keys(e).includes(i)):void 0};export{cf as createSolanaMipd,lf as hasSolanaWalletStandardFeatures,hf as walletStandardConnector};
